{"id":"contextflow-283","title":"Foundation: Project duplicate pure functions","description":"Create the pure functions needed for project duplication (Slice 7 foundation).\n\n## Functions to add\n\n### In src/model/projectUtils.ts:\ngenerateUniqueProjectName(baseName: string, existingNames: string[]): string\n- If baseName not in existingNames, return baseName\n- Otherwise append ' - Copy' and check again\n- If still exists, append ' - Copy 2', ' - Copy 3', etc.\n- Return first unique name\n\n### In src/model/actions/projectActions.ts:\nduplicateProjectAction(state: EditorState, projectId: string): { newState: Partial\u003cEditorState\u003e; newProjectId: string }\n- Find project to duplicate\n- Throw if not found\n- Generate unique name using generateUniqueProjectName\n- Deep clone entire project structure\n- Regenerate ALL IDs: project.id, all context IDs, relationship IDs, etc.\n- Update all ID references (e.g., relationship fromContextId/toContextId)\n- Set new createdAt/updatedAt timestamps\n- Add to projects map\n- Set as activeProjectId\n- Return state partial and new project ID\n\n### Helper: regenerateProjectIds(project: Project): Project\n- Internal helper to regenerate all entity IDs\n- Create ID mapping for each entity type\n- Update all cross-references\n\n## Tests\n### projectUtils.test.ts:\n- generateUniqueProjectName: returns original if unique\n- generateUniqueProjectName: appends ' - Copy' for first duplicate\n- generateUniqueProjectName: increments number for subsequent duplicates\n- generateUniqueProjectName: handles existing ' - Copy' names\n\n### projectActions.test.ts:\n- duplicateProjectAction: creates new project with different ID\n- duplicateProjectAction: uses unique name\n- duplicateProjectAction: preserves context count\n- duplicateProjectAction: regenerates context IDs\n- duplicateProjectAction: updates relationship references\n- duplicateProjectAction: sets new timestamps\n- duplicateProjectAction: sets duplicate as active\n\n## TDD Approach\nWrite tests first, then implement functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T12:53:39.953367+08:00","updated_at":"2025-11-30T12:53:39.953367+08:00"}
{"id":"contextflow-28n","title":"Slice 8: User imports a project that already exists","description":"Enable users to handle import conflicts without accidentally overwriting work.\n\n## User Flow\nTopBar → imports JSON → ID conflict → chooses 'Replace' or 'Import as New'\n\n## UI Changes\n\n### TopBar.tsx - Enhanced Import\n- After parsing JSON, check for ID conflict\n- If conflict, show ImportConflictDialog\n- If no conflict, import as normal\n\n### ImportConflictDialog.tsx (NEW)\n- Modal explaining the conflict\n- Two buttons: 'Replace existing' and 'Import as new project'\n- Show both project names for clarity\n- Cancel button to abort import\n\n## Import Options\n### Replace existing\n- Overwrite project in IndexedDB\n- Update projects map with new data\n- Keep same ID\n\n### Import as new project\n- Call regenerateAllIds to get new IDs\n- Generate unique name\n- Add as separate project\n- Original remains untouched\n\n## Acceptance Criteria\n- [ ] Import detects ID conflicts\n- [ ] Conflict shows ImportConflictDialog\n- [ ] 'Replace' overwrites existing project\n- [ ] 'Import as new' creates separate project\n- [ ] New import has regenerated IDs\n- [ ] New import has unique name\n- [ ] Cancel aborts import\n- [ ] No conflict imports normally\n\n## Error Handling\n- Malformed JSON → show error, don't crash\n- Already handled in current import flow\n\n## Dependencies\nRequires: contextflow-uqj (Foundation: Project import conflict functions)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:56:16.406313+08:00","updated_at":"2025-11-30T12:56:16.406313+08:00","dependencies":[{"issue_id":"contextflow-28n","depends_on_id":"contextflow-uqj","type":"blocks","created_at":"2025-11-30T13:05:57.142055+08:00","created_by":"daemon"}]}
{"id":"contextflow-2as","title":"Slice 5: User renames a project","description":"Enable users to fix naming mistakes.\n\n## User Flow\nProjectListModal → double-clicks name → edits inline → Enter saves\n\n## UI Changes\n\n### ProjectListModal.tsx - Inline Editing\n- Double-click on project name enables inline edit mode\n- Show input field overlaying the name\n- Pre-filled with current name, text selected\n- Enter key saves and exits edit mode\n- Escape key cancels and exits edit mode\n- Blur (clicking outside) saves\n- Disable for built-in projects (isBuiltInProject check)\n\n## Store Integration\n- Wire renameProject action into useEditorStore\n- Add autosaveIfNeeded call after rename\n- Track analytics for project rename\n\n## Acceptance Criteria\n- [ ] Double-clicking project name enables inline edit\n- [ ] Input shows current name selected\n- [ ] Enter saves the new name\n- [ ] Escape cancels without saving\n- [ ] Clicking outside saves\n- [ ] Built-in projects cannot be renamed (no edit on double-click)\n- [ ] Empty name prevents save (shows validation)\n- [ ] Renamed project shows new name immediately\n\n## Dependencies\nRequires: contextflow-l5f (Foundation: Project rename pure functions)\nRequires: contextflow-ocn (Slice 3 - ProjectListModal)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:55:17.708697+08:00","updated_at":"2025-11-30T12:55:17.708697+08:00","dependencies":[{"issue_id":"contextflow-2as","depends_on_id":"contextflow-l5f","type":"blocks","created_at":"2025-11-30T13:05:56.528697+08:00","created_by":"daemon"},{"issue_id":"contextflow-2as","depends_on_id":"contextflow-ocn","type":"blocks","created_at":"2025-11-30T13:05:56.588855+08:00","created_by":"daemon"}]}
{"id":"contextflow-5oy","title":"Foundation: Project creation pure functions","description":"Create the pure functions needed for project creation (Slice 1 foundation).\n\n## Functions to implement in src/model/actions/projectActions.ts\n\n### generateEmptyProject(name: string): Project\n- Generate a new Project with unique ID (use crypto.randomUUID())\n- Initialize all required arrays: contexts, relationships, repos, people, teams, groups, users, userNeeds, userNeedConnections, needContextConnections\n- Initialize viewConfig.flowStages as empty array\n- Set createdAt and updatedAt to current ISO timestamp\n- Return fully valid Project structure\n\n### validateProjectName(name: string): { valid: boolean; error?: string }\n- Validate name is not empty after trimming\n- Validate name is not just whitespace\n- Return { valid: true } or { valid: false, error: 'Error message' }\n\n### createProjectAction(state: EditorState, name: string): Partial\u003cEditorState\u003e\n- Validate name first (throw if invalid)\n- Generate empty project\n- Add to projects map\n- Set as activeProjectId\n- Clear all selections\n- Clear undo/redo stacks\n- Return state partial for Zustand\n\n## Tests (src/model/actions/projectActions.test.ts)\n- generateEmptyProject: returns valid structure with all required fields\n- generateEmptyProject: uses unique IDs\n- generateEmptyProject: sets timestamps\n- validateProjectName: rejects empty string\n- validateProjectName: rejects whitespace only\n- validateProjectName: accepts valid names\n- createProjectAction: adds project to state\n- createProjectAction: sets new project as active\n- createProjectAction: clears selections\n\n## TDD Approach\nWrite tests first, then implement functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T12:53:07.431534+08:00","updated_at":"2025-11-30T13:21:31.098078+08:00","closed_at":"2025-11-30T13:21:31.098078+08:00"}
{"id":"contextflow-7qh","title":"Epic: Project Management Feature","description":"Enable users to create, edit, delete, and organize their ContextFlow projects through a modern modal-based interface.\n\n## Overview\nThis epic encompasses all work needed to implement full project management:\n- Create new projects from WelcomeModal and ProjectListModal\n- Switch between projects via ProjectListModal\n- Rename projects via inline editing\n- Delete user projects (not built-in samples)\n- Duplicate projects\n- Handle import conflicts (replace vs import as new)\n\n## Design Decisions\n1. **TopBar:** Replace dropdown with clickable project name → opens ProjectListModal\n2. **Rename:** Double-click project name to inline edit\n3. **Delete:** Browser confirm() dialog\n4. **Samples in Welcome:** Visible but visually secondary (not collapsed)\n\n## Code Organization\n- src/model/actions/projectActions.ts (NEW - pure CRUD functions)\n- src/model/projectUtils.ts (existing - helpers)\n- src/components/ProjectListModal.tsx (NEW)\n- src/components/ProjectCreateDialog.tsx (NEW)\n\n## Out of Scope\n- Project templates beyond built-in samples\n- Project archiving (soft delete)\n- Project sharing/export links\n- Tags/categories/search\n- Bulk operations","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:52:55.226993+08:00","updated_at":"2025-11-30T12:52:55.226993+08:00","dependencies":[{"issue_id":"contextflow-7qh","depends_on_id":"contextflow-9bb","type":"blocks","created_at":"2025-11-30T13:05:57.935942+08:00","created_by":"daemon"}]}
{"id":"contextflow-9bb","title":"Slice 9: Edge Cases \u0026 Polish","description":"Handle edge cases and ensure robust experience without surprises.\n\n## Edge Cases to Handle\n\n### Name Validation\n- Empty/whitespace name → disable Create/Rename button\n- Visual feedback (red border or inline error)\n\n### Delete Constraints\n- Only one project left → disable delete, show tooltip: 'Cannot delete the only project'\n- Built-in projects → hide delete button entirely (already covered in Slice 6)\n- Deleting active project → auto-switch to next project first (already covered in Slice 6)\n\n### Name Collisions on Duplicate\n- Auto-append ' - Copy 2', ' - Copy 3', etc. (already covered in Slice 7)\n\n### Malformed JSON Import\n- Show user-friendly error message\n- Don't crash the app\n- Already partially handled, ensure robust\n\n## Polish Items\n- Keyboard navigation in modals (Tab, Enter, Escape)\n- Focus management (auto-focus first input)\n- Consistent styling across all new dialogs\n\n## Manual Testing\n- Test all flows in browser:\n  - [ ] Create from WelcomeModal\n  - [ ] Create from ProjectListModal\n  - [ ] Switch projects\n  - [ ] Rename project\n  - [ ] Delete project (middle of list)\n  - [ ] Delete active project\n  - [ ] Duplicate project\n  - [ ] Import with conflict - Replace\n  - [ ] Import with conflict - New\n  - [ ] Import malformed JSON\n\n## Acceptance Criteria\n- [ ] All validation prevents invalid states\n- [ ] Tooltips explain disabled actions\n- [ ] Keyboard navigation works\n- [ ] Focus is managed properly\n- [ ] All flows work in light and dark mode\n- [ ] No console errors during any flow\n\n## Dependencies\nRequires: All previous slices (contextflow-i0j through contextflow-28n)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T12:56:40.104562+08:00","updated_at":"2025-11-30T12:56:40.104562+08:00","dependencies":[{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-eeu","type":"blocks","created_at":"2025-11-30T13:05:57.522157+08:00","created_by":"daemon"},{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-b8u","type":"blocks","created_at":"2025-11-30T13:05:57.577225+08:00","created_by":"daemon"},{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-2as","type":"blocks","created_at":"2025-11-30T13:05:57.650077+08:00","created_by":"daemon"},{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-ip2","type":"blocks","created_at":"2025-11-30T13:05:57.705637+08:00","created_by":"daemon"},{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-vxn","type":"blocks","created_at":"2025-11-30T13:05:57.764134+08:00","created_by":"daemon"},{"issue_id":"contextflow-9bb","depends_on_id":"contextflow-28n","type":"blocks","created_at":"2025-11-30T13:05:57.82057+08:00","created_by":"daemon"}]}
{"id":"contextflow-a43","title":"Foundation: Project delete pure functions","description":"Create the pure functions needed for project deletion (Slice 6 foundation).\n\n## Functions to add\n\n### In src/model/projectUtils.ts:\ncanDeleteProject(projectId: string, projects: Record\u003cstring, Project\u003e): boolean\n- Return false if isBuiltInProject(projectId)\n- Return false if Object.keys(projects).length \u003c= 1\n- Return true otherwise\n\nselectNextProject(currentProjectId: string, projects: Record\u003cstring, Project\u003e): string | null\n- Get sorted list of project IDs\n- Find index of currentProjectId\n- If found, return next project ID (wrapping to first if at end)\n- If only one project, return null\n- If not found, return first project ID\n\n### In src/model/actions/projectActions.ts:\ndeleteProjectAction(state: EditorState, projectId: string): Partial\u003cEditorState\u003e\n- Validate canDeleteProject first (throw if false)\n- Remove project from projects map\n- If deleting activeProjectId, switch to next project first\n- Clear selections if deleted project was active\n- Return state partial\n\n## Tests\n### projectUtils.test.ts:\n- canDeleteProject: returns false for built-in projects\n- canDeleteProject: returns false when only one project\n- canDeleteProject: returns true for user projects with multiple projects\n- selectNextProject: returns next project in list\n- selectNextProject: wraps to first when at end\n- selectNextProject: returns first if current not found\n- selectNextProject: returns null when only one project\n\n### projectActions.test.ts:\n- deleteProjectAction: removes project from state\n- deleteProjectAction: throws for built-in projects\n- deleteProjectAction: throws when only one project left\n- deleteProjectAction: switches active project when deleting active\n- deleteProjectAction: clears selections when deleting active\n\n## TDD Approach\nWrite tests first, then implement functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T12:53:25.115542+08:00","updated_at":"2025-11-30T12:53:25.115542+08:00"}
{"id":"contextflow-b8u","title":"Slice 4: User creates a new project from canvas","description":"Enable users to start fresh projects without leaving the app.\n\n## User Flow\nOn canvas → clicks project name → ProjectListModal → 'New Project' → enters name → new canvas\n\n## UI Changes\n\n### ProjectListModal.tsx\n- Add 'New Project' button (prominent placement, top or bottom)\n- Button click opens ProjectCreateDialog\n- Close ProjectListModal when opening create dialog\n\n## Reuse\n- Reuse ProjectCreateDialog from Slice 1\n- Same create flow, just different entry point\n\n## Acceptance Criteria\n- [ ] ProjectListModal has 'New Project' button\n- [ ] Clicking button opens ProjectCreateDialog\n- [ ] ProjectListModal closes when dialog opens\n- [ ] Creating project works same as from WelcomeModal\n\n## Dependencies\nRequires: contextflow-i0j (Slice 1 - ProjectCreateDialog)\nRequires: contextflow-ocn (Slice 3 - ProjectListModal)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:55:01.918319+08:00","updated_at":"2025-11-30T12:55:01.918319+08:00","dependencies":[{"issue_id":"contextflow-b8u","depends_on_id":"contextflow-i0j","type":"blocks","created_at":"2025-11-30T13:05:56.300303+08:00","created_by":"daemon"},{"issue_id":"contextflow-b8u","depends_on_id":"contextflow-ocn","type":"blocks","created_at":"2025-11-30T13:05:56.361108+08:00","created_by":"daemon"}]}
{"id":"contextflow-eeu","title":"Slice 2: First-time user explores samples first","description":"Enable new users to learn by exploring real examples.\n\n## User Flow\nApp loads → WelcomeModal → expands samples → clicks sample → lands on sample project\n\n## UI Changes\n\n### WelcomeModal.tsx\n- Samples remain visible but visually secondary to 'Create new project'\n- Sample selection and explore flow already works\n- Just need to update visual hierarchy\n\n## Acceptance Criteria\n- [ ] Samples section is visible below create CTA\n- [ ] Sample selection still works as before\n- [ ] Clicking sample loads the project correctly\n\n## Notes\nThis is primarily a UI update to WelcomeModal from Slice 1. Minimal changes needed as sample loading already works.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:54:29.147745+08:00","updated_at":"2025-11-30T12:54:29.147745+08:00","dependencies":[{"issue_id":"contextflow-eeu","depends_on_id":"contextflow-i0j","type":"blocks","created_at":"2025-11-30T13:05:56.125584+08:00","created_by":"daemon"}]}
{"id":"contextflow-i0j","title":"Slice 1: First-time user creates their own project","description":"Enable new users to immediately start mapping their own systems.\n\n## User Flow\nApp loads → WelcomeModal → 'Create new project' → enters name → lands on empty canvas\n\n## UI Changes\n\n### WelcomeModal.tsx\n- Restructure to make 'Create new project' the primary CTA\n- Move sample projects to secondary section (visible but not primary)\n- Add onClick handler for create button\n\n### ProjectCreateDialog.tsx (NEW)\n- Modal with name input field\n- Create and Cancel buttons\n- Form validation (disable Create when name empty/whitespace)\n- Call createProject action on submit\n- Close modal and dismiss welcome on success\n\n## Store Integration\n- Wire createProject action into useEditorStore\n- Add autosaveIfNeeded call after project creation\n- Track analytics for project creation\n\n## Built-in Projects Update\n- Remove 'Empty Project' from BUILT_IN_PROJECTS array\n- Update examples/empty.project.json removal or keep for tests only\n\n## Acceptance Criteria\n- [ ] WelcomeModal shows 'Create new project' as primary action\n- [ ] Clicking opens ProjectCreateDialog\n- [ ] Can enter project name\n- [ ] Create button disabled until valid name entered\n- [ ] Clicking Create creates project and switches to it\n- [ ] New project appears with empty canvas\n- [ ] Project is persisted to IndexedDB\n\n## Dependencies\nRequires: contextflow-5oy (Foundation: Project creation pure functions)","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:54:04.987983+08:00","updated_at":"2025-11-30T13:31:10.607556+08:00","dependencies":[{"issue_id":"contextflow-i0j","depends_on_id":"contextflow-5oy","type":"blocks","created_at":"2025-11-30T13:04:46.09655+08:00","created_by":"daemon"}]}
{"id":"contextflow-ip2","title":"Slice 6: User deletes a project","description":"Enable users to clean up unused projects.\n\n## User Flow\nProjectListModal → hovers card → clicks trash → confirms → project removed\n\n## UI Changes\n\n### ProjectListModal.tsx - Delete Button\n- Show trash icon on card hover (top-right corner)\n- Hide trash for built-in projects (isBuiltInProject check)\n- Disable/hide when only one project left\n- Click shows browser confirm() dialog\n\n### Delete Confirmation\n- Use browser confirm() for simplicity\n- Message: 'Delete \"Project Name\"? This cannot be undone.'\n\n## Store Integration\n- Wire deleteProject action into useEditorStore\n- Handle IndexedDB deletion in persistence.ts\n- Add autosaveIfNeeded is NOT needed (we're deleting)\n- Track analytics for project deletion\n\n## Edge Cases\n- Cannot delete last remaining project\n- Cannot delete built-in projects\n- Deleting active project → auto-switch first\n\n## Acceptance Criteria\n- [ ] Trash icon appears on hover\n- [ ] Trash hidden for built-in projects\n- [ ] Trash disabled/hidden when only one project\n- [ ] Click shows confirmation dialog\n- [ ] Confirming deletes project\n- [ ] Project removed from list\n- [ ] Project removed from IndexedDB\n- [ ] If active project deleted, switches to next project\n- [ ] Tooltip shows 'Cannot delete' reason when disabled\n\n## Dependencies\nRequires: contextflow-a43 (Foundation: Project delete pure functions)\nRequires: contextflow-ocn (Slice 3 - ProjectListModal)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:55:41.464096+08:00","updated_at":"2025-11-30T12:55:41.464096+08:00","dependencies":[{"issue_id":"contextflow-ip2","depends_on_id":"contextflow-a43","type":"blocks","created_at":"2025-11-30T13:05:56.753535+08:00","created_by":"daemon"},{"issue_id":"contextflow-ip2","depends_on_id":"contextflow-ocn","type":"blocks","created_at":"2025-11-30T13:05:56.814329+08:00","created_by":"daemon"}]}
{"id":"contextflow-l5f","title":"Foundation: Project rename pure functions","description":"Create the pure functions needed for project renaming (Slice 5 foundation).\n\n## Functions to add to src/model/actions/projectActions.ts\n\n### renameProjectAction(state: EditorState, projectId: string, newName: string): Partial\u003cEditorState\u003e\n- Validate newName using validateProjectName\n- Find project by ID\n- Throw if project not found\n- Update project name\n- Update updatedAt timestamp\n- Return state partial for Zustand\n\n## Tests (add to src/model/actions/projectActions.test.ts)\n- renameProjectAction: updates project name\n- renameProjectAction: updates updatedAt timestamp\n- renameProjectAction: throws for invalid name (empty)\n- renameProjectAction: throws for project not found\n- renameProjectAction: preserves other project fields\n\n## TDD Approach\nWrite tests first, then implement functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T12:53:14.214708+08:00","updated_at":"2025-11-30T12:53:14.214708+08:00"}
{"id":"contextflow-ocn","title":"Slice 3: Returning user switches projects","description":"Enable users to easily navigate between their projects.\n\n## User Flow\nOn canvas → clicks project name in TopBar → ProjectListModal → clicks project → switches\n\n## UI Changes\n\n### TopBar.tsx\n- Replace dropdown \u003cselect\u003e with clickable project name\n- Style as button/link that opens modal\n- Add ChevronDown or similar indicator\n\n### ProjectListModal.tsx (NEW)\nCore modal for project management:\n- Grid/list of project cards\n- Each card shows: project name, context count, last modified\n- Click card to switch and close modal\n- Close button (X) in header\n- Add search/filter later (out of scope for now)\n\n### Project Card Content\n- Project name (primary text)\n- Context count: '{n} contexts'\n- Last modified: use formatRelativeTime() from projectUtils\n\n## Store Changes\n- Timestamps (createdAt/updatedAt) already exist in Project type\n- Auto-timestamping already in persistence layer\n- sortProjectsByLastModified already exists in projectUtils\n\n## Acceptance Criteria\n- [ ] TopBar shows project name as clickable element\n- [ ] Clicking opens ProjectListModal\n- [ ] Modal shows all projects as cards\n- [ ] Each card shows name, context count, last modified\n- [ ] Clicking a card switches to that project\n- [ ] Modal closes after selection\n- [ ] Projects sorted by last modified (most recent first)\n\n## Dependencies\nCan be worked in parallel with Slice 1/2 (separate component)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:54:52.274369+08:00","updated_at":"2025-11-30T13:31:04.383279+08:00","closed_at":"2025-11-30T13:31:04.383279+08:00"}
{"id":"contextflow-uqj","title":"Foundation: Project import conflict functions","description":"Create the pure functions needed for import conflict handling (Slice 8 foundation).\n\n## Functions to add to src/model/actions/projectActions.ts\n\n### checkImportConflict(projectId: string, projects: Record\u003cstring, Project\u003e): boolean\n- Return true if projectId exists in projects map\n- Return false otherwise\n\n### regenerateAllIds(project: Project): Project\n- Generate new project ID\n- Create ID mapping for all entity types\n- Regenerate IDs for: contexts, relationships, repos, people, teams, groups, users, userNeeds, userNeedConnections, needContextConnections, temporal.keyframes\n- Update all cross-references (contextId, teamIds, etc.)\n- Return new project with all new IDs\n\n### importProjectAsNewAction(state: EditorState, project: Project): Partial\u003cEditorState\u003e\n- Call regenerateAllIds on the project\n- Generate unique name using generateUniqueProjectName\n- Set new timestamps\n- Add to projects map\n- Set as activeProjectId\n- Return state partial\n\n## Tests (add to src/model/actions/projectActions.test.ts)\n- checkImportConflict: returns true when ID exists\n- checkImportConflict: returns false when ID doesn't exist\n- regenerateAllIds: generates new project ID\n- regenerateAllIds: regenerates all context IDs\n- regenerateAllIds: updates relationship fromContextId/toContextId\n- regenerateAllIds: updates repo.contextId references\n- regenerateAllIds: preserves data integrity (same counts)\n- importProjectAsNewAction: creates project with new ID\n- importProjectAsNewAction: generates unique name\n\n## TDD Approach\nWrite tests first, then implement functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T12:53:50.344107+08:00","updated_at":"2025-11-30T12:53:50.344107+08:00"}
{"id":"contextflow-vxn","title":"Slice 7: User duplicates a project","description":"Enable users to experiment safely without risking original.\n\n## User Flow\nProjectListModal → hovers card → clicks copy → duplicate created\n\n## UI Changes\n\n### ProjectListModal.tsx - Copy Button\n- Show copy icon on card hover (next to trash)\n- Available for ALL projects (built-in and user)\n- Click immediately duplicates (no dialog needed)\n\n### Visual Feedback\n- Show brief 'Duplicated!' toast or flash\n- New project appears in list\n- Auto-switch to duplicated project\n\n## Store Integration\n- Wire duplicateProject action into useEditorStore\n- Add autosaveIfNeeded call after duplication\n- Track analytics for project duplication\n\n## Naming Strategy\n- Use generateUniqueProjectName with ' - Copy' suffix\n- Handle existing copies: ' - Copy 2', ' - Copy 3', etc.\n\n## Acceptance Criteria\n- [ ] Copy icon appears on hover for all projects\n- [ ] Click creates duplicate immediately\n- [ ] Duplicate has unique name with ' - Copy' suffix\n- [ ] Duplicate has all contexts, relationships, etc.\n- [ ] All IDs are regenerated (no ID conflicts)\n- [ ] Auto-switches to duplicated project\n- [ ] Duplicate is persisted to IndexedDB\n\n## Dependencies\nRequires: contextflow-283 (Foundation: Project duplicate pure functions)\nRequires: contextflow-ocn (Slice 3 - ProjectListModal)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-30T12:55:56.588632+08:00","updated_at":"2025-11-30T12:55:56.588632+08:00","dependencies":[{"issue_id":"contextflow-vxn","depends_on_id":"contextflow-283","type":"blocks","created_at":"2025-11-30T13:05:56.972423+08:00","created_by":"daemon"},{"issue_id":"contextflow-vxn","depends_on_id":"contextflow-ocn","type":"blocks","created_at":"2025-11-30T13:05:57.029102+08:00","created_by":"daemon"}]}
