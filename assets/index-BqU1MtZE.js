(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function gu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zp={exports:{}},gl={},qp={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ji=Symbol.for("react.element"),tx=Symbol.for("react.portal"),nx=Symbol.for("react.fragment"),rx=Symbol.for("react.strict_mode"),ox=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),sx=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),ax=Symbol.for("react.suspense"),cx=Symbol.for("react.memo"),ux=Symbol.for("react.lazy"),Dd=Symbol.iterator;function dx(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var Kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,Jp={};function No(e,t,n){this.props=e,this.context=t,this.refs=Jp,this.updater=n||Kp}No.prototype.isReactComponent={};No.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};No.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eh(){}eh.prototype=No.prototype;function vu(e,t,n){this.props=e,this.context=t,this.refs=Jp,this.updater=n||Kp}var wu=vu.prototype=new eh;wu.constructor=vu;Qp(wu,No.prototype);wu.isPureReactComponent=!0;var Od=Array.isArray,th=Object.prototype.hasOwnProperty,Cu={current:null},nh={key:!0,ref:!0,__self:!0,__source:!0};function rh(e,t,n){var r,o={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)th.call(t,r)&&!nh.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];o.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:ji,type:e,key:s,ref:a,props:o,_owner:Cu.current}}function fx(e,t){return{$$typeof:ji,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ji}function px(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rd=/\/+/g;function ga(e,t){return typeof e=="object"&&e!==null&&e.key!=null?px(""+e.key):t.toString(36)}function Ps(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ji:case tx:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+ga(a,0):r,Od(o)?(n="",e!=null&&(n=e.replace(Rd,"$&/")+"/"),Ps(o,t,n,"",function(p){return p})):o!=null&&(Pu(o)&&(o=fx(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Rd,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Od(e))for(var u=0;u<e.length;u++){s=e[u];var d=r+ga(s,u);a+=Ps(s,t,n,d,o)}else if(d=dx(e),typeof d=="function")for(e=d.call(e),u=0;!(s=e.next()).done;)s=s.value,d=r+ga(s,u++),a+=Ps(s,t,n,d,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Vi(e,t,n){if(e==null)return e;var r=[],o=0;return Ps(e,r,"","",function(s){return t.call(n,s,o++)}),r}function hx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},Ss={transition:null},mx={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ss,ReactCurrentOwner:Cu};function oh(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Vi,forEach:function(e,t,n){Vi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vi(e,function(){t++}),t},toArray:function(e){return Vi(e,function(t){return t})||[]},only:function(e){if(!Pu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=No;Ne.Fragment=nx;Ne.Profiler=ox;Ne.PureComponent=vu;Ne.StrictMode=rx;Ne.Suspense=ax;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;Ne.act=oh;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qp({},e.props),o=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Cu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)th.call(t,d)&&!nh.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];r.children=u}return{$$typeof:ji,type:e.type,key:o,ref:s,props:r,_owner:a}};Ne.createContext=function(e){return e={$$typeof:sx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ix,_context:e},e.Consumer=e};Ne.createElement=rh;Ne.createFactory=function(e){var t=rh.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:lx,render:e}};Ne.isValidElement=Pu;Ne.lazy=function(e){return{$$typeof:ux,_payload:{_status:-1,_result:e},_init:hx}};Ne.memo=function(e,t){return{$$typeof:cx,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Ss.transition;Ss.transition={};try{e()}finally{Ss.transition=t}};Ne.unstable_act=oh;Ne.useCallback=function(e,t){return pt.current.useCallback(e,t)};Ne.useContext=function(e){return pt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return pt.current.useEffect(e,t)};Ne.useId=function(){return pt.current.useId()};Ne.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return pt.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};Ne.useRef=function(e){return pt.current.useRef(e)};Ne.useState=function(e){return pt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return pt.current.useTransition()};Ne.version="18.3.1";qp.exports=Ne;var W=qp.exports;const U=gu(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=W,xx=Symbol.for("react.element"),gx=Symbol.for("react.fragment"),vx=Object.prototype.hasOwnProperty,wx=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cx={key:!0,ref:!0,__self:!0,__source:!0};function ih(e,t,n){var r,o={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)vx.call(t,r)&&!Cx.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:xx,type:e,key:s,ref:a,props:o,_owner:wx.current}}gl.Fragment=gx;gl.jsx=ih;gl.jsxs=ih;Zp.exports=gl;var x=Zp.exports,oc={},sh={exports:{}},Tt={},lh={exports:{}},ah={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,M){var H=O.length;O.push(M);e:for(;0<H;){var F=H-1>>>1,D=O[F];if(0<o(D,M))O[F]=M,O[H]=D,H=F;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],H=O.pop();if(H!==M){O[0]=H;e:for(var F=0,D=O.length,ie=D>>>1;F<ie;){var K=2*(F+1)-1,le=O[K],ue=K+1,oe=O[ue];if(0>o(le,H))ue<D&&0>o(oe,le)?(O[F]=oe,O[ue]=H,F=ue):(O[F]=le,O[K]=H,F=K);else if(ue<D&&0>o(oe,H))O[F]=oe,O[ue]=H,F=ue;else break e}}return M}function o(O,M){var H=O.sortIndex-M.sortIndex;return H!==0?H:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var d=[],p=[],h=1,g=null,w=3,P=!1,N=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(O){for(var M=n(p);M!==null;){if(M.callback===null)r(p);else if(M.startTime<=O)r(p),M.sortIndex=M.expirationTime,t(d,M);else break;M=n(p)}}function k(O){if(S=!1,I(O),!N)if(n(d)!==null)N=!0,z(E);else{var M=n(p);M!==null&&G(k,M.startTime-O)}}function E(O,M){N=!1,S&&(S=!1,y(B),B=-1),P=!0;var H=w;try{for(I(M),g=n(d);g!==null&&(!(g.expirationTime>M)||O&&!Q());){var F=g.callback;if(typeof F=="function"){g.callback=null,w=g.priorityLevel;var D=F(g.expirationTime<=M);M=e.unstable_now(),typeof D=="function"?g.callback=D:g===n(d)&&r(d),I(M)}else r(d);g=n(d)}if(g!==null)var ie=!0;else{var K=n(p);K!==null&&G(k,K.startTime-M),ie=!1}return ie}finally{g=null,w=H,P=!1}}var R=!1,Y=null,B=-1,$=5,Z=-1;function Q(){return!(e.unstable_now()-Z<$)}function ne(){if(Y!==null){var O=e.unstable_now();Z=O;var M=!0;try{M=Y(!0,O)}finally{M?ee():(R=!1,Y=null)}}else R=!1}var ee;if(typeof v=="function")ee=function(){v(ne)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,A=b.port2;b.port1.onmessage=ne,ee=function(){A.postMessage(null)}}else ee=function(){T(ne,0)};function z(O){Y=O,R||(R=!0,ee())}function G(O,M){B=T(function(){O(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){N||P||(N=!0,z(E))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(O){switch(w){case 1:case 2:case 3:var M=3;break;default:M=w}var H=w;w=M;try{return O()}finally{w=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=w;w=O;try{return M()}finally{w=H}},e.unstable_scheduleCallback=function(O,M,H){var F=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?F+H:F):H=F,O){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,O={id:h++,callback:M,priorityLevel:O,startTime:H,expirationTime:D,sortIndex:-1},H>F?(O.sortIndex=H,t(p,O),n(d)===null&&O===n(p)&&(S?(y(B),B=-1):S=!0,G(k,H-F))):(O.sortIndex=D,t(d,O),N||P||(N=!0,z(E))),O},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(O){var M=w;return function(){var H=w;w=M;try{return O.apply(this,arguments)}finally{w=H}}}})(ah);lh.exports=ah;var Px=lh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=W,Nt=Px;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ch=new Set,ci={};function Dr(e,t){yo(e,t),yo(e+"Capture",t)}function yo(e,t){for(ci[e]=t,e=0;e<t.length;e++)ch.add(t[e])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ic=Object.prototype.hasOwnProperty,Ix=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xd={},Bd={};function _x(e){return ic.call(Bd,e)?!0:ic.call(Xd,e)?!1:Ix.test(e)?Bd[e]=!0:(Xd[e]=!0,!1)}function bx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kx(e,t,n,r){if(t===null||typeof t>"u"||bx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ht(e,t,n,r,o,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Su=/[\-:]([a-z])/g;function Iu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Su,Iu);rt[t]=new ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Su,Iu);rt[t]=new ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Su,Iu);rt[t]=new ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function _u(e,t,n,r){var o=rt.hasOwnProperty(t)?rt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kx(t,n,o,r)&&(n=null),r||o===null?_x(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ln=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gi=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),bu=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),uh=Symbol.for("react.provider"),dh=Symbol.for("react.context"),ku=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Nu=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),fh=Symbol.for("react.offscreen"),zd=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=zd&&e[zd]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,va;function Wo(e){if(va===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);va=t&&t[1]||""}return`
`+va+e}var wa=!1;function Ca(e,t){if(!e||wa)return"";wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),s=r.stack.split(`
`),a=o.length-1,u=s.length-1;1<=a&&0<=u&&o[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||o[a]!==s[u]){var d=`
`+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=u);break}}}finally{wa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wo(e):""}function Nx(e){switch(e.tag){case 5:return Wo(e.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return e=Ca(e.type,!1),e;case 11:return e=Ca(e.type.render,!1),e;case 1:return e=Ca(e.type,!0),e;default:return""}}function cc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vr:return"Fragment";case Wr:return"Portal";case sc:return"Profiler";case bu:return"StrictMode";case lc:return"Suspense";case ac:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dh:return(e.displayName||"Context")+".Consumer";case uh:return(e._context.displayName||"Context")+".Provider";case ku:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nu:return t=e.displayName||null,t!==null?t:cc(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return cc(e(t))}catch{}}return null}function Ex(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cc(t);case 8:return t===bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ir(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ph(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tx(e){var t=ph(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zi(e){e._valueTracker||(e._valueTracker=Tx(e))}function hh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ph(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function uc(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ir(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mh(e,t){t=t.checked,t!=null&&_u(e,"checked",t,!1)}function dc(e,t){mh(e,t);var n=ir(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fc(e,t.type,n):t.hasOwnProperty("defaultValue")&&fc(e,t.type,ir(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fc(e,t,n){(t!=="number"||Bs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vo=Array.isArray;function io(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ir(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function pc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $d(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ce(92));if(Vo(n)){if(1<n.length)throw Error(ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ir(n)}}function yh(e,t){var n=ir(t.value),r=ir(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qi,gh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ui(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ax=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(e){Ax.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jo[t]=Jo[e]})});function vh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jo.hasOwnProperty(e)&&Jo[e]?(""+t).trim():t+"px"}function wh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=vh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Lx=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mc(e,t){if(t){if(Lx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function yc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=null;function Eu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gc=null,so=null,lo=null;function Hd(e){if(e=Oi(e)){if(typeof gc!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=Sl(t),gc(e.stateNode,e.type,t))}}function Ch(e){so?lo?lo.push(e):lo=[e]:so=e}function Ph(){if(so){var e=so,t=lo;if(lo=so=null,Hd(e),t)for(e=0;e<t.length;e++)Hd(t[e])}}function Sh(e,t){return e(t)}function Ih(){}var Pa=!1;function _h(e,t,n){if(Pa)return e(t,n);Pa=!0;try{return Sh(e,t,n)}finally{Pa=!1,(so!==null||lo!==null)&&(Ih(),Ph())}}function di(e,t){var n=e.stateNode;if(n===null)return null;var r=Sl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ce(231,t,typeof n));return n}var vc=!1;if(bn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){vc=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{vc=!1}function jx(e,t,n,r,o,s,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(h){this.onError(h)}}var ei=!1,zs=null,Ys=!1,wc=null,Mx={onError:function(e){ei=!0,zs=e}};function Dx(e,t,n,r,o,s,a,u,d){ei=!1,zs=null,jx.apply(Mx,arguments)}function Ox(e,t,n,r,o,s,a,u,d){if(Dx.apply(this,arguments),ei){if(ei){var p=zs;ei=!1,zs=null}else throw Error(ce(198));Ys||(Ys=!0,wc=p)}}function Or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wd(e){if(Or(e)!==e)throw Error(ce(188))}function Rx(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Wd(o),e;if(s===r)return Wd(o),t;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=o,r=s;else{for(var a=!1,u=o.child;u;){if(u===n){a=!0,n=o,r=s;break}if(u===r){a=!0,r=o,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=o;break}if(u===r){a=!0,r=s,n=o;break}u=u.sibling}if(!a)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?e:t}function kh(e){return e=Rx(e),e!==null?Nh(e):null}function Nh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nh(e);if(t!==null)return t;e=e.sibling}return null}var Eh=Nt.unstable_scheduleCallback,Vd=Nt.unstable_cancelCallback,Xx=Nt.unstable_shouldYield,Bx=Nt.unstable_requestPaint,He=Nt.unstable_now,zx=Nt.unstable_getCurrentPriorityLevel,Tu=Nt.unstable_ImmediatePriority,Th=Nt.unstable_UserBlockingPriority,Fs=Nt.unstable_NormalPriority,Yx=Nt.unstable_LowPriority,Ah=Nt.unstable_IdlePriority,vl=null,an=null;function Fx(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Hx,$x=Math.log,Ux=Math.LN2;function Hx(e){return e>>>=0,e===0?32:31-($x(e)/Ux|0)|0}var Ki=64,Qi=4194304;function Go(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $s(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var u=a&~o;u!==0?r=Go(u):(s&=a,s!==0&&(r=Go(s)))}else a=n&~o,a!==0?r=Go(a):s!==0&&(r=Go(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zt(t),o=1<<n,r|=e[n],t&=~o;return r}function Wx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Zt(s),u=1<<a,d=o[a];d===-1?(!(u&n)||u&r)&&(o[a]=Wx(u,t)):d<=t&&(e.expiredLanes|=u),s&=~u}}function Cc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lh(){var e=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),e}function Sa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=n}function Gx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Zt(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Au(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Le=0;function jh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mh,Lu,Dh,Oh,Rh,Pc=!1,Ji=[],Zn=null,qn=null,Kn=null,fi=new Map,pi=new Map,Un=[],Zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(t.pointerId)}}function Mo(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Oi(t),t!==null&&Lu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function qx(e,t,n,r,o){switch(t){case"focusin":return Zn=Mo(Zn,e,t,n,r,o),!0;case"dragenter":return qn=Mo(qn,e,t,n,r,o),!0;case"mouseover":return Kn=Mo(Kn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return fi.set(s,Mo(fi.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,pi.set(s,Mo(pi.get(s)||null,e,t,n,r,o)),!0}return!1}function Xh(e){var t=vr(e.target);if(t!==null){var n=Or(t);if(n!==null){if(t=n.tag,t===13){if(t=bh(n),t!==null){e.blockedOn=t,Rh(e.priority,function(){Dh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xc=r,n.target.dispatchEvent(r),xc=null}else return t=Oi(n),t!==null&&Lu(t),e.blockedOn=n,!1;t.shift()}return!0}function Zd(e,t,n){Is(e)&&n.delete(t)}function Kx(){Pc=!1,Zn!==null&&Is(Zn)&&(Zn=null),qn!==null&&Is(qn)&&(qn=null),Kn!==null&&Is(Kn)&&(Kn=null),fi.forEach(Zd),pi.forEach(Zd)}function Do(e,t){e.blockedOn===t&&(e.blockedOn=null,Pc||(Pc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Kx)))}function hi(e){function t(o){return Do(o,e)}if(0<Ji.length){Do(Ji[0],e);for(var n=1;n<Ji.length;n++){var r=Ji[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&Do(Zn,e),qn!==null&&Do(qn,e),Kn!==null&&Do(Kn,e),fi.forEach(t),pi.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Xh(n),n.blockedOn===null&&Un.shift()}var ao=Ln.ReactCurrentBatchConfig,Us=!0;function Qx(e,t,n,r){var o=Le,s=ao.transition;ao.transition=null;try{Le=1,ju(e,t,n,r)}finally{Le=o,ao.transition=s}}function Jx(e,t,n,r){var o=Le,s=ao.transition;ao.transition=null;try{Le=4,ju(e,t,n,r)}finally{Le=o,ao.transition=s}}function ju(e,t,n,r){if(Us){var o=Sc(e,t,n,r);if(o===null)ja(e,t,r,Hs,n),Gd(e,r);else if(qx(o,e,t,n,r))r.stopPropagation();else if(Gd(e,r),t&4&&-1<Zx.indexOf(e)){for(;o!==null;){var s=Oi(o);if(s!==null&&Mh(s),s=Sc(e,t,n,r),s===null&&ja(e,t,r,Hs,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else ja(e,t,r,null,n)}}var Hs=null;function Sc(e,t,n,r){if(Hs=null,e=Eu(r),e=vr(e),e!==null)if(t=Or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hs=e,null}function Bh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zx()){case Tu:return 1;case Th:return 4;case Fs:case Yx:return 16;case Ah:return 536870912;default:return 16}default:return 16}}var Vn=null,Mu=null,_s=null;function zh(){if(_s)return _s;var e,t=Mu,n=t.length,r,o="value"in Vn?Vn.value:Vn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[s-r];r++);return _s=o.slice(e,1<r?1-r:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function es(){return!0}function qd(){return!1}function At(e){function t(n,r,o,s,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?es:qd,this.isPropagationStopped=qd,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),t}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=At(Eo),Di=Fe({},Eo,{view:0,detail:0}),eg=At(Di),Ia,_a,Oo,wl=Fe({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oo&&(Oo&&e.type==="mousemove"?(Ia=e.screenX-Oo.screenX,_a=e.screenY-Oo.screenY):_a=Ia=0,Oo=e),Ia)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),Kd=At(wl),tg=Fe({},wl,{dataTransfer:0}),ng=At(tg),rg=Fe({},Di,{relatedTarget:0}),ba=At(rg),og=Fe({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),ig=At(og),sg=Fe({},Eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lg=At(sg),ag=Fe({},Eo,{data:0}),Qd=At(ag),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ug={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dg[e])?!!t[e]:!1}function Ou(){return fg}var pg=Fe({},Di,{key:function(e){if(e.key){var t=cg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ug[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hg=At(pg),mg=Fe({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jd=At(mg),yg=Fe({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),xg=At(yg),gg=Fe({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vg=At(gg),wg=Fe({},wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cg=At(wg),Pg=[9,13,27,32],Ru=bn&&"CompositionEvent"in window,ti=null;bn&&"documentMode"in document&&(ti=document.documentMode);var Sg=bn&&"TextEvent"in window&&!ti,Yh=bn&&(!Ru||ti&&8<ti&&11>=ti),ef=" ",tf=!1;function Fh(e,t){switch(e){case"keyup":return Pg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $h(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function Ig(e,t){switch(e){case"compositionend":return $h(t);case"keypress":return t.which!==32?null:(tf=!0,ef);case"textInput":return e=t.data,e===ef&&tf?null:e;default:return null}}function _g(e,t){if(Gr)return e==="compositionend"||!Ru&&Fh(e,t)?(e=zh(),_s=Mu=Vn=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yh&&t.locale!=="ko"?null:t.data;default:return null}}var bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bg[e.type]:t==="textarea"}function Uh(e,t,n,r){Ch(r),t=Ws(t,"onChange"),0<t.length&&(n=new Du("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ni=null,mi=null;function kg(e){tm(e,0)}function Cl(e){var t=Kr(e);if(hh(t))return e}function Ng(e,t){if(e==="change")return t}var Hh=!1;if(bn){var ka;if(bn){var Na="oninput"in document;if(!Na){var rf=document.createElement("div");rf.setAttribute("oninput","return;"),Na=typeof rf.oninput=="function"}ka=Na}else ka=!1;Hh=ka&&(!document.documentMode||9<document.documentMode)}function of(){ni&&(ni.detachEvent("onpropertychange",Wh),mi=ni=null)}function Wh(e){if(e.propertyName==="value"&&Cl(mi)){var t=[];Uh(t,mi,e,Eu(e)),_h(kg,t)}}function Eg(e,t,n){e==="focusin"?(of(),ni=t,mi=n,ni.attachEvent("onpropertychange",Wh)):e==="focusout"&&of()}function Tg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cl(mi)}function Ag(e,t){if(e==="click")return Cl(t)}function Lg(e,t){if(e==="input"||e==="change")return Cl(t)}function jg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:jg;function yi(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ic.call(t,o)||!Qt(e[o],t[o]))return!1}return!0}function sf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lf(e,t){var n=sf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sf(n)}}function Vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gh(){for(var e=window,t=Bs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bs(e.document)}return t}function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mg(e){var t=Gh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vh(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=lf(n,s);var a=lf(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dg=bn&&"documentMode"in document&&11>=document.documentMode,Zr=null,Ic=null,ri=null,_c=!1;function af(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_c||Zr==null||Zr!==Bs(r)||(r=Zr,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ri&&yi(ri,r)||(ri=r,r=Ws(Ic,"onSelect"),0<r.length&&(t=new Du("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zr)))}function ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qr={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionend:ts("Transition","TransitionEnd")},Ea={},Zh={};bn&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Pl(e){if(Ea[e])return Ea[e];if(!qr[e])return e;var t=qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zh)return Ea[e]=t[n];return e}var qh=Pl("animationend"),Kh=Pl("animationiteration"),Qh=Pl("animationstart"),Jh=Pl("transitionend"),em=new Map,cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,t){em.set(e,t),Dr(t,[e])}for(var Ta=0;Ta<cf.length;Ta++){var Aa=cf[Ta],Og=Aa.toLowerCase(),Rg=Aa[0].toUpperCase()+Aa.slice(1);lr(Og,"on"+Rg)}lr(qh,"onAnimationEnd");lr(Kh,"onAnimationIteration");lr(Qh,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(Jh,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function uf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ox(r,t,void 0,e),e.currentTarget=null}function tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==s&&o.isPropagationStopped())break e;uf(o,u,p),s=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==s&&o.isPropagationStopped())break e;uf(o,u,p),s=d}}}if(Ys)throw e=wc,Ys=!1,wc=null,e}function De(e,t){var n=t[Tc];n===void 0&&(n=t[Tc]=new Set);var r=e+"__bubble";n.has(r)||(nm(t,e,2,!1),n.add(r))}function La(e,t,n){var r=0;t&&(r|=4),nm(n,e,r,t)}var ns="_reactListening"+Math.random().toString(36).slice(2);function xi(e){if(!e[ns]){e[ns]=!0,ch.forEach(function(n){n!=="selectionchange"&&(Xg.has(n)||La(n,!1,e),La(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ns]||(t[ns]=!0,La("selectionchange",!1,t))}}function nm(e,t,n,r){switch(Bh(t)){case 1:var o=Qx;break;case 4:o=Jx;break;default:o=ju}n=o.bind(null,t,n,e),o=void 0,!vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ja(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;a=a.return}for(;u!==null;){if(a=vr(u),a===null)return;if(d=a.tag,d===5||d===6){r=s=a;continue e}u=u.parentNode}}r=r.return}_h(function(){var p=s,h=Eu(n),g=[];e:{var w=em.get(e);if(w!==void 0){var P=Du,N=e;switch(e){case"keypress":if(bs(n)===0)break e;case"keydown":case"keyup":P=hg;break;case"focusin":N="focus",P=ba;break;case"focusout":N="blur",P=ba;break;case"beforeblur":case"afterblur":P=ba;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=ng;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=xg;break;case qh:case Kh:case Qh:P=ig;break;case Jh:P=vg;break;case"scroll":P=eg;break;case"wheel":P=Cg;break;case"copy":case"cut":case"paste":P=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Jd}var S=(t&4)!==0,T=!S&&e==="scroll",y=S?w!==null?w+"Capture":null:w;S=[];for(var v=p,I;v!==null;){I=v;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,y!==null&&(k=di(v,y),k!=null&&S.push(gi(v,k,I)))),T)break;v=v.return}0<S.length&&(w=new P(w,N,null,n,h),g.push({event:w,listeners:S}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",w&&n!==xc&&(N=n.relatedTarget||n.fromElement)&&(vr(N)||N[kn]))break e;if((P||w)&&(w=h.window===h?h:(w=h.ownerDocument)?w.defaultView||w.parentWindow:window,P?(N=n.relatedTarget||n.toElement,P=p,N=N?vr(N):null,N!==null&&(T=Or(N),N!==T||N.tag!==5&&N.tag!==6)&&(N=null)):(P=null,N=p),P!==N)){if(S=Kd,k="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=Jd,k="onPointerLeave",y="onPointerEnter",v="pointer"),T=P==null?w:Kr(P),I=N==null?w:Kr(N),w=new S(k,v+"leave",P,n,h),w.target=T,w.relatedTarget=I,k=null,vr(h)===p&&(S=new S(y,v+"enter",N,n,h),S.target=I,S.relatedTarget=T,k=S),T=k,P&&N)t:{for(S=P,y=N,v=0,I=S;I;I=zr(I))v++;for(I=0,k=y;k;k=zr(k))I++;for(;0<v-I;)S=zr(S),v--;for(;0<I-v;)y=zr(y),I--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=zr(S),y=zr(y)}S=null}else S=null;P!==null&&df(g,w,P,S,!1),N!==null&&T!==null&&df(g,T,N,S,!0)}}e:{if(w=p?Kr(p):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var E=Ng;else if(nf(w))if(Hh)E=Lg;else{E=Tg;var R=Eg}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(E=Ag);if(E&&(E=E(e,p))){Uh(g,E,n,h);break e}R&&R(e,w,p),e==="focusout"&&(R=w._wrapperState)&&R.controlled&&w.type==="number"&&fc(w,"number",w.value)}switch(R=p?Kr(p):window,e){case"focusin":(nf(R)||R.contentEditable==="true")&&(Zr=R,Ic=p,ri=null);break;case"focusout":ri=Ic=Zr=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,af(g,n,h);break;case"selectionchange":if(Dg)break;case"keydown":case"keyup":af(g,n,h)}var Y;if(Ru)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Gr?Fh(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Yh&&n.locale!=="ko"&&(Gr||B!=="onCompositionStart"?B==="onCompositionEnd"&&Gr&&(Y=zh()):(Vn=h,Mu="value"in Vn?Vn.value:Vn.textContent,Gr=!0)),R=Ws(p,B),0<R.length&&(B=new Qd(B,e,null,n,h),g.push({event:B,listeners:R}),Y?B.data=Y:(Y=$h(n),Y!==null&&(B.data=Y)))),(Y=Sg?Ig(e,n):_g(e,n))&&(p=Ws(p,"onBeforeInput"),0<p.length&&(h=new Qd("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:p}),h.data=Y))}tm(g,t)})}function gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ws(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=di(e,n),s!=null&&r.unshift(gi(e,s,o)),s=di(e,t),s!=null&&r.push(gi(e,s,o))),e=e.return}return r}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function df(e,t,n,r,o){for(var s=t._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&p!==null&&(u=p,o?(d=di(n,s),d!=null&&a.unshift(gi(n,d,u))):o||(d=di(n,s),d!=null&&a.push(gi(n,d,u)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Bg=/\r\n?/g,zg=/\u0000|\uFFFD/g;function ff(e){return(typeof e=="string"?e:""+e).replace(Bg,`
`).replace(zg,"")}function rs(e,t,n){if(t=ff(t),ff(e)!==t&&n)throw Error(ce(425))}function Vs(){}var bc=null,kc=null;function Nc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ec=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,pf=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof pf<"u"?function(e){return pf.resolve(null).then(e).catch($g)}:Ec;function $g(e){setTimeout(function(){throw e})}function Ma(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),hi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);hi(t)}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var To=Math.random().toString(36).slice(2),sn="__reactFiber$"+To,vi="__reactProps$"+To,kn="__reactContainer$"+To,Tc="__reactEvents$"+To,Ug="__reactListeners$"+To,Hg="__reactHandles$"+To;function vr(e){var t=e[sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kn]||n[sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hf(e);e!==null;){if(n=e[sn])return n;e=hf(e)}return t}e=n,n=e.parentNode}return null}function Oi(e){return e=e[sn]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function Sl(e){return e[vi]||null}var Ac=[],Qr=-1;function ar(e){return{current:e}}function Oe(e){0>Qr||(e.current=Ac[Qr],Ac[Qr]=null,Qr--)}function Me(e,t){Qr++,Ac[Qr]=e.current,e.current=t}var sr={},ct=ar(sr),wt=ar(!1),kr=sr;function xo(e,t){var n=e.type.contextTypes;if(!n)return sr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ct(e){return e=e.childContextTypes,e!=null}function Gs(){Oe(wt),Oe(ct)}function mf(e,t,n){if(ct.current!==sr)throw Error(ce(168));Me(ct,t),Me(wt,n)}function rm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ce(108,Ex(e)||"Unknown",o));return Fe({},n,r)}function Zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,kr=ct.current,Me(ct,e),Me(wt,wt.current),!0}function yf(e,t,n){var r=e.stateNode;if(!r)throw Error(ce(169));n?(e=rm(e,t,kr),r.__reactInternalMemoizedMergedChildContext=e,Oe(wt),Oe(ct),Me(ct,e)):Oe(wt),Me(wt,n)}var Cn=null,Il=!1,Da=!1;function om(e){Cn===null?Cn=[e]:Cn.push(e)}function Wg(e){Il=!0,om(e)}function cr(){if(!Da&&Cn!==null){Da=!0;var e=0,t=Le;try{var n=Cn;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,Il=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),Eh(Tu,cr),o}finally{Le=t,Da=!1}}return null}var Jr=[],eo=0,qs=null,Ks=0,jt=[],Mt=0,Nr=null,Pn=1,Sn="";function mr(e,t){Jr[eo++]=Ks,Jr[eo++]=qs,qs=e,Ks=t}function im(e,t,n){jt[Mt++]=Pn,jt[Mt++]=Sn,jt[Mt++]=Nr,Nr=e;var r=Pn;e=Sn;var o=32-Zt(r)-1;r&=~(1<<o),n+=1;var s=32-Zt(t)+o;if(30<s){var a=o-o%5;s=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Pn=1<<32-Zt(t)+o|n<<o|r,Sn=s+e}else Pn=1<<s|n<<o|r,Sn=e}function Bu(e){e.return!==null&&(mr(e,1),im(e,1,0))}function zu(e){for(;e===qs;)qs=Jr[--eo],Jr[eo]=null,Ks=Jr[--eo],Jr[eo]=null;for(;e===Nr;)Nr=jt[--Mt],jt[Mt]=null,Sn=jt[--Mt],jt[Mt]=null,Pn=jt[--Mt],jt[Mt]=null}var kt=null,bt=null,Re=!1,Wt=null;function sm(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,bt=Qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Nr!==null?{id:Pn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,bt=null,!0):!1;default:return!1}}function Lc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jc(e){if(Re){var t=bt;if(t){var n=t;if(!xf(e,t)){if(Lc(e))throw Error(ce(418));t=Qn(n.nextSibling);var r=kt;t&&xf(e,t)?sm(r,n):(e.flags=e.flags&-4097|2,Re=!1,kt=e)}}else{if(Lc(e))throw Error(ce(418));e.flags=e.flags&-4097|2,Re=!1,kt=e}}}function gf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function os(e){if(e!==kt)return!1;if(!Re)return gf(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nc(e.type,e.memoizedProps)),t&&(t=bt)){if(Lc(e))throw lm(),Error(ce(418));for(;t;)sm(e,t),t=Qn(t.nextSibling)}if(gf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=Qn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=kt?Qn(e.stateNode.nextSibling):null;return!0}function lm(){for(var e=bt;e;)e=Qn(e.nextSibling)}function go(){bt=kt=null,Re=!1}function Yu(e){Wt===null?Wt=[e]:Wt.push(e)}var Vg=Ln.ReactCurrentBatchConfig;function Ro(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var u=o.refs;a===null?delete u[s]:u[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,e))}return e}function is(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vf(e){var t=e._init;return t(e._payload)}function am(e){function t(y,v){if(e){var I=y.deletions;I===null?(y.deletions=[v],y.flags|=16):I.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=nr(y,v),y.index=0,y.sibling=null,y}function s(y,v,I){return y.index=I,e?(I=y.alternate,I!==null?(I=I.index,I<v?(y.flags|=2,v):I):(y.flags|=2,v)):(y.flags|=1048576,v)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,v,I,k){return v===null||v.tag!==6?(v=Fa(I,y.mode,k),v.return=y,v):(v=o(v,I),v.return=y,v)}function d(y,v,I,k){var E=I.type;return E===Vr?h(y,v,I.props.children,k,I.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&vf(E)===v.type)?(k=o(v,I.props),k.ref=Ro(y,v,I),k.return=y,k):(k=js(I.type,I.key,I.props,null,y.mode,k),k.ref=Ro(y,v,I),k.return=y,k)}function p(y,v,I,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=$a(I,y.mode,k),v.return=y,v):(v=o(v,I.children||[]),v.return=y,v)}function h(y,v,I,k,E){return v===null||v.tag!==7?(v=_r(I,y.mode,k,E),v.return=y,v):(v=o(v,I),v.return=y,v)}function g(y,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fa(""+v,y.mode,I),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gi:return I=js(v.type,v.key,v.props,null,y.mode,I),I.ref=Ro(y,null,v),I.return=y,I;case Wr:return v=$a(v,y.mode,I),v.return=y,v;case zn:var k=v._init;return g(y,k(v._payload),I)}if(Vo(v)||Lo(v))return v=_r(v,y.mode,I,null),v.return=y,v;is(y,v)}return null}function w(y,v,I,k){var E=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return E!==null?null:u(y,v,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Gi:return I.key===E?d(y,v,I,k):null;case Wr:return I.key===E?p(y,v,I,k):null;case zn:return E=I._init,w(y,v,E(I._payload),k)}if(Vo(I)||Lo(I))return E!==null?null:h(y,v,I,k,null);is(y,I)}return null}function P(y,v,I,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(I)||null,u(v,y,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gi:return y=y.get(k.key===null?I:k.key)||null,d(v,y,k,E);case Wr:return y=y.get(k.key===null?I:k.key)||null,p(v,y,k,E);case zn:var R=k._init;return P(y,v,I,R(k._payload),E)}if(Vo(k)||Lo(k))return y=y.get(I)||null,h(v,y,k,E,null);is(v,k)}return null}function N(y,v,I,k){for(var E=null,R=null,Y=v,B=v=0,$=null;Y!==null&&B<I.length;B++){Y.index>B?($=Y,Y=null):$=Y.sibling;var Z=w(y,Y,I[B],k);if(Z===null){Y===null&&(Y=$);break}e&&Y&&Z.alternate===null&&t(y,Y),v=s(Z,v,B),R===null?E=Z:R.sibling=Z,R=Z,Y=$}if(B===I.length)return n(y,Y),Re&&mr(y,B),E;if(Y===null){for(;B<I.length;B++)Y=g(y,I[B],k),Y!==null&&(v=s(Y,v,B),R===null?E=Y:R.sibling=Y,R=Y);return Re&&mr(y,B),E}for(Y=r(y,Y);B<I.length;B++)$=P(Y,y,B,I[B],k),$!==null&&(e&&$.alternate!==null&&Y.delete($.key===null?B:$.key),v=s($,v,B),R===null?E=$:R.sibling=$,R=$);return e&&Y.forEach(function(Q){return t(y,Q)}),Re&&mr(y,B),E}function S(y,v,I,k){var E=Lo(I);if(typeof E!="function")throw Error(ce(150));if(I=E.call(I),I==null)throw Error(ce(151));for(var R=E=null,Y=v,B=v=0,$=null,Z=I.next();Y!==null&&!Z.done;B++,Z=I.next()){Y.index>B?($=Y,Y=null):$=Y.sibling;var Q=w(y,Y,Z.value,k);if(Q===null){Y===null&&(Y=$);break}e&&Y&&Q.alternate===null&&t(y,Y),v=s(Q,v,B),R===null?E=Q:R.sibling=Q,R=Q,Y=$}if(Z.done)return n(y,Y),Re&&mr(y,B),E;if(Y===null){for(;!Z.done;B++,Z=I.next())Z=g(y,Z.value,k),Z!==null&&(v=s(Z,v,B),R===null?E=Z:R.sibling=Z,R=Z);return Re&&mr(y,B),E}for(Y=r(y,Y);!Z.done;B++,Z=I.next())Z=P(Y,y,B,Z.value,k),Z!==null&&(e&&Z.alternate!==null&&Y.delete(Z.key===null?B:Z.key),v=s(Z,v,B),R===null?E=Z:R.sibling=Z,R=Z);return e&&Y.forEach(function(ne){return t(y,ne)}),Re&&mr(y,B),E}function T(y,v,I,k){if(typeof I=="object"&&I!==null&&I.type===Vr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Gi:e:{for(var E=I.key,R=v;R!==null;){if(R.key===E){if(E=I.type,E===Vr){if(R.tag===7){n(y,R.sibling),v=o(R,I.props.children),v.return=y,y=v;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&vf(E)===R.type){n(y,R.sibling),v=o(R,I.props),v.ref=Ro(y,R,I),v.return=y,y=v;break e}n(y,R);break}else t(y,R);R=R.sibling}I.type===Vr?(v=_r(I.props.children,y.mode,k,I.key),v.return=y,y=v):(k=js(I.type,I.key,I.props,null,y.mode,k),k.ref=Ro(y,v,I),k.return=y,y=k)}return a(y);case Wr:e:{for(R=I.key;v!==null;){if(v.key===R)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(y,v.sibling),v=o(v,I.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=$a(I,y.mode,k),v.return=y,y=v}return a(y);case zn:return R=I._init,T(y,v,R(I._payload),k)}if(Vo(I))return N(y,v,I,k);if(Lo(I))return S(y,v,I,k);is(y,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,I),v.return=y,y=v):(n(y,v),v=Fa(I,y.mode,k),v.return=y,y=v),a(y)):n(y,v)}return T}var vo=am(!0),cm=am(!1),Qs=ar(null),Js=null,to=null,Fu=null;function $u(){Fu=to=Js=null}function Uu(e){var t=Qs.current;Oe(Qs),e._currentValue=t}function Mc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function co(e,t){Js=e,Fu=to=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Fu!==e)if(e={context:e,memoizedValue:t,next:null},to===null){if(Js===null)throw Error(ce(308));to=e,Js.dependencies={lanes:0,firstContext:e}}else to=to.next=e;return t}var wr=null;function Hu(e){wr===null?wr=[e]:wr.push(e)}function um(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Hu(t)):(n.next=o.next,o.next=n),t.interleaved=n,Nn(e,r)}function Nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yn=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _n(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Nn(e,n)}return o=r.interleaved,o===null?(t.next=t,Hu(r)):(t.next=o.next,o.next=t),r.interleaved=t,Nn(e,n)}function ks(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Au(e,n)}}function wf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function el(e,t,n,r){var o=e.updateQueue;Yn=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?s=p:a.next=p,a=d;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==a&&(u===null?h.firstBaseUpdate=p:u.next=p,h.lastBaseUpdate=d))}if(s!==null){var g=o.baseState;a=0,h=p=d=null,u=s;do{var w=u.lane,P=u.eventTime;if((r&w)===w){h!==null&&(h=h.next={eventTime:P,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,S=u;switch(w=t,P=n,S.tag){case 1:if(N=S.payload,typeof N=="function"){g=N.call(P,g,w);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=S.payload,w=typeof N=="function"?N.call(P,g,w):N,w==null)break e;g=Fe({},g,w);break e;case 2:Yn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,w=o.effects,w===null?o.effects=[u]:w.push(u))}else P={eventTime:P,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(p=h=P,d=g):h=h.next=P,a|=w;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;w=u,u=w.next,w.next=null,o.lastBaseUpdate=w,o.shared.pending=null}}while(!0);if(h===null&&(d=g),o.baseState=d,o.firstBaseUpdate=p,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Tr|=a,e.lanes=a,e.memoizedState=g}}function Cf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ce(191,o));o.call(r)}}}var Ri={},cn=ar(Ri),wi=ar(Ri),Ci=ar(Ri);function Cr(e){if(e===Ri)throw Error(ce(174));return e}function Vu(e,t){switch(Me(Ci,t),Me(wi,e),Me(cn,Ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hc(t,e)}Oe(cn),Me(cn,t)}function wo(){Oe(cn),Oe(wi),Oe(Ci)}function fm(e){Cr(Ci.current);var t=Cr(cn.current),n=hc(t,e.type);t!==n&&(Me(wi,e),Me(cn,n))}function Gu(e){wi.current===e&&(Oe(cn),Oe(wi))}var ze=ar(0);function tl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=[];function Zu(){for(var e=0;e<Oa.length;e++)Oa[e]._workInProgressVersionPrimary=null;Oa.length=0}var Ns=Ln.ReactCurrentDispatcher,Ra=Ln.ReactCurrentBatchConfig,Er=0,Ye=null,Ge=null,Qe=null,nl=!1,oi=!1,Pi=0,Gg=0;function it(){throw Error(ce(321))}function qu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function Ku(e,t,n,r,o,s){if(Er=s,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ns.current=e===null||e.memoizedState===null?Qg:Jg,e=n(r,o),oi){s=0;do{if(oi=!1,Pi=0,25<=s)throw Error(ce(301));s+=1,Qe=Ge=null,t.updateQueue=null,Ns.current=ev,e=n(r,o)}while(oi)}if(Ns.current=rl,t=Ge!==null&&Ge.next!==null,Er=0,Qe=Ge=Ye=null,nl=!1,t)throw Error(ce(300));return e}function Qu(){var e=Pi!==0;return Pi=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ye.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Bt(){if(Ge===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Qe===null?Ye.memoizedState:Qe.next;if(t!==null)Qe=t,Ge=e;else{if(e===null)throw Error(ce(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Qe===null?Ye.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Si(e,t){return typeof t=="function"?t(e):t}function Xa(e){var t=Bt(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=Ge,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var u=a=null,d=null,p=s;do{var h=p.lane;if((Er&h)===h)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var g={lane:h,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=g,a=r):d=d.next=g,Ye.lanes|=h,Tr|=h}p=p.next}while(p!==null&&p!==s);d===null?a=r:d.next=u,Qt(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ye.lanes|=s,Tr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ba(e){var t=Bt(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do s=e(s,a.action),a=a.next;while(a!==o);Qt(s,t.memoizedState)||(gt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function pm(){}function hm(e,t){var n=Ye,r=Bt(),o=t(),s=!Qt(r.memoizedState,o);if(s&&(r.memoizedState=o,gt=!0),r=r.queue,Ju(xm.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Ii(9,ym.bind(null,n,r,o,t),void 0,null),Je===null)throw Error(ce(349));Er&30||mm(n,t,o)}return o}function mm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ym(e,t,n,r){t.value=n,t.getSnapshot=r,gm(t)&&vm(e)}function xm(e,t,n){return n(function(){gm(t)&&vm(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function vm(e){var t=Nn(e,1);t!==null&&qt(t,e,1,-1)}function Pf(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:e},t.queue=e,e=e.dispatch=Kg.bind(null,Ye,e),[t.memoizedState,e]}function Ii(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function wm(){return Bt().memoizedState}function Es(e,t,n,r){var o=rn();Ye.flags|=e,o.memoizedState=Ii(1|t,n,void 0,r===void 0?null:r)}function _l(e,t,n,r){var o=Bt();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var a=Ge.memoizedState;if(s=a.destroy,r!==null&&qu(r,a.deps)){o.memoizedState=Ii(t,n,s,r);return}}Ye.flags|=e,o.memoizedState=Ii(1|t,n,s,r)}function Sf(e,t){return Es(8390656,8,e,t)}function Ju(e,t){return _l(2048,8,e,t)}function Cm(e,t){return _l(4,2,e,t)}function Pm(e,t){return _l(4,4,e,t)}function Sm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Im(e,t,n){return n=n!=null?n.concat([e]):null,_l(4,4,Sm.bind(null,t,e),n)}function ed(){}function _m(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function km(e,t,n){return Er&21?(Qt(n,t)||(n=Lh(),Ye.lanes|=n,Tr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function Zg(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=Ra.transition;Ra.transition={};try{e(!1),t()}finally{Le=n,Ra.transition=r}}function Nm(){return Bt().memoizedState}function qg(e,t,n){var r=tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Em(e))Tm(t,n);else if(n=um(e,t,n,r),n!==null){var o=dt();qt(n,e,r,o),Am(n,t,r)}}function Kg(e,t,n){var r=tr(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Em(e))Tm(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,u=s(a,n);if(o.hasEagerState=!0,o.eagerState=u,Qt(u,a)){var d=t.interleaved;d===null?(o.next=o,Hu(t)):(o.next=d.next,d.next=o),t.interleaved=o;return}}catch{}finally{}n=um(e,t,o,r),n!==null&&(o=dt(),qt(n,e,r,o),Am(n,t,r))}}function Em(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Tm(e,t){oi=nl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Am(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Au(e,n)}}var rl={readContext:Xt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Qg={readContext:Xt,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:Sf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Es(4194308,4,Sm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qg.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:Pf,useDebugValue:ed,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=Pf(!1),t=e[0];return e=Zg.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,o=rn();if(Re){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=t(),Je===null)throw Error(ce(349));Er&30||mm(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Sf(xm.bind(null,r,s,e),[e]),r.flags|=2048,Ii(9,ym.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=rn(),t=Je.identifierPrefix;if(Re){var n=Sn,r=Pn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jg={readContext:Xt,useCallback:_m,useContext:Xt,useEffect:Ju,useImperativeHandle:Im,useInsertionEffect:Cm,useLayoutEffect:Pm,useMemo:bm,useReducer:Xa,useRef:wm,useState:function(){return Xa(Si)},useDebugValue:ed,useDeferredValue:function(e){var t=Bt();return km(t,Ge.memoizedState,e)},useTransition:function(){var e=Xa(Si)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:hm,useId:Nm,unstable_isNewReconciler:!1},ev={readContext:Xt,useCallback:_m,useContext:Xt,useEffect:Ju,useImperativeHandle:Im,useInsertionEffect:Cm,useLayoutEffect:Pm,useMemo:bm,useReducer:Ba,useRef:wm,useState:function(){return Ba(Si)},useDebugValue:ed,useDeferredValue:function(e){var t=Bt();return Ge===null?t.memoizedState=e:km(t,Ge.memoizedState,e)},useTransition:function(){var e=Ba(Si)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:hm,useId:Nm,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Dc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bl={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),o=tr(e),s=_n(r,o);s.payload=t,n!=null&&(s.callback=n),t=Jn(e,s,o),t!==null&&(qt(t,e,o,r),ks(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),o=tr(e),s=_n(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Jn(e,s,o),t!==null&&(qt(t,e,o,r),ks(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=tr(e),o=_n(n,r);o.tag=2,t!=null&&(o.callback=t),t=Jn(e,o,r),t!==null&&(qt(t,e,r,n),ks(t,e,r))}};function If(e,t,n,r,o,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!yi(n,r)||!yi(o,s):!0}function Lm(e,t,n){var r=!1,o=sr,s=t.contextType;return typeof s=="object"&&s!==null?s=Xt(s):(o=Ct(t)?kr:ct.current,r=t.contextTypes,s=(r=r!=null)?xo(e,o):sr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function _f(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function Oc(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Wu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Xt(s):(s=Ct(t)?kr:ct.current,o.context=xo(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Dc(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&bl.enqueueReplaceState(o,o.state,null),el(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Co(e,t){try{var n="",r=t;do n+=Nx(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function za(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tv=typeof WeakMap=="function"?WeakMap:Map;function jm(e,t,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){il||(il=!0,Vc=r),Rc(e,t)},n}function Mm(e,t,n){n=_n(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Rc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rc(e,t),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function bf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=mv.bind(null,e,t,n),t.then(e,e))}function kf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nf(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_n(-1,1),t.tag=2,Jn(n,t,1))),n.lanes|=1),e)}var nv=Ln.ReactCurrentOwner,gt=!1;function ut(e,t,n,r){t.child=e===null?cm(t,null,n,r):vo(t,e.child,n,r)}function Ef(e,t,n,r,o){n=n.render;var s=t.ref;return co(t,o),r=Ku(e,t,n,r,s,o),n=Qu(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Re&&n&&Bu(t),t.flags|=1,ut(e,t,r,o),t.child)}function Tf(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!ad(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Dm(e,t,s,r,o)):(e=js(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:yi,n(a,r)&&e.ref===t.ref)return En(e,t,o)}return t.flags|=1,e=nr(s,r),e.ref=t.ref,e.return=t,t.child=e}function Dm(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(yi(s,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,En(e,t,o)}return Xc(e,t,n,r,o)}function Om(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(ro,_t),_t|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(ro,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(ro,_t),_t|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Me(ro,_t),_t|=r;return ut(e,t,o,n),t.child}function Rm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xc(e,t,n,r,o){var s=Ct(n)?kr:ct.current;return s=xo(t,s),co(t,o),n=Ku(e,t,n,r,s,o),r=Qu(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Re&&r&&Bu(t),t.flags|=1,ut(e,t,n,o),t.child)}function Af(e,t,n,r,o){if(Ct(n)){var s=!0;Zs(t)}else s=!1;if(co(t,o),t.stateNode===null)Ts(e,t),Lm(t,n,r),Oc(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Xt(p):(p=Ct(n)?kr:ct.current,p=xo(t,p));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==p)&&_f(t,a,r,p),Yn=!1;var w=t.memoizedState;a.state=w,el(t,r,a,o),d=t.memoizedState,u!==r||w!==d||wt.current||Yn?(typeof h=="function"&&(Dc(t,n,h,r),d=t.memoizedState),(u=Yn||If(t,n,u,r,w,d,p))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=p,r=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,dm(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:Ut(t.type,u),a.props=p,g=t.pendingProps,w=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Xt(d):(d=Ct(n)?kr:ct.current,d=xo(t,d));var P=n.getDerivedStateFromProps;(h=typeof P=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||w!==d)&&_f(t,a,r,d),Yn=!1,w=t.memoizedState,a.state=w,el(t,r,a,o);var N=t.memoizedState;u!==g||w!==N||wt.current||Yn?(typeof P=="function"&&(Dc(t,n,P,r),N=t.memoizedState),(p=Yn||If(t,n,p,r,w,N,d)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,d)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=d,r=p):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return Bc(e,t,n,r,s,o)}function Bc(e,t,n,r,o,s){Rm(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&yf(t,n,!1),En(e,t,s);r=t.stateNode,nv.current=t;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=vo(t,e.child,null,s),t.child=vo(t,null,u,s)):ut(e,t,u,s),t.memoizedState=r.state,o&&yf(t,n,!0),t.child}function Xm(e){var t=e.stateNode;t.pendingContext?mf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mf(e,t.context,!1),Vu(e,t.containerInfo)}function Lf(e,t,n,r,o){return go(),Yu(o),t.flags|=256,ut(e,t,n,r),t.child}var zc={dehydrated:null,treeContext:null,retryLane:0};function Yc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bm(e,t,n){var r=t.pendingProps,o=ze.current,s=!1,a=(t.flags&128)!==0,u;if((u=a)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Me(ze,o&1),e===null)return jc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=El(a,r,0,null),e=_r(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yc(n),t.memoizedState=zc,e):td(t,a));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return rv(e,t,a,r,u,o,n);if(s){s=r.fallback,a=t.mode,o=e.child,u=o.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=nr(o,d),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?s=nr(u,s):(s=_r(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Yc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=zc,r}return s=e.child,e=s.sibling,r=nr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function td(e,t){return t=El({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ss(e,t,n,r){return r!==null&&Yu(r),vo(t,e.child,null,n),e=td(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rv(e,t,n,r,o,s,a){if(n)return t.flags&256?(t.flags&=-257,r=za(Error(ce(422))),ss(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=El({mode:"visible",children:r.children},o,0,null),s=_r(s,o,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vo(t,e.child,null,a),t.child.memoizedState=Yc(a),t.memoizedState=zc,s);if(!(t.mode&1))return ss(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ce(419)),r=za(s,r,void 0),ss(e,t,a,r)}if(u=(a&e.childLanes)!==0,gt||u){if(r=Je,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Nn(e,o),qt(r,e,o,-1))}return ld(),r=za(Error(ce(421))),ss(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=yv.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,bt=Qn(o.nextSibling),kt=t,Re=!0,Wt=null,e!==null&&(jt[Mt++]=Pn,jt[Mt++]=Sn,jt[Mt++]=Nr,Pn=e.id,Sn=e.overflow,Nr=t),t=td(t,r.children),t.flags|=4096,t)}function jf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Mc(e.return,t,n)}function Ya(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function zm(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(ut(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,n,t);else if(e.tag===19)jf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(ze,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&tl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ya(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&tl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ya(t,!0,n,null,s);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ts(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,n=nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ov(e,t,n){switch(t.tag){case 3:Xm(t),go();break;case 5:fm(t);break;case 1:Ct(t.type)&&Zs(t);break;case 4:Vu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Me(Qs,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?Bm(e,t,n):(Me(ze,ze.current&1),e=En(e,t,n),e!==null?e.sibling:null);Me(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zm(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Me(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,Om(e,t,n)}return En(e,t,n)}var Ym,Fc,Fm,$m;Ym=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fc=function(){};Fm=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Cr(cn.current);var s=null;switch(n){case"input":o=uc(e,o),r=uc(e,r),s=[];break;case"select":o=Fe({},o,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":o=pc(e,o),r=pc(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vs)}mc(n,r);var a;n=null;for(p in o)if(!r.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var u=o[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ci.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var d=r[p];if(u=o!=null?o[p]:void 0,r.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ci.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&De("scroll",e),s||u===d||(s=[])):(s=s||[]).push(p,d))}n&&(s=s||[]).push("style",n);var p=s;(t.updateQueue=p)&&(t.flags|=4)}};$m=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xo(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function iv(e,t,n){var r=t.pendingProps;switch(zu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return Ct(t.type)&&Gs(),st(t),null;case 3:return r=t.stateNode,wo(),Oe(wt),Oe(ct),Zu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(os(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(qc(Wt),Wt=null))),Fc(e,t),st(t),null;case 5:Gu(t);var o=Cr(Ci.current);if(n=t.type,e!==null&&t.stateNode!=null)Fm(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ce(166));return st(t),null}if(e=Cr(cn.current),os(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[sn]=t,r[vi]=s,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(o=0;o<Zo.length;o++)De(Zo[o],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Yd(r,s),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},De("invalid",r);break;case"textarea":$d(r,s),De("invalid",r)}mc(n,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,u,e),o=["children",""+u]):ci.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":Zi(r),Fd(r,s,!0);break;case"textarea":Zi(r),Ud(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[sn]=t,e[vi]=r,Ym(e,t,!1,!1),t.stateNode=e;e:{switch(a=yc(n,r),n){case"dialog":De("cancel",e),De("close",e),o=r;break;case"iframe":case"object":case"embed":De("load",e),o=r;break;case"video":case"audio":for(o=0;o<Zo.length;o++)De(Zo[o],e);o=r;break;case"source":De("error",e),o=r;break;case"img":case"image":case"link":De("error",e),De("load",e),o=r;break;case"details":De("toggle",e),o=r;break;case"input":Yd(e,r),o=uc(e,r),De("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Fe({},r,{value:void 0}),De("invalid",e);break;case"textarea":$d(e,r),o=pc(e,r),De("invalid",e);break;default:o=r}mc(n,o),u=o;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?wh(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&gh(e,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ui(e,d):typeof d=="number"&&ui(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ci.hasOwnProperty(s)?d!=null&&s==="onScroll"&&De("scroll",e):d!=null&&_u(e,s,d,a))}switch(n){case"input":Zi(e),Fd(e,r,!1);break;case"textarea":Zi(e),Ud(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ir(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?io(e,!!r.multiple,s,!1):r.defaultValue!=null&&io(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Vs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)$m(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ce(166));if(n=Cr(Ci.current),Cr(cn.current),os(t)){if(r=t.stateNode,n=t.memoizedProps,r[sn]=t,(s=r.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:rs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=t,t.stateNode=r}return st(t),null;case 13:if(Oe(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&bt!==null&&t.mode&1&&!(t.flags&128))lm(),go(),t.flags|=98560,s=!1;else if(s=os(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[sn]=t}else go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),s=!1}else Wt!==null&&(qc(Wt),Wt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ze===0&&(Ze=3):ld())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return wo(),Fc(e,t),e===null&&xi(t.stateNode.containerInfo),st(t),null;case 10:return Uu(t.type._context),st(t),null;case 17:return Ct(t.type)&&Gs(),st(t),null;case 19:if(Oe(ze),s=t.memoizedState,s===null)return st(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Xo(s,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=tl(e),a!==null){for(t.flags|=128,Xo(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(ze,ze.current&1|2),t.child}e=e.sibling}s.tail!==null&&He()>Po&&(t.flags|=128,r=!0,Xo(s,!1),t.lanes=4194304)}else{if(!r)if(e=tl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Re)return st(t),null}else 2*He()-s.renderingStartTime>Po&&n!==1073741824&&(t.flags|=128,r=!0,Xo(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=He(),t.sibling=null,n=ze.current,Me(ze,r?n&1|2:n&1),t):(st(t),null);case 22:case 23:return sd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function sv(e,t){switch(zu(t),t.tag){case 1:return Ct(t.type)&&Gs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wo(),Oe(wt),Oe(ct),Zu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gu(t),null;case 13:if(Oe(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(ze),null;case 4:return wo(),null;case 10:return Uu(t.type._context),null;case 22:case 23:return sd(),null;case 24:return null;default:return null}}var ls=!1,at=!1,lv=typeof WeakSet=="function"?WeakSet:Set,ge=null;function no(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function $c(e,t,n){try{n()}catch(r){$e(e,t,r)}}var Mf=!1;function av(e,t){if(bc=Us,e=Gh(),Xu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,h=0,g=e,w=null;t:for(;;){for(var P;g!==n||o!==0&&g.nodeType!==3||(u=a+o),g!==s||r!==0&&g.nodeType!==3||(d=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(P=g.firstChild)!==null;)w=g,g=P;for(;;){if(g===e)break t;if(w===n&&++p===o&&(u=a),w===s&&++h===r&&(d=a),(P=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=P}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(kc={focusedElem:e,selectionRange:n},Us=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var S=N.memoizedProps,T=N.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ut(t.type,S),T);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(k){$e(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return N=Mf,Mf=!1,N}function ii(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&$c(t,n,s)}o=o.next}while(o!==r)}}function kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Uc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sn],delete t[vi],delete t[Tc],delete t[Ug],delete t[Hg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hm(e){return e.tag===5||e.tag===3||e.tag===4}function Df(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vs));else if(r!==4&&(e=e.child,e!==null))for(Hc(e,t,n),e=e.sibling;e!==null;)Hc(e,t,n),e=e.sibling}function Wc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wc(e,t,n),e=e.sibling;e!==null;)Wc(e,t,n),e=e.sibling}var tt=null,Ht=!1;function Xn(e,t,n){for(n=n.child;n!==null;)Wm(e,t,n),n=n.sibling}function Wm(e,t,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:at||no(n,t);case 6:var r=tt,o=Ht;tt=null,Xn(e,t,n),tt=r,Ht=o,tt!==null&&(Ht?(e=tt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Ht?(e=tt,n=n.stateNode,e.nodeType===8?Ma(e.parentNode,n):e.nodeType===1&&Ma(e,n),hi(e)):Ma(tt,n.stateNode));break;case 4:r=tt,o=Ht,tt=n.stateNode.containerInfo,Ht=!0,Xn(e,t,n),tt=r,Ht=o;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&$c(n,t,a),o=o.next}while(o!==r)}Xn(e,t,n);break;case 1:if(!at&&(no(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$e(n,t,u)}Xn(e,t,n);break;case 21:Xn(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,Xn(e,t,n),at=r):Xn(e,t,n);break;default:Xn(e,t,n)}}function Of(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lv),t.forEach(function(r){var o=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function $t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,a=t,u=a;e:for(;u!==null;){switch(u.tag){case 5:tt=u.stateNode,Ht=!1;break e;case 3:tt=u.stateNode.containerInfo,Ht=!0;break e;case 4:tt=u.stateNode.containerInfo,Ht=!0;break e}u=u.return}if(tt===null)throw Error(ce(160));Wm(s,a,o),tt=null,Ht=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(p){$e(o,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vm(t,e),t=t.sibling}function Vm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),tn(e),r&4){try{ii(3,e,e.return),kl(3,e)}catch(S){$e(e,e.return,S)}try{ii(5,e,e.return)}catch(S){$e(e,e.return,S)}}break;case 1:$t(t,e),tn(e),r&512&&n!==null&&no(n,n.return);break;case 5:if($t(t,e),tn(e),r&512&&n!==null&&no(n,n.return),e.flags&32){var o=e.stateNode;try{ui(o,"")}catch(S){$e(e,e.return,S)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&mh(o,s),yc(u,a);var p=yc(u,s);for(a=0;a<d.length;a+=2){var h=d[a],g=d[a+1];h==="style"?wh(o,g):h==="dangerouslySetInnerHTML"?gh(o,g):h==="children"?ui(o,g):_u(o,h,g,p)}switch(u){case"input":dc(o,s);break;case"textarea":yh(o,s);break;case"select":var w=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var P=s.value;P!=null?io(o,!!s.multiple,P,!1):w!==!!s.multiple&&(s.defaultValue!=null?io(o,!!s.multiple,s.defaultValue,!0):io(o,!!s.multiple,s.multiple?[]:"",!1))}o[vi]=s}catch(S){$e(e,e.return,S)}}break;case 6:if($t(t,e),tn(e),r&4){if(e.stateNode===null)throw Error(ce(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(S){$e(e,e.return,S)}}break;case 3:if($t(t,e),tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hi(t.containerInfo)}catch(S){$e(e,e.return,S)}break;case 4:$t(t,e),tn(e);break;case 13:$t(t,e),tn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(od=He())),r&4&&Of(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(at=(p=at)||h,$t(t,e),at=p):$t(t,e),tn(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!h&&e.mode&1)for(ge=e,h=e.child;h!==null;){for(g=ge=h;ge!==null;){switch(w=ge,P=w.child,w.tag){case 0:case 11:case 14:case 15:ii(4,w,w.return);break;case 1:no(w,w.return);var N=w.stateNode;if(typeof N.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(S){$e(r,n,S)}}break;case 5:no(w,w.return);break;case 22:if(w.memoizedState!==null){Xf(g);continue}}P!==null?(P.return=w,ge=P):Xf(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{o=g.stateNode,p?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,d=g.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=vh("display",a))}catch(S){$e(e,e.return,S)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(S){$e(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:$t(t,e),tn(e),r&4&&Of(e);break;case 21:break;default:$t(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hm(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ui(o,""),r.flags&=-33);var s=Df(e);Wc(e,s,o);break;case 3:case 4:var a=r.stateNode.containerInfo,u=Df(e);Hc(e,u,a);break;default:throw Error(ce(161))}}catch(d){$e(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cv(e,t,n){ge=e,Gm(e)}function Gm(e,t,n){for(var r=(e.mode&1)!==0;ge!==null;){var o=ge,s=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||ls;if(!a){var u=o.alternate,d=u!==null&&u.memoizedState!==null||at;u=ls;var p=at;if(ls=a,(at=d)&&!p)for(ge=o;ge!==null;)a=ge,d=a.child,a.tag===22&&a.memoizedState!==null?Bf(o):d!==null?(d.return=a,ge=d):Bf(o);for(;s!==null;)ge=s,Gm(s),s=s.sibling;ge=o,ls=u,at=p}Rf(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ge=s):Rf(e)}}function Rf(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||kl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Cf(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cf(t,a,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var h=p.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&hi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}at||t.flags&512&&Uc(t)}catch(w){$e(t,t.return,w)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Xf(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Bf(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kl(4,t)}catch(d){$e(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(d){$e(t,o,d)}}var s=t.return;try{Uc(t)}catch(d){$e(t,s,d)}break;case 5:var a=t.return;try{Uc(t)}catch(d){$e(t,a,d)}}}catch(d){$e(t,t.return,d)}if(t===e){ge=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ge=u;break}ge=t.return}}var uv=Math.ceil,ol=Ln.ReactCurrentDispatcher,nd=Ln.ReactCurrentOwner,Rt=Ln.ReactCurrentBatchConfig,Ee=0,Je=null,We=null,nt=0,_t=0,ro=ar(0),Ze=0,_i=null,Tr=0,Nl=0,rd=0,si=null,xt=null,od=0,Po=1/0,wn=null,il=!1,Vc=null,er=null,as=!1,Gn=null,sl=0,li=0,Gc=null,As=-1,Ls=0;function dt(){return Ee&6?He():As!==-1?As:As=He()}function tr(e){return e.mode&1?Ee&2&&nt!==0?nt&-nt:Vg.transition!==null?(Ls===0&&(Ls=Lh()),Ls):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Bh(e.type)),e):1}function qt(e,t,n,r){if(50<li)throw li=0,Gc=null,Error(ce(185));Mi(e,n,r),(!(Ee&2)||e!==Je)&&(e===Je&&(!(Ee&2)&&(Nl|=n),Ze===4&&Hn(e,nt)),Pt(e,r),n===1&&Ee===0&&!(t.mode&1)&&(Po=He()+500,Il&&cr()))}function Pt(e,t){var n=e.callbackNode;Vx(e,t);var r=$s(e,e===Je?nt:0);if(r===0)n!==null&&Vd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vd(n),t===1)e.tag===0?Wg(zf.bind(null,e)):om(zf.bind(null,e)),Fg(function(){!(Ee&6)&&cr()}),n=null;else{switch(jh(r)){case 1:n=Tu;break;case 4:n=Th;break;case 16:n=Fs;break;case 536870912:n=Ah;break;default:n=Fs}n=n0(n,Zm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zm(e,t){if(As=-1,Ls=0,Ee&6)throw Error(ce(327));var n=e.callbackNode;if(uo()&&e.callbackNode!==n)return null;var r=$s(e,e===Je?nt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ll(e,r);else{t=r;var o=Ee;Ee|=2;var s=Km();(Je!==e||nt!==t)&&(wn=null,Po=He()+500,Ir(e,t));do try{pv();break}catch(u){qm(e,u)}while(!0);$u(),ol.current=s,Ee=o,We!==null?t=0:(Je=null,nt=0,t=Ze)}if(t!==0){if(t===2&&(o=Cc(e),o!==0&&(r=o,t=Zc(e,o))),t===1)throw n=_i,Ir(e,0),Hn(e,r),Pt(e,He()),n;if(t===6)Hn(e,r);else{if(o=e.current.alternate,!(r&30)&&!dv(o)&&(t=ll(e,r),t===2&&(s=Cc(e),s!==0&&(r=s,t=Zc(e,s))),t===1))throw n=_i,Ir(e,0),Hn(e,r),Pt(e,He()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ce(345));case 2:yr(e,xt,wn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=od+500-He(),10<t)){if($s(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ec(yr.bind(null,e,xt,wn),t);break}yr(e,xt,wn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-Zt(r);s=1<<a,a=t[a],a>o&&(o=a),r&=~s}if(r=o,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uv(r/1960))-r,10<r){e.timeoutHandle=Ec(yr.bind(null,e,xt,wn),r);break}yr(e,xt,wn);break;case 5:yr(e,xt,wn);break;default:throw Error(ce(329))}}}return Pt(e,He()),e.callbackNode===n?Zm.bind(null,e):null}function Zc(e,t){var n=si;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=ll(e,t),e!==2&&(t=xt,xt=n,t!==null&&qc(t)),e}function qc(e){xt===null?xt=e:xt.push.apply(xt,e)}function dv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Qt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~rd,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zt(t),r=1<<n;e[n]=-1,t&=~r}}function zf(e){if(Ee&6)throw Error(ce(327));uo();var t=$s(e,0);if(!(t&1))return Pt(e,He()),null;var n=ll(e,t);if(e.tag!==0&&n===2){var r=Cc(e);r!==0&&(t=r,n=Zc(e,r))}if(n===1)throw n=_i,Ir(e,0),Hn(e,t),Pt(e,He()),n;if(n===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,xt,wn),Pt(e,He()),null}function id(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Po=He()+500,Il&&cr())}}function Ar(e){Gn!==null&&Gn.tag===0&&!(Ee&6)&&uo();var t=Ee;Ee|=1;var n=Rt.transition,r=Le;try{if(Rt.transition=null,Le=1,e)return e()}finally{Le=r,Rt.transition=n,Ee=t,!(Ee&6)&&cr()}}function sd(){_t=ro.current,Oe(ro)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Yg(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(zu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gs();break;case 3:wo(),Oe(wt),Oe(ct),Zu();break;case 5:Gu(r);break;case 4:wo();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:Uu(r.type._context);break;case 22:case 23:sd()}n=n.return}if(Je=e,We=e=nr(e.current,null),nt=_t=t,Ze=0,_i=null,rd=Nl=Tr=0,xt=si=null,wr!==null){for(t=0;t<wr.length;t++)if(n=wr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=o,r.next=a}n.pending=r}wr=null}return e}function qm(e,t){do{var n=We;try{if($u(),Ns.current=rl,nl){for(var r=Ye.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}nl=!1}if(Er=0,Qe=Ge=Ye=null,oi=!1,Pi=0,nd.current=null,n===null||n.return===null){Ze=1,_i=t,We=null;break}e:{var s=e,a=n.return,u=n,d=t;if(t=nt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,h=u,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var w=h.alternate;w?(h.updateQueue=w.updateQueue,h.memoizedState=w.memoizedState,h.lanes=w.lanes):(h.updateQueue=null,h.memoizedState=null)}var P=kf(a);if(P!==null){P.flags&=-257,Nf(P,a,u,s,t),P.mode&1&&bf(s,p,t),t=P,d=p;var N=t.updateQueue;if(N===null){var S=new Set;S.add(d),t.updateQueue=S}else N.add(d);break e}else{if(!(t&1)){bf(s,p,t),ld();break e}d=Error(ce(426))}}else if(Re&&u.mode&1){var T=kf(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Nf(T,a,u,s,t),Yu(Co(d,u));break e}}s=d=Co(d,u),Ze!==4&&(Ze=2),si===null?si=[s]:si.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=jm(s,d,t);wf(s,y);break e;case 1:u=d;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(er===null||!er.has(I)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=Mm(s,u,t);wf(s,k);break e}}s=s.return}while(s!==null)}Jm(n)}catch(E){t=E,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function Km(){var e=ol.current;return ol.current=rl,e===null?rl:e}function ld(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),Je===null||!(Tr&268435455)&&!(Nl&268435455)||Hn(Je,nt)}function ll(e,t){var n=Ee;Ee|=2;var r=Km();(Je!==e||nt!==t)&&(wn=null,Ir(e,t));do try{fv();break}catch(o){qm(e,o)}while(!0);if($u(),Ee=n,ol.current=r,We!==null)throw Error(ce(261));return Je=null,nt=0,Ze}function fv(){for(;We!==null;)Qm(We)}function pv(){for(;We!==null&&!Xx();)Qm(We)}function Qm(e){var t=t0(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?Jm(e):We=t,nd.current=null}function Jm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sv(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,We=null;return}}else if(n=iv(n,t,_t),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ze===0&&(Ze=5)}function yr(e,t,n){var r=Le,o=Rt.transition;try{Rt.transition=null,Le=1,hv(e,t,n,r)}finally{Rt.transition=o,Le=r}return null}function hv(e,t,n,r){do uo();while(Gn!==null);if(Ee&6)throw Error(ce(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Gx(e,s),e===Je&&(We=Je=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||as||(as=!0,n0(Fs,function(){return uo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rt.transition,Rt.transition=null;var a=Le;Le=1;var u=Ee;Ee|=4,nd.current=null,av(e,n),Vm(n,e),Mg(kc),Us=!!bc,kc=bc=null,e.current=n,cv(n),Bx(),Ee=u,Le=a,Rt.transition=s}else e.current=n;if(as&&(as=!1,Gn=e,sl=o),s=e.pendingLanes,s===0&&(er=null),Fx(n.stateNode),Pt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(il)throw il=!1,e=Vc,Vc=null,e;return sl&1&&e.tag!==0&&uo(),s=e.pendingLanes,s&1?e===Gc?li++:(li=0,Gc=e):li=0,cr(),null}function uo(){if(Gn!==null){var e=jh(sl),t=Rt.transition,n=Le;try{if(Rt.transition=null,Le=16>e?16:e,Gn===null)var r=!1;else{if(e=Gn,Gn=null,sl=0,Ee&6)throw Error(ce(331));var o=Ee;for(Ee|=4,ge=e.current;ge!==null;){var s=ge,a=s.child;if(ge.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(ge=p;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:ii(8,h,s)}var g=h.child;if(g!==null)g.return=h,ge=g;else for(;ge!==null;){h=ge;var w=h.sibling,P=h.return;if(Um(h),h===p){ge=null;break}if(w!==null){w.return=P,ge=w;break}ge=P}}}var N=s.alternate;if(N!==null){var S=N.child;if(S!==null){N.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}ge=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ge=a;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ii(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ge=y;break e}ge=s.return}}var v=e.current;for(ge=v;ge!==null;){a=ge;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,ge=I;else e:for(a=v;ge!==null;){if(u=ge,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:kl(9,u)}}catch(E){$e(u,u.return,E)}if(u===a){ge=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,ge=k;break e}ge=u.return}}if(Ee=o,cr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(vl,e)}catch{}r=!0}return r}finally{Le=n,Rt.transition=t}}return!1}function Yf(e,t,n){t=Co(n,t),t=jm(e,t,1),e=Jn(e,t,1),t=dt(),e!==null&&(Mi(e,1,t),Pt(e,t))}function $e(e,t,n){if(e.tag===3)Yf(e,e,n);else for(;t!==null;){if(t.tag===3){Yf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){e=Co(n,e),e=Mm(t,e,1),t=Jn(t,e,1),e=dt(),t!==null&&(Mi(t,1,e),Pt(t,e));break}}t=t.return}}function mv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(nt&n)===n&&(Ze===4||Ze===3&&(nt&130023424)===nt&&500>He()-od?Ir(e,0):rd|=n),Pt(e,t)}function e0(e,t){t===0&&(e.mode&1?(t=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):t=1);var n=dt();e=Nn(e,t),e!==null&&(Mi(e,t,n),Pt(e,n))}function yv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),e0(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(t),e0(e,n)}var t0;t0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,ov(e,t,n);gt=!!(e.flags&131072)}else gt=!1,Re&&t.flags&1048576&&im(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ts(e,t),e=t.pendingProps;var o=xo(t,ct.current);co(t,n),o=Ku(null,t,r,e,o,n);var s=Qu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(s=!0,Zs(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Wu(t),o.updater=bl,t.stateNode=o,o._reactInternals=t,Oc(t,r,e,n),t=Bc(null,t,r,!0,s,n)):(t.tag=0,Re&&s&&Bu(t),ut(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ts(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=vv(r),e=Ut(r,e),o){case 0:t=Xc(null,t,r,e,n);break e;case 1:t=Af(null,t,r,e,n);break e;case 11:t=Ef(null,t,r,e,n);break e;case 14:t=Tf(null,t,r,Ut(r.type,e),n);break e}throw Error(ce(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Xc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Af(e,t,r,o,n);case 3:e:{if(Xm(t),e===null)throw Error(ce(387));r=t.pendingProps,s=t.memoizedState,o=s.element,dm(e,t),el(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Co(Error(ce(423)),t),t=Lf(e,t,r,n,o);break e}else if(r!==o){o=Co(Error(ce(424)),t),t=Lf(e,t,r,n,o);break e}else for(bt=Qn(t.stateNode.containerInfo.firstChild),kt=t,Re=!0,Wt=null,n=cm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===o){t=En(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return fm(t),e===null&&jc(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,a=o.children,Nc(r,o)?a=null:s!==null&&Nc(r,s)&&(t.flags|=32),Rm(e,t),ut(e,t,a,n),t.child;case 6:return e===null&&jc(t),null;case 13:return Bm(e,t,n);case 4:return Vu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vo(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Ef(e,t,r,o,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Me(Qs,r._currentValue),r._currentValue=a,s!==null)if(Qt(s.value,a)){if(s.children===o.children&&!wt.current){t=En(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=_n(-1,n&-n),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var h=p.pending;h===null?d.next=d:(d.next=h.next,h.next=d),p.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Mc(s.return,n,t),u.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ce(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Mc(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ut(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,co(t,n),o=Xt(o),r=r(o),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,o=Ut(r,t.pendingProps),o=Ut(r.type,o),Tf(e,t,r,o,n);case 15:return Dm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Ts(e,t),t.tag=1,Ct(r)?(e=!0,Zs(t)):e=!1,co(t,n),Lm(t,r,o),Oc(t,r,o,n),Bc(null,t,r,!0,e,n);case 19:return zm(e,t,n);case 22:return Om(e,t,n)}throw Error(ce(156,t.tag))};function n0(e,t){return Eh(e,t)}function gv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new gv(e,t,n,r)}function ad(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vv(e){if(typeof e=="function")return ad(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ku)return 11;if(e===Nu)return 14}return 2}function nr(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function js(e,t,n,r,o,s){var a=2;if(r=e,typeof e=="function")ad(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Vr:return _r(n.children,o,s,t);case bu:a=8,o|=8;break;case sc:return e=Dt(12,n,t,o|2),e.elementType=sc,e.lanes=s,e;case lc:return e=Dt(13,n,t,o),e.elementType=lc,e.lanes=s,e;case ac:return e=Dt(19,n,t,o),e.elementType=ac,e.lanes=s,e;case fh:return El(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uh:a=10;break e;case dh:a=9;break e;case ku:a=11;break e;case Nu:a=14;break e;case zn:a=16,r=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=Dt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function _r(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function El(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=fh,e.lanes=n,e.stateNode={isHidden:!1},e}function Fa(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function $a(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cd(e,t,n,r,o,s,a,u,d){return e=new wv(e,t,n,u,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Dt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(s),e}function Cv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function r0(e){if(!e)return sr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var n=e.type;if(Ct(n))return rm(e,n,t)}return t}function o0(e,t,n,r,o,s,a,u,d){return e=cd(n,r,!0,e,o,s,a,u,d),e.context=r0(null),n=e.current,r=dt(),o=tr(n),s=_n(r,o),s.callback=t??null,Jn(n,s,o),e.current.lanes=o,Mi(e,o,r),Pt(e,r),e}function Tl(e,t,n,r){var o=t.current,s=dt(),a=tr(o);return n=r0(n),t.context===null?t.context=n:t.pendingContext=n,t=_n(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Jn(o,t,a),e!==null&&(qt(e,o,a,s),ks(e,o,a)),a}function al(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ud(e,t){Ff(e,t),(e=e.alternate)&&Ff(e,t)}function Pv(){return null}var i0=typeof reportError=="function"?reportError:function(e){console.error(e)};function dd(e){this._internalRoot=e}Al.prototype.render=dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));Tl(e,t,null,null)};Al.prototype.unmount=dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){Tl(null,e,null,null)}),t[kn]=null}};function Al(e){this._internalRoot=e}Al.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Xh(e)}};function fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $f(){}function Sv(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var p=al(a);s.call(p)}}var a=o0(t,r,e,0,null,!1,!1,"",$f);return e._reactRootContainer=a,e[kn]=a.current,xi(e.nodeType===8?e.parentNode:e),Ar(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var p=al(d);u.call(p)}}var d=cd(e,0,!1,null,null,!1,!1,"",$f);return e._reactRootContainer=d,e[kn]=d.current,xi(e.nodeType===8?e.parentNode:e),Ar(function(){Tl(t,d,n,r)}),d}function jl(e,t,n,r,o){var s=n._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var u=o;o=function(){var d=al(a);u.call(d)}}Tl(t,a,e,o)}else a=Sv(n,t,e,o,r);return al(a)}Mh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Go(t.pendingLanes);n!==0&&(Au(t,n|1),Pt(t,He()),!(Ee&6)&&(Po=He()+500,cr()))}break;case 13:Ar(function(){var r=Nn(e,1);if(r!==null){var o=dt();qt(r,e,1,o)}}),ud(e,1)}};Lu=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var n=dt();qt(t,e,134217728,n)}ud(e,134217728)}};Dh=function(e){if(e.tag===13){var t=tr(e),n=Nn(e,t);if(n!==null){var r=dt();qt(n,e,t,r)}ud(e,t)}};Oh=function(){return Le};Rh=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};gc=function(e,t,n){switch(t){case"input":if(dc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Sl(r);if(!o)throw Error(ce(90));hh(r),dc(r,o)}}}break;case"textarea":yh(e,n);break;case"select":t=n.value,t!=null&&io(e,!!n.multiple,t,!1)}};Sh=id;Ih=Ar;var Iv={usingClientEntryPoint:!1,Events:[Oi,Kr,Sl,Ch,Ph,id]},Bo={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_v={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kh(e),e===null?null:e.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||Pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cs.isDisabled&&cs.supportsFiber)try{vl=cs.inject(_v),an=cs}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(t))throw Error(ce(200));return Cv(e,t,null,n)};Tt.createRoot=function(e,t){if(!fd(e))throw Error(ce(299));var n=!1,r="",o=i0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=cd(e,1,!1,null,null,n,!1,r,o),e[kn]=t.current,xi(e.nodeType===8?e.parentNode:e),new dd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=kh(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Ar(e)};Tt.hydrate=function(e,t,n){if(!Ll(t))throw Error(ce(200));return jl(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!fd(e))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",a=i0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=o0(t,null,e,1,n??null,o,!1,s,a),e[kn]=t.current,xi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Al(t)};Tt.render=function(e,t,n){if(!Ll(t))throw Error(ce(200));return jl(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Ll(e))throw Error(ce(40));return e._reactRootContainer?(Ar(function(){jl(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1};Tt.unstable_batchedUpdates=id;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ll(n))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return jl(e,t,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function s0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s0)}catch(e){console.error(e)}}s0(),sh.exports=Tt;var bv=sh.exports,Uf=bv;oc.createRoot=Uf.createRoot,oc.hydrateRoot=Uf.hydrateRoot;const kv={},Hf=e=>{let t;const n=new Set,r=(h,g)=>{const w=typeof h=="function"?h(t):h;if(!Object.is(w,t)){const P=t;t=g??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(N=>N(t,P))}},o=()=>t,d={setState:r,getState:o,getInitialState:()=>p,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(kv?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(r,o,d);return d},l0=e=>e?Hf(e):Hf;var a0={exports:{}},c0={},u0={exports:{}},d0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=W;function Nv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ev=typeof Object.is=="function"?Object.is:Nv,Tv=So.useState,Av=So.useEffect,Lv=So.useLayoutEffect,jv=So.useDebugValue;function Mv(e,t){var n=t(),r=Tv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Lv(function(){o.value=n,o.getSnapshot=t,Ua(o)&&s({inst:o})},[e,n,t]),Av(function(){return Ua(o)&&s({inst:o}),e(function(){Ua(o)&&s({inst:o})})},[e]),jv(n),n}function Ua(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ev(e,n)}catch{return!0}}function Dv(e,t){return t()}var Ov=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dv:Mv;d0.useSyncExternalStore=So.useSyncExternalStore!==void 0?So.useSyncExternalStore:Ov;u0.exports=d0;var Rv=u0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=W,Xv=Rv;function Bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zv=typeof Object.is=="function"?Object.is:Bv,Yv=Xv.useSyncExternalStore,Fv=Ml.useRef,$v=Ml.useEffect,Uv=Ml.useMemo,Hv=Ml.useDebugValue;c0.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Fv(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=Uv(function(){function d(P){if(!p){if(p=!0,h=P,P=r(P),o!==void 0&&a.hasValue){var N=a.value;if(o(N,P))return g=N}return g=P}if(N=g,zv(h,P))return N;var S=r(P);return o!==void 0&&o(N,S)?(h=P,N):(h=P,g=S)}var p=!1,h,g,w=n===void 0?null:n;return[function(){return d(t())},w===null?void 0:function(){return d(w())}]},[t,n,r,o]);var u=Yv(e,s[0],s[1]);return $v(function(){a.hasValue=!0,a.value=u},[u]),Hv(u),u};a0.exports=c0;var Wv=a0.exports;const f0=gu(Wv),p0={},{useDebugValue:Vv}=U,{useSyncExternalStoreWithSelector:Gv}=f0;let Wf=!1;const Zv=e=>e;function qv(e,t=Zv,n){(p0?"production":void 0)!=="production"&&n&&!Wf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Wf=!0);const r=Gv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Vv(r),r}const Vf=e=>{(p0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?l0(e):e,n=(r,o)=>qv(t,r,o);return Object.assign(n,t),n},Kv=e=>e?Vf(e):Vf,Qv="acme-ecommerce",Jv="ACME E-Commerce Platform",e1=[{id:"ctx.storefront",name:"Storefront Experience",purpose:"Customer-facing web and mobile storefront for browsing products, viewing details, and managing shopping cart.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Presentation logic is clean, but shares session/cart state models directly with backend APIs without clear adapter layer.",positions:{flow:{x:15},strategic:{x:44},shared:{y:95}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"High visibility. Primary revenue driver. Built with React/Next.js frontend and Node.js BFF (Backend-for-Frontend)."},{id:"ctx.catalog",name:"Product Catalog",purpose:"Manages product data, categories, pricing, inventory availability, and search indexing.",strategicClassification:"core",boundaryIntegrity:"strong",boundaryNotes:"Well-defined API contracts. Clear ownership of product master data. Published events for inventory changes.",positions:{flow:{x:10},strategic:{x:58},shared:{y:65}},evolutionStage:"product/rental",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Authoritative source for product information. Publishes domain events consumed by search, analytics, and storefront cache."},{id:"ctx.search",name:"Product Search & Discovery",purpose:"Provides fast full-text search, faceted filtering, and product recommendations.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Consumes catalog events to build optimized search indices. Clear interface boundaries.",positions:{flow:{x:20},strategic:{x:68},shared:{y:75}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Uses Elasticsearch. Consumes catalog change events to keep search index up to date."},{id:"ctx.cart",name:"Shopping Cart",purpose:"Manages ephemeral and persistent shopping carts, promotions, and cart validation.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Some duplication with checkout logic. Pricing rules are partially replicated from catalog.",positions:{flow:{x:30},strategic:{x:48},shared:{y:80}},evolutionStage:"custom-built",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Redis-backed session storage. Some technical debt around promotion calculation consistency."},{id:"ctx.checkout",name:"Checkout & Order Placement",purpose:"Orchestrates the checkout flow: address validation, payment authorization, order creation, and confirmation.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Orchestrates multiple downstream services. Some business logic leakage from payment and shipping domains.",positions:{flow:{x:45},strategic:{x:46},shared:{y:85}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Complex orchestration logic. Critical path for revenue. Integrates with payment gateway, inventory, and order management."},{id:"ctx.payment",name:"Payment Processing",purpose:"Handles payment method tokenization, authorization, capture, refunds, and payment gateway integration.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Anti-corruption layer over external payment gateways (Stripe, PayPal). Clear domain boundaries.",positions:{flow:{x:50},strategic:{x:62},shared:{y:70}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"PCI-compliant. Uses tokenization to avoid storing card data. Publishes payment events for downstream systems."},{id:"ctx.stripe",name:"Stripe Payment Gateway",purpose:"External payment processing service.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External SaaS. Well-documented API.",positions:{flow:{x:55},strategic:{x:91},shared:{y:55}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Third-party service. Primary payment gateway."},{id:"ctx.orders",name:"Order Management",purpose:"Manages order lifecycle: creation, fulfillment tracking, cancellations, returns, and customer order history.",strategicClassification:"core",boundaryIntegrity:"strong",boundaryNotes:"Clear bounded context. Publishes domain events for order state changes. Authoritative for order data.",positions:{flow:{x:60},strategic:{x:50},shared:{y:75}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Event-sourced architecture. Publishes order events consumed by fulfillment, analytics, and customer service systems."},{id:"ctx.inventory",name:"Inventory Management",purpose:"Tracks product availability, warehouse stock levels, reservations, and restocking.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Integrates with legacy warehouse systems. Some data consistency challenges due to async replication.",positions:{flow:{x:35},strategic:{x:42},shared:{y:55}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Eventually consistent with warehouse systems. Critical for preventing overselling. Some technical debt around reservation expiry."},{id:"ctx.warehouse",name:"Warehouse Management System (Legacy)",purpose:"Legacy on-premise system managing physical warehouse operations and shipping logistics.",strategicClassification:"supporting",boundaryIntegrity:"weak",boundaryNotes:"Legacy system with poorly documented APIs. Data synchronization challenges.",positions:{flow:{x:70},strategic:{x:30},shared:{y:40}},evolutionStage:"custom-built",codeSize:{bucket:"huge"},isLegacy:!0,isExternal:!1,notes:"Built in-house 15 years ago. Java monolith. Poor API documentation. Scheduled for replacement but still mission-critical."},{id:"ctx.shipping",name:"Shipping Integration",purpose:"Integrates with carrier APIs (UPS, FedEx, USPS) for rate calculation, label generation, and shipment tracking.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Anti-corruption layer over multiple carrier APIs. Normalizes data models across carriers.",positions:{flow:{x:75},strategic:{x:70},shared:{y:60}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Abstracts carrier-specific APIs. Publishes shipping events for order tracking updates."},{id:"ctx.carriers",name:"Shipping Carriers (UPS, FedEx, USPS)",purpose:"External shipping carrier services.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External services with varying API quality.",positions:{flow:{x:80},strategic:{x:86},shared:{y:45}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Third-party carrier APIs. Varying levels of API maturity and reliability."},{id:"ctx.notifications",name:"Customer Notifications",purpose:"Sends transactional emails, SMS, and push notifications for order updates, promotions, and account activity.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Event-driven. Consumes events from multiple contexts. Clear template management.",positions:{flow:{x:85},strategic:{x:66},shared:{y:70}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Uses SendGrid for email, Twilio for SMS. Template management via CMS."},{id:"ctx.customerService",name:"Customer Service Portal",purpose:"Internal tools for customer service reps to view orders, process returns, issue refunds, and manage customer inquiries.",strategicClassification:"supporting",boundaryIntegrity:"moderate",boundaryNotes:"Reads from multiple contexts. Some write operations bypass domain APIs and go directly to databases.",positions:{flow:{x:90},strategic:{x:38},shared:{y:80}},evolutionStage:"custom-built",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Internal React admin panel. Some technical debt around direct database access bypassing domain boundaries."},{id:"ctx.analytics",name:"Analytics & Reporting",purpose:"Data warehouse and BI dashboards for business metrics, sales reporting, and product performance analysis.",strategicClassification:"supporting",boundaryIntegrity:"moderate",boundaryNotes:"Consumes events from multiple contexts. Some direct database replication for legacy systems.",positions:{flow:{x:95},strategic:{x:61},shared:{y:50}},evolutionStage:"product/rental",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Snowflake data warehouse. dbt for transformations. Looker for BI. Event-driven ETL from domain events."},{id:"ctx.identity",name:"Customer Identity & Access",purpose:"Manages customer accounts, authentication, authorization, and profile data.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Clean boundaries. OAuth 2.0 / OpenID Connect. Publishes identity events.",positions:{flow:{x:5},strategic:{x:64},shared:{y:60}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Uses Auth0 for authentication. Custom authorization layer for role-based access control."},{id:"ctx.recommendations",name:"Product Recommendations",purpose:"ML-powered product recommendations based on browsing history, purchase patterns, and collaborative filtering.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Consumes events from catalog, orders, and user behavior. Clear API boundaries.",positions:{flow:{x:25},strategic:{x:18},shared:{y:65}},evolutionStage:"genesis",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Python-based ML service. Cutting-edge recommendation algorithms. Training pipeline runs nightly. Real-time inference API for storefront."},{id:"ctx.taxCalculation",name:"Tax Calculation Service",purpose:"External SaaS for real-time sales tax calculation, nexus determination, and tax compliance reporting.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External SaaS with well-documented REST API. Clear contracts.",positions:{flow:{x:48},strategic:{x:88},shared:{y:62}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Third-party service (Avalara or TaxJar). Handles complex multi-jurisdictional tax calculation."},{id:"ctx.fraudDetection",name:"Fraud Detection Service",purpose:"External fraud screening and risk assessment for transactions and account activity.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External SaaS with real-time scoring API. Clear integration patterns.",positions:{flow:{x:52},strategic:{x:92},shared:{y:68}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Third-party service (Sift, Stripe Radar, or similar). Real-time fraud scoring for orders and payments."}],t1=[{id:"rel.storefront-catalog",fromContextId:"ctx.storefront",toContextId:"ctx.catalog",pattern:"customer-supplier",communicationMode:"REST API with Redis cache",description:"Storefront queries catalog for product details, pricing, and availability."},{id:"rel.storefront-search",fromContextId:"ctx.storefront",toContextId:"ctx.search",pattern:"customer-supplier",communicationMode:"GraphQL API",description:"Storefront uses search service for product discovery and filtering."},{id:"rel.storefront-cart",fromContextId:"ctx.storefront",toContextId:"ctx.cart",pattern:"customer-supplier",communicationMode:"REST API",description:"Storefront manages cart state via cart service."},{id:"rel.storefront-identity",fromContextId:"ctx.storefront",toContextId:"ctx.identity",pattern:"conformist",communicationMode:"OAuth 2.0 / JWT tokens",description:"Storefront conforms to identity service's authentication model."},{id:"rel.storefront-recommendations",fromContextId:"ctx.storefront",toContextId:"ctx.recommendations",pattern:"customer-supplier",communicationMode:"REST API",description:"Storefront displays personalized product recommendations."},{id:"rel.search-catalog",fromContextId:"ctx.search",toContextId:"ctx.catalog",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Search consumes catalog change events to update Elasticsearch indices."},{id:"rel.cart-catalog",fromContextId:"ctx.cart",toContextId:"ctx.catalog",pattern:"customer-supplier",communicationMode:"REST API",description:"Cart validates product availability and pricing against catalog."},{id:"rel.cart-inventory",fromContextId:"ctx.cart",toContextId:"ctx.inventory",pattern:"customer-supplier",communicationMode:"REST API",description:"Cart checks real-time inventory availability."},{id:"rel.checkout-cart",fromContextId:"ctx.checkout",toContextId:"ctx.cart",pattern:"customer-supplier",communicationMode:"REST API",description:"Checkout retrieves cart contents for order creation."},{id:"rel.checkout-payment",fromContextId:"ctx.checkout",toContextId:"ctx.payment",pattern:"customer-supplier",communicationMode:"REST API",description:"Checkout orchestrates payment authorization through payment service."},{id:"rel.checkout-orders",fromContextId:"ctx.checkout",toContextId:"ctx.orders",pattern:"customer-supplier",communicationMode:"REST API",description:"Checkout creates orders in order management system."},{id:"rel.checkout-inventory",fromContextId:"ctx.checkout",toContextId:"ctx.inventory",pattern:"customer-supplier",communicationMode:"REST API",description:"Checkout reserves inventory during order placement."},{id:"rel.payment-stripe",fromContextId:"ctx.payment",toContextId:"ctx.stripe",pattern:"anti-corruption-layer",communicationMode:"Stripe REST API",description:"Payment service wraps Stripe with domain-specific abstractions."},{id:"rel.orders-inventory",fromContextId:"ctx.orders",toContextId:"ctx.inventory",pattern:"customer-supplier",communicationMode:"REST API + Events",description:"Orders commits inventory reservations and publishes fulfillment events."},{id:"rel.orders-shipping",fromContextId:"ctx.orders",toContextId:"ctx.shipping",pattern:"customer-supplier",communicationMode:"REST API",description:"Orders requests shipping labels and tracking information."},{id:"rel.inventory-warehouse",fromContextId:"ctx.inventory",toContextId:"ctx.warehouse",pattern:"anti-corruption-layer",communicationMode:"SOAP API + Database replication",description:"Inventory wraps legacy warehouse system with modern API."},{id:"rel.shipping-carriers",fromContextId:"ctx.shipping",toContextId:"ctx.carriers",pattern:"anti-corruption-layer",communicationMode:"Carrier-specific APIs",description:"Shipping normalizes different carrier APIs into unified interface."},{id:"rel.notifications-orders",fromContextId:"ctx.notifications",toContextId:"ctx.orders",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Notifications consumes order events to send customer updates."},{id:"rel.notifications-shipping",fromContextId:"ctx.notifications",toContextId:"ctx.shipping",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Notifications consumes shipping events for tracking updates."},{id:"rel.customerService-orders",fromContextId:"ctx.customerService",toContextId:"ctx.orders",pattern:"customer-supplier",communicationMode:"REST API + Direct DB read",description:"Customer service queries and modifies orders (some boundary violations exist)."},{id:"rel.analytics-catalog",fromContextId:"ctx.analytics",toContextId:"ctx.catalog",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Analytics consumes catalog events for product performance analysis."},{id:"rel.analytics-orders",fromContextId:"ctx.analytics",toContextId:"ctx.orders",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Analytics consumes order events for sales reporting."},{id:"rel.analytics-warehouse",fromContextId:"ctx.analytics",toContextId:"ctx.warehouse",pattern:"conformist",communicationMode:"Database replication",description:"Analytics replicates warehouse data for operational reporting."},{id:"rel.recommendations-catalog",fromContextId:"ctx.recommendations",toContextId:"ctx.catalog",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Recommendations consumes catalog events for ML model training."},{id:"rel.recommendations-orders",fromContextId:"ctx.recommendations",toContextId:"ctx.orders",pattern:"conformist",communicationMode:"Event stream (Kafka)",description:"Recommendations uses purchase history for collaborative filtering."},{id:"rel.checkout-orders-partnership",fromContextId:"ctx.checkout",toContextId:"ctx.orders",pattern:"partnership",communicationMode:"Synchronous API + Events",description:"Checkout and Orders collaborate closely on transaction boundaries and state management. Joint ownership of order creation semantics."},{id:"rel.checkout-taxCalculation",fromContextId:"ctx.checkout",toContextId:"ctx.taxCalculation",pattern:"anti-corruption-layer",communicationMode:"REST API",description:"Checkout wraps external tax service with domain-specific abstractions for order tax calculation."},{id:"rel.payment-fraudDetection",fromContextId:"ctx.payment",toContextId:"ctx.fraudDetection",pattern:"conformist",communicationMode:"REST API",description:"Payment service consumes fraud scoring for risk assessment during payment authorization."}],n1=[{id:"repo.storefront-web",name:"storefront-web",remoteUrl:"https://github.com/acme-corp/storefront-web",contextId:"ctx.storefront",teamIds:["team.customer-experience"],contributors:[{personId:"person.sarah"},{personId:"person.mike"},{personId:"person.jessica"}]},{id:"repo.catalog-service",name:"catalog-service",remoteUrl:"https://github.com/acme-corp/catalog-service",contextId:"ctx.catalog",teamIds:["team.platform"],contributors:[{personId:"person.david"},{personId:"person.emma"}]},{id:"repo.search-service",name:"search-service",remoteUrl:"https://github.com/acme-corp/search-service",contextId:"ctx.search",teamIds:["team.platform"],contributors:[{personId:"person.david"},{personId:"person.alex"}]},{id:"repo.cart-service",name:"cart-service",remoteUrl:"https://github.com/acme-corp/cart-service",contextId:"ctx.cart",teamIds:["team.checkout"],contributors:[{personId:"person.rachel"},{personId:"person.tom"}]},{id:"repo.checkout-service",name:"checkout-service",remoteUrl:"https://github.com/acme-corp/checkout-service",contextId:"ctx.checkout",teamIds:["team.checkout"],contributors:[{personId:"person.rachel"},{personId:"person.tom"},{personId:"person.lisa"}]},{id:"repo.payment-service",name:"payment-service",remoteUrl:"https://github.com/acme-corp/payment-service",contextId:"ctx.payment",teamIds:["team.payments"],contributors:[{personId:"person.kevin"},{personId:"person.amanda"}]},{id:"repo.order-service",name:"order-service",remoteUrl:"https://github.com/acme-corp/order-service",contextId:"ctx.orders",teamIds:["team.fulfillment"],contributors:[{personId:"person.chris"},{personId:"person.nicole"}]},{id:"repo.inventory-service",name:"inventory-service",remoteUrl:"https://github.com/acme-corp/inventory-service",contextId:"ctx.inventory",teamIds:["team.fulfillment"],contributors:[{personId:"person.chris"},{personId:"person.brian"}]},{id:"repo.warehouse-monolith",name:"warehouse-system-legacy",remoteUrl:"https://github.com/acme-corp/warehouse-system-legacy",contextId:"ctx.warehouse",teamIds:["team.operations"],contributors:[{personId:"person.robert"}],analysisSummary:"Legacy Java monolith. Minimal test coverage. Poor documentation."},{id:"repo.shipping-integration",name:"shipping-integration",remoteUrl:"https://github.com/acme-corp/shipping-integration",contextId:"ctx.shipping",teamIds:["team.fulfillment"],contributors:[{personId:"person.chris"},{personId:"person.brian"}]},{id:"repo.notification-service",name:"notification-service",remoteUrl:"https://github.com/acme-corp/notification-service",contextId:"ctx.notifications",teamIds:["team.platform"],contributors:[{personId:"person.emma"},{personId:"person.alex"}]},{id:"repo.cs-portal",name:"customer-service-portal",remoteUrl:"https://github.com/acme-corp/customer-service-portal",contextId:"ctx.customerService",teamIds:["team.customer-experience"],contributors:[{personId:"person.jessica"},{personId:"person.mike"}]},{id:"repo.analytics-warehouse",name:"analytics-data-warehouse",remoteUrl:"https://github.com/acme-corp/analytics-data-warehouse",contextId:"ctx.analytics",teamIds:["team.data-engineering"],contributors:[{personId:"person.maya"},{personId:"person.james"}]},{id:"repo.identity-service",name:"identity-service",remoteUrl:"https://github.com/acme-corp/identity-service",contextId:"ctx.identity",teamIds:["team.platform"],contributors:[{personId:"person.kevin"},{personId:"person.david"}]},{id:"repo.recommendations-ml",name:"recommendations-ml-service",remoteUrl:"https://github.com/acme-corp/recommendations-ml-service",contextId:"ctx.recommendations",teamIds:["team.data-engineering"],contributors:[{personId:"person.maya"},{personId:"person.sophia"}]},{id:"repo.mobile-app-ios",name:"mobile-app-ios",remoteUrl:"https://github.com/acme-corp/mobile-app-ios",teamIds:["team.customer-experience"],contributors:[{personId:"person.sarah"},{personId:"person.mike"}],analysisSummary:"Native iOS mobile app. In development, not yet mapped to a specific bounded context."}],r1=[{id:"person.sarah",displayName:"Sarah Chen",emails:["sarah.chen@acme-corp.com"]},{id:"person.mike",displayName:"Mike Johnson",emails:["mike.johnson@acme-corp.com"]},{id:"person.jessica",displayName:"Jessica Martinez",emails:["jessica.martinez@acme-corp.com"]},{id:"person.david",displayName:"David Kim",emails:["david.kim@acme-corp.com"]},{id:"person.emma",displayName:"Emma Watson",emails:["emma.watson@acme-corp.com"]},{id:"person.alex",displayName:"Alex Patel",emails:["alex.patel@acme-corp.com"]},{id:"person.rachel",displayName:"Rachel Green",emails:["rachel.green@acme-corp.com"]},{id:"person.tom",displayName:"Tom Anderson",emails:["tom.anderson@acme-corp.com"]},{id:"person.lisa",displayName:"Lisa Wong",emails:["lisa.wong@acme-corp.com"]},{id:"person.kevin",displayName:"Kevin Brown",emails:["kevin.brown@acme-corp.com"]},{id:"person.amanda",displayName:"Amanda Lee",emails:["amanda.lee@acme-corp.com"]},{id:"person.chris",displayName:"Chris Taylor",emails:["chris.taylor@acme-corp.com"]},{id:"person.nicole",displayName:"Nicole Davis",emails:["nicole.davis@acme-corp.com"]},{id:"person.brian",displayName:"Brian Wilson",emails:["brian.wilson@acme-corp.com"]},{id:"person.robert",displayName:"Robert Miller",emails:["robert.miller@acme-corp.com"]},{id:"person.maya",displayName:"Maya Singh",emails:["maya.singh@acme-corp.com"]},{id:"person.james",displayName:"James Chen",emails:["james.chen@acme-corp.com"]},{id:"person.sophia",displayName:"Sophia Rodriguez",emails:["sophia.rodriguez@acme-corp.com"]}],o1=[{id:"team.customer-experience",name:"Customer Experience Squad",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/CX/boards/12",topologyType:"stream-aligned"},{id:"team.checkout",name:"Checkout & Cart Team",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/CHK/boards/15",topologyType:"stream-aligned"},{id:"team.payments",name:"Payments Team",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/PAY/boards/18",topologyType:"complicated-subsystem"},{id:"team.fulfillment",name:"Fulfillment & Logistics",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/FUL/boards/22",topologyType:"stream-aligned"},{id:"team.platform",name:"Platform Engineering",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/PLAT/boards/5",topologyType:"platform"},{id:"team.data-engineering",name:"Data Engineering",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/DATA/boards/28",topologyType:"platform"},{id:"team.operations",name:"Operations & Legacy Systems",jiraBoard:"https://acme-corp.atlassian.net/jira/software/c/projects/OPS/boards/32",topologyType:"enabling"}],i1=[{id:"group.customer-facing",label:"Customer-Facing Experience",color:"rgba(59, 130, 246, 0.6)",contextIds:["ctx.storefront","ctx.search","ctx.recommendations"],notes:"Front-end systems directly visible to customers."},{id:"group.order-flow",label:"Order & Checkout Flow",color:"rgba(251, 146, 60, 0.6)",contextIds:["ctx.cart","ctx.checkout","ctx.orders"],notes:"Core revenue-generating transactional flow."},{id:"group.fulfillment",label:"Fulfillment & Shipping",color:"rgba(139, 92, 246, 0.6)",contextIds:["ctx.inventory","ctx.warehouse","ctx.shipping"],notes:"Physical goods handling and delivery."},{id:"group.platform-services",label:"Platform Services",color:"rgba(34, 197, 94, 0.6)",contextIds:["ctx.catalog","ctx.identity","ctx.payment","ctx.notifications"],notes:"Shared platform capabilities."},{id:"group.security-compliance",label:"Security & Compliance",color:"rgba(239, 68, 68, 0.6)",contextIds:["ctx.payment","ctx.identity","ctx.fraudDetection"],notes:"Security-critical systems handling authentication, authorization, payments, and fraud prevention. Overlaps with Platform Services."}],s1=[{id:"actor.shopper",name:"Online Shopper",description:"Customers browsing and purchasing products through the e-commerce platform",position:15},{id:"actor.store-manager",name:"Store Manager",description:"Internal users managing catalog, inventory, and order fulfillment",position:50},{id:"actor.warehouse-staff",name:"Warehouse Staff",description:"Staff handling physical inventory and shipment preparation",position:75}],l1=[{id:"need.discover-products",name:"Discover Products",description:"Find relevant products through search and browsing",position:30,visibility:!0},{id:"need.checkout-fast",name:"Fast Checkout",description:"Complete purchase quickly and securely",position:45,visibility:!0},{id:"need.track-order",name:"Track Orders",description:"Monitor order status and delivery progress",position:55,visibility:!0},{id:"need.manage-inventory",name:"Manage Inventory",description:"Track stock levels and fulfill orders",position:42,visibility:!0},{id:"need.ship-efficiently",name:"Ship Efficiently",description:"Process shipments and generate labels",position:70,visibility:!0}],a1=[{id:"conn.shopper-discover",actorId:"actor.shopper",userNeedId:"need.discover-products"},{id:"conn.shopper-checkout",actorId:"actor.shopper",userNeedId:"need.checkout-fast"},{id:"conn.shopper-track",actorId:"actor.shopper",userNeedId:"need.track-order"},{id:"conn.manager-inventory",actorId:"actor.store-manager",userNeedId:"need.manage-inventory"},{id:"conn.warehouse-ship",actorId:"actor.warehouse-staff",userNeedId:"need.ship-efficiently"}],c1=[{id:"conn.discover-storefront",userNeedId:"need.discover-products",contextId:"ctx.storefront"},{id:"conn.discover-search",userNeedId:"need.discover-products",contextId:"ctx.search"},{id:"conn.discover-catalog",userNeedId:"need.discover-products",contextId:"ctx.catalog"},{id:"conn.checkout-cart",userNeedId:"need.checkout-fast",contextId:"ctx.cart"},{id:"conn.checkout-checkout",userNeedId:"need.checkout-fast",contextId:"ctx.checkout"},{id:"conn.checkout-payment",userNeedId:"need.checkout-fast",contextId:"ctx.payment"},{id:"conn.track-orders",userNeedId:"need.track-order",contextId:"ctx.orders"},{id:"conn.track-shipping",userNeedId:"need.track-order",contextId:"ctx.shipping"},{id:"conn.track-notifications",userNeedId:"need.track-order",contextId:"ctx.notifications"},{id:"conn.inventory-inventory",userNeedId:"need.manage-inventory",contextId:"ctx.inventory"},{id:"conn.inventory-catalog",userNeedId:"need.manage-inventory",contextId:"ctx.catalog"},{id:"conn.ship-shipping",userNeedId:"need.ship-efficiently",contextId:"ctx.shipping"},{id:"conn.ship-warehouse",userNeedId:"need.ship-efficiently",contextId:"ctx.warehouse"}],u1={flowStages:[{label:"Discovery",position:10},{label:"Selection",position:30},{label:"Purchase",position:50},{label:"Fulfillment",position:70},{label:"Post-Sale",position:90}]},d1={id:Qv,name:Jv,contexts:e1,relationships:t1,repos:n1,people:r1,teams:o1,groups:i1,actors:s1,userNeeds:l1,actorNeedConnections:a1,needContextConnections:c1,viewConfig:u1},f1="cbioportal",p1="cBioPortal Demo Map",h1=[{id:"ctx.portalExperience",name:"Clinical & Genomic Data Portal",purpose:"Interactive portal UI for clinicians/researchers to explore studies, view mutations, survival plots, and cohort summaries.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Presentation logic and query semantics are tightly coupled; frontend leans directly on backend's data model.",positions:{flow:{x:70},strategic:{x:40},shared:{y:90}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"High visibility. Drives perceived value for clinical/research users. Backed by React/MobX frontend and Java backend REST API."},{id:"ctx.publicApi",name:"Programmatic Access API",purpose:"Published REST API (OpenAPI spec) that external tools/scripts call for cohort data, mutations, and study metadata.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Contracts are documented and relatively stable. Backwards compatibility pressure comes from downstream consumers.",positions:{flow:{x:80},strategic:{x:75},shared:{y:75}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Acts as an Open Host Service. External research consumers must conform to its language."},{id:"ctx.queryEngine",name:"Cohort / Query & Analysis Engine",purpose:"Query logic for cohorts, clinical/genomic joins, survival analysis, and study-level analytics.",strategicClassification:"core",boundaryIntegrity:"moderate",boundaryNotes:"Domain language from research bleeds into UI and API with few translation boundaries. Performance tuning drives design.",positions:{flow:{x:55},strategic:{x:35},shared:{y:80}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Differentiator. Feeds both the Portal UI and programmatic API. Tight coupling to curated relational schemas."},{id:"ctx.sessionService",name:"Session & Virtual Study Service",purpose:"Stores user-created virtual studies, saved groups, and analysis sessions. Java + MongoDB, only reachable via backend proxy.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Backend mediates access. Frontend cannot talk to Mongo directly.",positions:{flow:{x:60},strategic:{x:50},shared:{y:60}},evolutionStage:"custom-built",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Holds user-specific context like saved cohorts. Access controlled by backend-only proxy. Supports collaboration / revisitability."},{id:"ctx.ingestion",name:"Data Ingestion & Validation Pipeline",purpose:"Validates incoming study data (via validator/metaImport.py) and loads it into cBioPortal's datastore.",strategicClassification:"supporting",boundaryIntegrity:"weak",boundaryNotes:"Import scripts and validation logic live alongside backend code. Operational coupling and tribal knowledge.",positions:{flow:{x:15},strategic:{x:45},shared:{y:40}},evolutionStage:"custom-built",codeSize:{bucket:"medium"},isLegacy:!0,isExternal:!1,notes:"Onboarding new studies bottlenecks here. Mix of Python wrappers + Java import classes. Informal ownership, lots of implicit rules."},{id:"ctx.storageCore",name:"Clinical / Genomic Data Store",purpose:"Authoritative MySQL OLTP database (optionally ClickHouse for OLAP). Source of truth for study data, mutations, clinical attributes.",strategicClassification:"supporting",boundaryIntegrity:"weak",boundaryNotes:"Schema design is shared by ingestion, query engine, and API. Hard to evolve without coordinated changes everywhere.",positions:{flow:{x:30},strategic:{x:55},shared:{y:30}},evolutionStage:"product/rental",codeSize:{bucket:"huge"},isLegacy:!0,isExternal:!1,notes:"High coupling. Acts as a shared kernel between ingestion and query/analysis. Performance tuning via Redis/ClickHouse leaks infra concerns upward."},{id:"ctx.oncokb",name:"OncoKB Knowledge Base",purpose:"External precision oncology knowledge base providing variant interpretation and clinical significance.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"We consume their taxonomy (conformist). We cannot rename or reshape their definitions.",positions:{flow:{x:5},strategic:{x:90},shared:{y:35}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"External upstream. We depend on OncoKB for classification of mutations and treatment implications."},{id:"ctx.genomeNexus",name:"Genome Nexus Annotation Service",purpose:"External high-throughput variant annotation/normalization service.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"Consumed as a utility service for variant annotation; we adopt their model.",positions:{flow:{x:5},strategic:{x:90},shared:{y:25}},evolutionStage:"commodity/utility",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Provides standardized variant annotations and references. We treat it as commodity enrichment."},{id:"ctx.externalConsumers",name:"External Research Consumers",purpose:"Downstream partners and analyst workflows consuming exported cohorts and clinical/genomic insights via the public API.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"They depend on our published API contract. Backwards-compat pressure originates here.",positions:{flow:{x:95},strategic:{x:85},shared:{y:85}},evolutionStage:"product/rental",codeSize:{bucket:"tiny"},isLegacy:!1,isExternal:!0,notes:"Represents hospitals, research partners, downstream analysis pipelines. They integrate via our Open Host Service."}],m1=[{id:"rel.portal_to_query",fromContextId:"ctx.portalExperience",toContextId:"ctx.queryEngine",pattern:"conformist",communicationMode:"internal service API / query endpoints",description:"Portal adopts query engine's domain language and result shapes without an anti-corruption layer."},{id:"rel.portal_to_publicApi",fromContextId:"ctx.portalExperience",toContextId:"ctx.publicApi",pattern:"conformist",communicationMode:"REST API (OpenAPI)",description:"UI and programmatic API share exposed terminology for mutations, studies, cohorts."},{id:"rel.publicApi_to_externalConsumers",fromContextId:"ctx.externalConsumers",toContextId:"ctx.publicApi",pattern:"open-host-service",communicationMode:"Published REST API / documented schema",description:"External research consumers must integrate via the published API contract; we promise stability."},{id:"rel.query_to_storage",fromContextId:"ctx.queryEngine",toContextId:"ctx.storageCore",pattern:"customer-supplier",communicationMode:"SQL / ClickHouse / Redis-assisted query paths",description:"Query/analysis is downstream of curated schema; storage defines what's possible/performance-feasible."},{id:"rel.storage_shared_kernel_ingestion",fromContextId:"ctx.ingestion",toContextId:"ctx.storageCore",pattern:"shared-kernel",communicationMode:"validator + import classes writing MySQL schema",description:"Ingestion pipeline and storage tightly co-own schema evolution; changes require coordination."},{id:"rel.backend_to_session",fromContextId:"ctx.sessionService",toContextId:"ctx.portalExperience",pattern:"customer-supplier",communicationMode:"Session state proxied via backend REST API",description:"Portal relies on persisted virtual studies / saved groups exposed via backend-only access to session service."},{id:"rel.query_to_oncokb",fromContextId:"ctx.queryEngine",toContextId:"ctx.oncokb",pattern:"conformist",communicationMode:"Variant interpretation API",description:"We adopt OncoKB's oncology significance classifications."},{id:"rel.query_to_genomenexus",fromContextId:"ctx.queryEngine",toContextId:"ctx.genomeNexus",pattern:"conformist",communicationMode:"Variant annotation API",description:"We consume Genome Nexus annotations as-is and treat them as authoritative enrichment."}],y1=[{id:"repo.cbioportalMain",name:"cbioportal",remoteUrl:"https://github.com/cBioPortal/cbioportal",contextId:"ctx.portalExperience",teamIds:["team.portalApp"],contributors:[{personId:"person.aliceChen"},{personId:"person.marcusIto"}],analysisSummary:"Primary codebase containing backend REST API, validator, import pipeline, and bundled frontend. High change velocity; boundary between ingestion and runtime logic is blurry."},{id:"repo.sessionService",name:"session-service",remoteUrl:"https://github.com/cBioPortal/session-service",contextId:"ctx.sessionService",teamIds:["team.portalApp"],contributors:[{personId:"person.aliceChen"},{personId:"person.sofiaPatel"}],analysisSummary:"Stores virtual studies / saved cohorts in MongoDB. Only reachable via backend proxy; front end never talks directly to it."},{id:"repo.dataHub",name:"datahub",remoteUrl:"https://github.com/cBioPortal/datahub",contextId:"ctx.ingestion",teamIds:["team.dataPipelines"],contributors:[{personId:"person.sofiaPatel"},{personId:"person.marcusIto"}],analysisSummary:"Validator, metaImport.py, and curated study data loading. Social bottleneck: knowledge concentrated in a few maintainers."}],x1=[{id:"person.aliceChen",displayName:"Alice Chen",emails:["alice.chen@example.org"],teamIds:["team.portalApp"]},{id:"person.marcusIto",displayName:"Marcus Ito",emails:["marcus.ito@example.org"],teamIds:["team.portalApp","team.dataPipelines"]},{id:"person.sofiaPatel",displayName:"Sofia Patel",emails:["sofia.patel@example.org"],teamIds:["team.dataPipelines"]}],g1=[{id:"team.portalApp",name:"Portal Application Team",jiraBoard:"https://jira.example.org/secure/RapidBoard.jspa?rapidView=42",topologyType:"stream-aligned"},{id:"team.dataPipelines",name:"Data Ingestion & Curation Team",jiraBoard:"https://jira.example.org/secure/RapidBoard.jspa?rapidView=7",topologyType:"platform"}],v1=[{id:"group.researchInsights",label:"Research Insights Surface",color:"rgba(255,255,0,0.08)",contextIds:["ctx.portalExperience","ctx.queryEngine","ctx.publicApi","ctx.sessionService"],notes:"All clinician/research-facing capabilities. High perceived value. Drives funding and roadmap pressure."},{id:"group.dataPlatform",label:"Data Platform / Ingestion",color:"rgba(0,128,255,0.08)",contextIds:["ctx.ingestion","ctx.storageCore","ctx.oncokb","ctx.genomeNexus"],notes:"Data onboarding, curation, enrichment. Platform-like capability that other flows rely on."}],w1={flowStages:[{label:"Data Ingestion",position:10},{label:"Curation & Harmonization",position:30},{label:"Cohort Query / Analysis",position:55},{label:"Clinical Insight Delivery",position:80}]},C1=[{id:"actor.clinical-researcher",name:"Clinical Researcher",description:"Oncology researchers exploring patient cohorts, survival data, and mutation patterns for research studies",position:20},{id:"actor.treating-oncologist",name:"Treating Oncologist",description:"Clinicians looking up genomic profiles and treatment options for specific cancer patients",position:45},{id:"actor.bioinformatician",name:"Bioinformatician",description:"Computational biologists using programmatic API access to integrate cBioPortal data into analysis pipelines",position:70}],P1=[{id:"need.explore-cohorts",name:"Explore patient cohorts across studies",description:"Search and filter cancer studies, view mutation frequencies, and identify research cohorts",position:15},{id:"need.analyze-survival",name:"Analyze survival outcomes",description:"Run survival analysis on patient cohorts to identify prognostic factors",position:25},{id:"need.save-research",name:"Save and share research findings",description:"Persist virtual studies and patient groups for collaboration and future analysis",position:35},{id:"need.lookup-patient",name:"Look up patient genomic profile",description:"View specific patient's mutations and genomic alterations for treatment planning",position:40},{id:"need.find-treatments",name:"Find treatment options",description:"Identify actionable mutations and relevant therapies based on genomic profile",position:50},{id:"need.automate-analysis",name:"Automate data analysis",description:"Integrate cBioPortal data into computational pipelines and custom analysis workflows",position:65},{id:"need.export-data",name:"Export cohort data",description:"Retrieve structured clinical and genomic data for downstream analysis",position:75}],S1=[{id:"aconn.researcher-explore",actorId:"actor.clinical-researcher",userNeedId:"need.explore-cohorts"},{id:"aconn.researcher-survival",actorId:"actor.clinical-researcher",userNeedId:"need.analyze-survival"},{id:"aconn.researcher-save",actorId:"actor.clinical-researcher",userNeedId:"need.save-research"},{id:"aconn.oncologist-lookup",actorId:"actor.treating-oncologist",userNeedId:"need.lookup-patient"},{id:"aconn.oncologist-treatments",actorId:"actor.treating-oncologist",userNeedId:"need.find-treatments"},{id:"aconn.bioinformatician-automate",actorId:"actor.bioinformatician",userNeedId:"need.automate-analysis"},{id:"aconn.bioinformatician-export",actorId:"actor.bioinformatician",userNeedId:"need.export-data"}],I1=[{id:"nconn.explore-portal",userNeedId:"need.explore-cohorts",contextId:"ctx.portalExperience"},{id:"nconn.explore-query",userNeedId:"need.explore-cohorts",contextId:"ctx.queryEngine"},{id:"nconn.survival-query",userNeedId:"need.analyze-survival",contextId:"ctx.queryEngine"},{id:"nconn.survival-portal",userNeedId:"need.analyze-survival",contextId:"ctx.portalExperience"},{id:"nconn.save-session",userNeedId:"need.save-research",contextId:"ctx.sessionService"},{id:"nconn.save-portal",userNeedId:"need.save-research",contextId:"ctx.portalExperience"},{id:"nconn.lookup-portal",userNeedId:"need.lookup-patient",contextId:"ctx.portalExperience"},{id:"nconn.lookup-query",userNeedId:"need.lookup-patient",contextId:"ctx.queryEngine"},{id:"nconn.treatments-portal",userNeedId:"need.find-treatments",contextId:"ctx.portalExperience"},{id:"nconn.treatments-query",userNeedId:"need.find-treatments",contextId:"ctx.queryEngine"},{id:"nconn.automate-api",userNeedId:"need.automate-analysis",contextId:"ctx.publicApi"},{id:"nconn.export-api",userNeedId:"need.export-data",contextId:"ctx.publicApi"},{id:"nconn.export-query",userNeedId:"need.export-data",contextId:"ctx.queryEngine"}],_1={id:f1,name:p1,contexts:h1,relationships:m1,repos:y1,people:x1,teams:g1,groups:v1,viewConfig:w1,actors:C1,userNeeds:P1,actorNeedConnections:S1,needContextConnections:I1},b1="empty-project",k1="Empty Project",N1=[],E1=[],T1=[],A1=[],L1=[],j1=[],M1=[],D1=[],O1=[],R1=[],X1={flowStages:[{label:"Explore",position:20},{label:"Establish",position:40},{label:"Expand",position:60},{label:"Extract",position:80}]},B1={enabled:!1,keyframes:[]},z1={id:b1,name:k1,contexts:N1,relationships:E1,repos:T1,people:A1,teams:L1,groups:j1,actors:M1,userNeeds:D1,actorNeedConnections:O1,needContextConnections:R1,viewConfig:X1,temporal:B1},Y1="elan-warranty",F1="Elan Extended Warranty",$1=[{id:"ctx.lead-mgmt",name:"Lead Management",purpose:"Track potential customers approaching manufacturer warranty expiration and execute marketing campaigns to convert leads into extended warranty customers.",strategicClassification:"supporting",boundaryIntegrity:"strong",boundaryNotes:"Well-defined boundary with clear separation from Contract Administration. Owns lead lifecycle and marketing campaign execution.",positions:{flow:{x:15},strategic:{x:45},distillation:{x:50,y:35},shared:{y:25}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Completely separate department and pipeline from POS-originated warranties. Maintains Leads database with manufacturer warranty expiration tracking. Sends pre-expiration marketing mailings."},{id:"ctx.contract-admin",name:"Contract Administration",purpose:"Manage extended warranty contract lifecycle from creation through termination, including validation, covered product management, and customer data.",strategicClassification:"core",boundaryIntegrity:"strong",boundaryNotes:"Heavily protected by multiple ACLs: Product Management translation (Product  Covered Product), Lead conversion (Lead  Customer + Contract), and Client Transaction Processing module with one ACL per retail partner.",positions:{flow:{x:35},strategic:{x:55},distillation:{x:80,y:75},shared:{y:45}},evolutionStage:"custom-built",codeSize:{bucket:"huge"},isLegacy:!1,isExternal:!1,notes:"Core domain with complex validation rules for contract effective/expiration dates and coverage eligibility. Contains Client Transaction Processing module for POS integrations. Domain model: Contract aggregate, Customer entity, Covered Product value object (Brand-Make-Model-SKU only)."},{id:"ctx.product-mgmt",name:"Product Management (BBOM)",purpose:"Manage catalog of products eligible for warranty coverage, including brands, makes, models, and technical specifications.",strategicClassification:"generic",boundaryIntegrity:"weak",boundaryNotes:"Big ball of mud legacy system with tangled dependencies and no clear API contracts. Overly complex product entity structure that requires translation downstream.",positions:{flow:{x:25},strategic:{x:25},distillation:{x:15,y:60},shared:{y:75}},evolutionStage:"custom-built",codeSize:{bucket:"huge"},isLegacy:!0,isExternal:!1,notes:"BBOM = Big Ball of Mud. Legacy system upstream of Contract Administration. Product entity is complex with full technical specs, but downstream contexts only need Brand-Make-Model-SKU. Candidate for modernization or replacement with commercial product catalog solution."},{id:"ctx.claims-mgmt",name:"Claims Management",purpose:"Handle warranty claim lifecycle, track repair attempts, calculate limit of liability, authorize reimbursements, and determine optimal fulfillment approach.",strategicClassification:"core",boundaryIntegrity:"strong",boundaryNotes:"Complex claim state machine (open  closed  reopened) with sophisticated business rules for limit of liability calculation. Shared kernel with Service Dispatch for repair cost tracking. Publishes OHS API for CRM integration.",positions:{flow:{x:55},strategic:{x:65},distillation:{x:85,y:80},shared:{y:20}},evolutionStage:"custom-built",codeSize:{bucket:"large"},isLegacy:!1,isExternal:!1,notes:"Only customer-facing context (via CSR role). This is where business risk and money is won or lost. Complex state transitions and authorization rules. Tight collaboration with Service Dispatch on repair orchestration and cost tracking. Multiple repair attempts per claim allowed."},{id:"ctx.service-dispatch",name:"Service Dispatch",purpose:"Coordinate repair work orders, manage purchase orders to servicer network, track repair costs and parts, and match technician expertise to repair needs.",strategicClassification:"supporting",boundaryIntegrity:"moderate",boundaryNotes:"Shares domain concepts with Claims Management (shared kernel) including repair cost tracking. Protected from Servicer Management System API changes via ACL.",positions:{flow:{x:70},strategic:{x:60},distillation:{x:55,y:40},shared:{y:50}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Orchestrates repair fulfillment. Creates repair POs sent to Servicer Management System. Tracks technician assignments and specialization matching (e.g., dishwasher brand experts). Multiple POs can exist per claim for repeated repair attempts."},{id:"ctx.finance",name:"Finance & Reimbursement",purpose:"Process reimbursement payments and issue store credits for market replacement value when repairs exceed limit of liability.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"Standard accounting system with clear separation from Claims domain. Receives reimbursement authorizations via ACL from Claims Management.",positions:{flow:{x:75},strategic:{x:75},distillation:{x:20,y:25},shared:{y:80}},evolutionStage:"commodity/utility",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"Generic back-office function. No competitive differentiation. Standard payment processing and store credit issuance. Could be replaced with commercial accounting package."},{id:"ctx.reporting",name:"Reporting",purpose:"Provide business intelligence, analytics dashboards, and operational reports for managers, analysts, and CSRs.",strategicClassification:"supporting",boundaryIntegrity:"weak",boundaryNotes:"Conformist with all upstream domains (Contract Admin, Claims, Service Dispatch). Accepts their domain models without translation for read-only analytics.",positions:{flow:{x:90},strategic:{x:50},distillation:{x:45,y:30},shared:{y:30}},evolutionStage:"product/rental",codeSize:{bucket:"medium"},isLegacy:!1,isExternal:!1,notes:"User-facing for internal users (managers, analysts, CSRs). Generates dashboards showing claim patterns, repair costs, contract performance, limit of liability trends. Conformist pattern keeps development cost low but creates coupling to upstream model changes."},{id:"ctx.retail-pos",name:"Retail POS Systems",purpose:"Point of sale systems at retail partners (Best Buy, Home Depot, etc.) where customers purchase extended warranties at time of product purchase.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External systems sending proprietary transaction formats. Each retailer has different format requiring separate ACL in Contract Administration's Client Transaction Processing module.",positions:{flow:{x:10},strategic:{x:40},distillation:{x:25,y:35},shared:{y:20}},evolutionStage:"product/rental",codeSize:{bucket:"small"},isLegacy:!1,isExternal:!0,notes:"Multiple 3rd party integrations (one per retail partner). Sends warranty info including customer details, covered product details, purchase date. These are existing customers (already purchased), not leads. Separate acquisition channel from Lead Management."},{id:"ctx.crm",name:"CRM System",purpose:"Track customer contact history, interactions, and communication logs used by CSRs during claim processing.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External 3rd party system consuming Claims Management's published OHS API. Claims is upstream authority defining the integration contract.",positions:{flow:{x:65},strategic:{x:70},distillation:{x:30,y:45},shared:{y:25}},evolutionStage:"product/rental",codeSize:{bucket:"small"},isLegacy:!1,isExternal:!0,notes:"Used by CSRs to log customer interactions. Consumes customer and product information from Claims Management via OHS API. Claims Management publishes stable integration API that CRM conforms to."},{id:"ctx.servicer-system",name:"Servicer Management System",purpose:"Third-party network coordinating repair technician dispatch, scheduling, and field service execution.",strategicClassification:"generic",boundaryIntegrity:"strong",boundaryNotes:"External system with public API. Service Dispatch integrates via ACL to protect internal domain from external API changes.",positions:{flow:{x:80},strategic:{x:65},distillation:{x:30,y:45},shared:{y:55}},evolutionStage:"product/rental",codeSize:{bucket:"small"},isLegacy:!1,isExternal:!0,notes:"Receives repair POs from Service Dispatch. Coordinates technician assignments and scheduling. Returns parts/labor cost data. Service Dispatch uses ACL to translate internal repair PO model to external servicer API format."}],U1=[{id:"rel.product-contract",fromContextId:"ctx.contract-admin",toContextId:"ctx.product-mgmt",pattern:"anti-corruption-layer",communicationMode:"REST API with internal translation layer",description:"Contract Admin uses ACL to translate Product entity (complex, detailed) into Covered Product value object (Brand-Make-Model-SKU only). Protects core Contract domain from BBOM complexity."},{id:"rel.pos-contract",fromContextId:"ctx.contract-admin",toContextId:"ctx.retail-pos",pattern:"anti-corruption-layer",communicationMode:"Client Transaction Processing module with multiple ACLs (one per retailer)",description:"Each retail partner sends proprietary transaction format. Contract Admin's Client Transaction Processing module validates and translates to internal Contract domain model. Multiple ACLs protect from external format volatility."},{id:"rel.lead-contract",fromContextId:"ctx.contract-admin",toContextId:"ctx.lead-mgmt",pattern:"anti-corruption-layer",communicationMode:"Internal API with translation layer",description:"Contract Admin uses ACL to translate lead prospect data into Contract domain model (Customer entity + Contract aggregate). Different data structures and business rules for lead conversion vs POS purchases."},{id:"rel.contract-claims",fromContextId:"ctx.contract-admin",toContextId:"ctx.claims-mgmt",pattern:"partnership",communicationMode:"Shared database access and domain events",description:"Tight collaboration between core contexts. Claims validate against contract terms, effective dates, coverage rules. High coordination on domain model changes. Shared responsibility for contract fulfillment lifecycle."},{id:"rel.claims-dispatch",fromContextId:"ctx.claims-mgmt",toContextId:"ctx.service-dispatch",pattern:"shared-kernel",communicationMode:"Shared domain model and database",description:"Shared domain concepts including repair cost tracking and limit of liability calculation. High coordination cost - teams must synchronize on shared model changes. Close collaboration needed for repair orchestration."},{id:"rel.claims-finance",fromContextId:"ctx.claims-mgmt",toContextId:"ctx.finance",pattern:"anti-corruption-layer",communicationMode:"Message queue with translation layer",description:"Claims uses ACL to translate reimbursement authorizations into Finance-specific payment format. Protects core Claims domain from Finance API changes. Finance owns the integration schema and Claims must adapt via ACL."},{id:"rel.claims-crm",fromContextId:"ctx.crm",toContextId:"ctx.claims-mgmt",pattern:"open-host-service",communicationMode:"Published REST API defined by Claims Management",description:"Claims Management publishes well-defined integration API for customer and product information. CRM consumes this OHS API. Claims is upstream authority defining the contract. Stable integration point for external consumers."},{id:"rel.dispatch-servicer",fromContextId:"ctx.service-dispatch",toContextId:"ctx.servicer-system",pattern:"anti-corruption-layer",communicationMode:"REST API with internal translation layer",description:"Service Dispatch uses ACL to translate internal repair PO model to external servicer API format. Protects internal repair coordination domain from 3rd party API changes and service network volatility."},{id:"rel.contract-reporting",fromContextId:"ctx.reporting",toContextId:"ctx.contract-admin",pattern:"conformist",communicationMode:"Read-only database views and ETL",description:"Reporting conforms to Contract Administration's domain model without translation. Accepts contract data structure as-is for analytics. Lower development cost but higher coupling to upstream changes."},{id:"rel.claims-reporting",fromContextId:"ctx.reporting",toContextId:"ctx.claims-mgmt",pattern:"conformist",communicationMode:"Read-only database views and ETL",description:"Reporting conforms to Claims Management's domain model without translation. Accepts claim state, repair attempt, and cost data as-is for dashboards and analytics."},{id:"rel.dispatch-reporting",fromContextId:"ctx.reporting",toContextId:"ctx.service-dispatch",pattern:"conformist",communicationMode:"Read-only database views and ETL",description:"Reporting conforms to Service Dispatch's repair PO and technician assignment model. Accepts repair cost and parts data as-is for operational reports and analytics."}],H1=[],W1=[],V1=[],G1=[],Z1=[],q1=[],K1=[],Q1=[],J1={flowStages:[{label:"Acquisition",position:15},{label:"Contract Admin",position:35},{label:"Claims Benefit Management",position:55},{label:"Fulfillment",position:75},{label:"Analysis",position:90}]},ew={enabled:!1,keyframes:[]},tw={id:Y1,name:F1,contexts:$1,relationships:U1,repos:H1,people:W1,teams:V1,groups:G1,actors:Z1,userNeeds:q1,actorNeedConnections:K1,needContextConnections:Q1,viewConfig:J1,temporal:ew},nw="contextflow",rw=1,Io="projects";let us=null;function h0(){return us||(us=new Promise((e,t)=>{const n=indexedDB.open(nw,rw);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const o=r.target.result;o.objectStoreNames.contains(Io)||o.createObjectStore(Io,{keyPath:"id"})}}),us)}async function m0(e){const t=await h0();return new Promise((n,r)=>{const a=t.transaction(Io,"readwrite").objectStore(Io).put(e);a.onsuccess=()=>n(),a.onerror=()=>r(a.error)})}async function ow(e){const t=await h0();return new Promise((n,r)=>{const a=t.transaction(Io,"readonly").objectStore(Io).get(e);a.onsuccess=()=>n(a.result||null),a.onerror=()=>r(a.error)})}const pd={ui:{groupOpacity:.1},integrations:{codecohesion:{apiBaseUrl:"https://codecohesion-api-production.up.railway.app/api",contributors:{limit:5,days:90}}}};function Gf(e,t){return e<33?"generic":e>=67&&t>=50?"core":"supporting"}function ai(e){return e<25?"genesis":e<50?"custom-built":e<75?"product/rental":"commodity/utility"}function Se(e,t){m0(t).catch(n=>{console.error("Failed to autosave project:",n)})}let Kc=null;function iw(e){Kc=e}const Lr=[d1,_1,z1,tw],[Ms,Zf]=Lr;Lr.forEach(e=>{e.actors||(e.actors=[]),e.userNeeds||(e.userNeeds=[]),e.actorNeedConnections||(e.actorNeedConnections=[]),e.needContextConnections||(e.needContextConnections=[])});Lr.forEach(e=>{e.contexts=e.contexts.map(t=>{const n=!t.positions.distillation,r=!t.evolutionStage;return n||r?{...t,positions:{...t.positions,distillation:t.positions.distillation||{x:50,y:50}},strategicClassification:t.strategicClassification||"supporting",evolutionStage:t.evolutionStage||ai(t.positions.strategic.x)}:t})});Lr.forEach(e=>{m0(e).catch(t=>{console.error(`Failed to save ${e.name}:`,t)})});const sw=localStorage.getItem("contextflow.activeProjectId"),lw=sw||Ms.id,aw=Lr.reduce((e,t)=>(e[t.id]=t,e),{}),q=Kv(e=>({activeProjectId:lw,projects:aw,activeViewMode:"flow",selectedContextId:null,selectedRelationshipId:null,selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null,selectedContextIds:[],canvasView:{flow:{zoom:1,panX:0,panY:0},strategic:{zoom:1,panX:0,panY:0},distillation:{zoom:1,panX:0,panY:0}},showGroups:(()=>{const t=localStorage.getItem("contextflow.showGroups");return t!==null?t==="true":!0})(),showRelationships:(()=>{const t=localStorage.getItem("contextflow.showRelationships");return t!==null?t==="true":!0})(),groupOpacity:(()=>{const t=localStorage.getItem("contextflow.groupOpacity");return t!==null?parseFloat(t):pd.ui.groupOpacity})(),temporal:{currentDate:new Date().getFullYear().toString(),activeKeyframeId:null},undoStack:[],redoStack:[],updateContext:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.contexts.findIndex(p=>p.id===t);if(a===-1)return r;const u=[...s.contexts];u[a]={...u[a],...n};const d={...s,contexts:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),updateContextPosition:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.contexts.findIndex(N=>N.id===t);if(a===-1)return r;const d=s.contexts[a].positions,p=Gf(n.distillation.x,n.distillation.y),h=ai(n.strategic.x),g=[...s.contexts];g[a]={...g[a],positions:n,strategicClassification:p,evolutionStage:h};const w={...s,contexts:g},P={type:"moveContext",payload:{contextId:t,oldPositions:d,newPositions:n}};return Se(o,w),{projects:{...r.projects,[o]:w},undoStack:[...r.undoStack,P],redoStack:[]}}),updateMultipleContextPositions:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s={},a=o.contexts.map(p=>{const h=t[p.id];if(h){s[p.id]={old:p.positions,new:h};const g=Gf(h.distillation.x,h.distillation.y),w=ai(h.strategic.x);return{...p,positions:h,strategicClassification:g,evolutionStage:w}}return p}),u={...o,contexts:a},d={type:"moveContextGroup",payload:{positionsMap:s}};return Se(r,u),{projects:{...n.projects,[r]:u},undoStack:[...n.undoStack,d],redoStack:[]}}),setSelectedContext:t=>e({selectedContextId:t,selectedContextIds:[],selectedGroupId:null,selectedRelationshipId:null}),toggleContextSelection:t=>e(n=>({selectedContextId:null,selectedGroupId:null,selectedRelationshipId:null,selectedContextIds:n.selectedContextIds.includes(t)?n.selectedContextIds.filter(o=>o!==t):[...n.selectedContextIds,t]})),clearContextSelection:()=>e({selectedContextIds:[],selectedContextId:null,selectedGroupId:null,selectedRelationshipId:null}),setViewMode:t=>e({activeViewMode:t}),setActiveProject:t=>e(n=>n.projects[t]?(localStorage.setItem("contextflow.activeProjectId",t),{activeProjectId:t,selectedContextId:null,selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null,selectedContextIds:[],undoStack:[],redoStack:[]}):n),addContext:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s={id:`context-${Date.now()}`,name:t,positions:{flow:{x:50},strategic:{x:50},distillation:{x:50,y:50},shared:{y:50}},strategicClassification:"supporting"},a={type:"addContext",payload:{context:s}},u={...o,contexts:[...o.contexts,s]};return Se(r,u),{projects:{...n.projects,[r]:u},selectedContextId:s.id,undoStack:[...n.undoStack,a],redoStack:[]}}),deleteContext:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=o.contexts.find(p=>p.id===t);if(!s)return n;const a={type:"deleteContext",payload:{context:s}};let u=o.temporal;if(o.temporal){const p=o.temporal.keyframes.map(h=>({...h,activeContextIds:h.activeContextIds.filter(g=>g!==t),positions:Object.fromEntries(Object.entries(h.positions).filter(([g])=>g!==t))}));u={...o.temporal,keyframes:p}}const d={...o,contexts:o.contexts.filter(p=>p.id!==t),temporal:u};return Se(r,d),{projects:{...n.projects,[r]:d},selectedContextId:n.selectedContextId===t?null:n.selectedContextId,undoStack:[...n.undoStack,a],redoStack:[]}}),assignRepoToContext:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.repos.findIndex(w=>w.id===t);if(a===-1)return r;const u=s.repos[a],d=u.contextId,p={type:"assignRepo",payload:{repoId:t,oldContextId:d,newContextId:n}},h=[...s.repos];h[a]={...u,contextId:n};const g={...s,repos:h};return Se(o,g),{projects:{...r.projects,[o]:g},undoStack:[...r.undoStack,p],redoStack:[]}}),unassignRepo:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=o.repos.findIndex(g=>g.id===t);if(s===-1)return n;const a=o.repos[s],u=a.contextId,d={type:"unassignRepo",payload:{repoId:t,oldContextId:u}},p=[...o.repos];p[s]={...a,contextId:void 0};const h={...o,repos:p};return Se(r,h),{projects:{...n.projects,[r]:h},undoStack:[...n.undoStack,d],redoStack:[]}}),createGroup:(t,n,r)=>e(o=>{const s=o.activeProjectId;if(!s)return o;const a=o.projects[s];if(!a)return o;const u={id:`group-${Date.now()}`,label:t,color:n||"#3b82f6",contextIds:o.selectedContextIds,notes:r},d={type:"addGroup",payload:{group:u}},p={...a,groups:[...a.groups,u]};return Se(s,p),{projects:{...o.projects,[s]:p},selectedGroupId:u.id,selectedContextIds:[],undoStack:[...o.undoStack,d],redoStack:[]}}),updateGroup:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.groups.findIndex(h=>h.id===t);if(a===-1)return r;const u={...s.groups[a],...n},d=[...s.groups];d[a]=u;const p={...s,groups:d};return Se(o,p),{projects:{...r.projects,[o]:p}}}),deleteGroup:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=o.groups.find(d=>d.id===t);if(!s)return n;const a={type:"deleteGroup",payload:{group:s}},u={...o,groups:o.groups.filter(d=>d.id!==t)};return Se(r,u),{projects:{...n.projects,[r]:u},selectedGroupId:n.selectedGroupId===t?null:n.selectedGroupId,undoStack:[...n.undoStack,a],redoStack:[]}}),removeContextFromGroup:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.groups.find(h=>h.id===t);if(!a||!a.contextIds.includes(n))return r;const u={type:"removeFromGroup",payload:{groupId:t,contextId:n}},d={...a,contextIds:a.contextIds.filter(h=>h!==n)},p={...s,groups:s.groups.map(h=>h.id===t?d:h)};return Se(o,p),{projects:{...r.projects,[o]:p},undoStack:[...r.undoStack,u],redoStack:[]}}),addContextToGroup:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.groups.find(h=>h.id===t);if(!a||a.contextIds.includes(n))return r;const u={type:"addToGroup",payload:{groupId:t,contextId:n}},d={...a,contextIds:[...a.contextIds,n]},p={...s,groups:s.groups.map(h=>h.id===t?d:h)};return Se(o,p),{projects:{...r.projects,[o]:p},undoStack:[...r.undoStack,u],redoStack:[]}}),addContextsToGroup:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.groups.find(g=>g.id===t);if(!a)return r;const u=n.filter(g=>!a.contextIds.includes(g));if(u.length===0)return r;const d={type:"addToGroup",payload:{groupId:t,contextIds:u}},p={...a,contextIds:[...a.contextIds,...u]},h={...s,groups:s.groups.map(g=>g.id===t?p:g)};return Se(o,h),{projects:{...r.projects,[o]:h},undoStack:[...r.undoStack,d],redoStack:[]}}),addRelationship:(t,n,r,o)=>e(s=>{const a=s.activeProjectId;if(!a)return s;const u=s.projects[a];if(!u)return s;const d={id:`rel-${Date.now()}`,fromContextId:t,toContextId:n,pattern:r,description:o},p={type:"addRelationship",payload:{relationship:d}},h={...u,relationships:[...u.relationships,d]};return Se(a,h),{projects:{...s.projects,[a]:h},undoStack:[...s.undoStack,p],redoStack:[]}}),deleteRelationship:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=o.relationships.find(d=>d.id===t);if(!s)return n;const a={type:"deleteRelationship",payload:{relationship:s}},u={...o,relationships:o.relationships.filter(d=>d.id!==t)};return Se(r,u),{projects:{...n.projects,[r]:u},undoStack:[...n.undoStack,a],redoStack:[]}}),updateRelationship:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.relationships.findIndex(w=>w.id===t);if(a===-1)return r;const u=s.relationships[a],d={...u,...n},p=[...s.relationships];p[a]=d;const h={...s,relationships:p};if(n.pattern!==void 0&&n.pattern!==u.pattern){const w={type:"updateRelationship",payload:{relationshipId:t,oldRelationship:u,newRelationship:d}};return Se(o,h),{projects:{...r.projects,[o]:h},undoStack:[...r.undoStack,w],redoStack:[]}}else return Se(o,h),{projects:{...r.projects,[o]:h}}}),setSelectedRelationship:t=>e({selectedRelationshipId:t,selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null}),addActor:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s={id:`actor-${Date.now()}`,name:t,position:50},a={type:"addActor",payload:{actor:s}},u={...o,actors:[...o.actors||[],s]};return Se(r,u),{projects:{...n.projects,[r]:u},selectedActorId:s.id,undoStack:[...n.undoStack,a],redoStack:[]}}),deleteActor:t=>e(n=>{var p;const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=(p=o.actors)==null?void 0:p.find(h=>h.id===t);if(!s)return n;const a={type:"deleteActor",payload:{actor:s}},u=(o.actorConnections||[]).filter(h=>h.actorId!==t),d={...o,actors:o.actors.filter(h=>h.id!==t),actorConnections:u};return Se(r,d),{projects:{...n.projects,[r]:d},selectedActorId:n.selectedActorId===t?null:n.selectedActorId,undoStack:[...n.undoStack,a],redoStack:[]}}),updateActor:(t,n)=>e(r=>{var p;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((p=s.actors)==null?void 0:p.findIndex(h=>h.id===t))??-1;if(a===-1)return r;const u=[...s.actors||[]];u[a]={...u[a],...n};const d={...s,actors:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),updateActorPosition:(t,n)=>e(r=>{var w;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((w=s.actors)==null?void 0:w.findIndex(P=>P.id===t))??-1;if(a===-1)return r;const d=s.actors[a].position,p=[...s.actors||[]];p[a]={...p[a],position:n};const h={...s,actors:p},g={type:"moveActor",payload:{actorId:t,oldPosition:d,newPosition:n}};return Se(o,h),{projects:{...r.projects,[o]:h},undoStack:[...r.undoStack,g],redoStack:[]}}),setSelectedActor:t=>e({selectedActorId:t,selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedRelationshipId:null,selectedUserNeedId:null}),createActorConnection:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a={id:`actor-conn-${Date.now()}`,actorId:t,contextId:n},u={type:"addActorConnection",payload:{actorConnection:a}},d={...s,actorConnections:[...s.actorConnections||[],a]};return Se(o,d),{projects:{...r.projects,[o]:d},undoStack:[...r.undoStack,u],redoStack:[]}}),deleteActorConnection:t=>e(n=>{var d;const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=(d=o.actorConnections)==null?void 0:d.find(p=>p.id===t);if(!s)return n;const a={type:"deleteActorConnection",payload:{actorConnection:s}},u={...o,actorConnections:(o.actorConnections||[]).filter(p=>p.id!==t)};return Se(r,u),{projects:{...n.projects,[r]:u},selectedActorConnectionId:n.selectedActorConnectionId===t?null:n.selectedActorConnectionId,undoStack:[...n.undoStack,a],redoStack:[]}}),updateActorConnection:(t,n)=>e(r=>{var p;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((p=s.actorConnections)==null?void 0:p.findIndex(h=>h.id===t))??-1;if(a===-1)return r;const u=[...s.actorConnections||[]];u[a]={...u[a],...n};const d={...s,actorConnections:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),addUserNeed:t=>{const n=q.getState(),r=n.activeProjectId;if(!r)return null;const o=n.projects[r];if(!o)return null;const s={id:`need-${Date.now()}`,name:t,position:50,visibility:!0},a={...o,userNeeds:[...o.userNeeds||[],s]};return Se(r,a),q.setState({projects:{...n.projects,[r]:a},selectedUserNeedId:s.id}),s.id},deleteUserNeed:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s={...o,userNeeds:(o.userNeeds||[]).filter(a=>a.id!==t),actorNeedConnections:(o.actorNeedConnections||[]).filter(a=>a.userNeedId!==t),needContextConnections:(o.needContextConnections||[]).filter(a=>a.userNeedId!==t)};return Se(r,s),{projects:{...n.projects,[r]:s},selectedUserNeedId:n.selectedUserNeedId===t?null:n.selectedUserNeedId}}),updateUserNeed:(t,n)=>e(r=>{var p;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((p=s.userNeeds)==null?void 0:p.findIndex(h=>h.id===t))??-1;if(a===-1)return r;const u=[...s.userNeeds||[]];u[a]={...u[a],...n};const d={...s,userNeeds:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),updateUserNeedPosition:(t,n)=>e(r=>{var g;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((g=s.userNeeds)==null?void 0:g.findIndex(w=>w.id===t))??-1;if(a===-1)return r;const u=[...s.userNeeds||[]],d=u[a].position;u[a]={...u[a],position:n};const p={...s,userNeeds:u},h={type:"moveUserNeed",payload:{userNeedId:t,oldPosition:d,newPosition:n}};return Se(o,p),{projects:{...r.projects,[o]:p},undoStack:[...r.undoStack,h],redoStack:[]}}),setSelectedUserNeed:t=>e({selectedUserNeedId:t,selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedRelationshipId:null,selectedActorId:null}),createActorNeedConnection:(t,n)=>{const r=q.getState(),o=r.activeProjectId;if(!o)return null;const s=r.projects[o];if(!s)return null;const a={id:`actor-need-conn-${Date.now()}`,actorId:t,userNeedId:n},u={type:"addActorNeedConnection",payload:{actorNeedConnection:a}},d={...s,actorNeedConnections:[...s.actorNeedConnections||[],a]};return Se(o,d),q.setState({projects:{...r.projects,[o]:d},undoStack:[...r.undoStack,u],redoStack:[]}),a.id},deleteActorNeedConnection:t=>e(n=>{var d;const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=(d=o.actorNeedConnections)==null?void 0:d.find(p=>p.id===t);if(!s)return n;const a={type:"deleteActorNeedConnection",payload:{actorNeedConnection:s}},u={...o,actorNeedConnections:(o.actorNeedConnections||[]).filter(p=>p.id!==t)};return Se(r,u),{projects:{...n.projects,[r]:u},undoStack:[...n.undoStack,a],redoStack:[]}}),updateActorNeedConnection:(t,n)=>e(r=>{var p;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((p=s.actorNeedConnections)==null?void 0:p.findIndex(h=>h.id===t))??-1;if(a===-1)return r;const u=[...s.actorNeedConnections||[]];u[a]={...u[a],...n};const d={...s,actorNeedConnections:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),createNeedContextConnection:(t,n)=>{const r=q.getState(),o=r.activeProjectId;if(!o)return null;const s=r.projects[o];if(!s)return null;const a={id:`need-context-conn-${Date.now()}`,userNeedId:t,contextId:n},u={type:"addNeedContextConnection",payload:{needContextConnection:a}},d={...s,needContextConnections:[...s.needContextConnections||[],a]};return Se(o,d),q.setState({projects:{...r.projects,[o]:d},undoStack:[...r.undoStack,u],redoStack:[]}),a.id},deleteNeedContextConnection:t=>e(n=>{var d;const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=(d=o.needContextConnections)==null?void 0:d.find(p=>p.id===t);if(!s)return n;const a={type:"deleteNeedContextConnection",payload:{needContextConnection:s}},u={...o,needContextConnections:(o.needContextConnections||[]).filter(p=>p.id!==t)};return Se(r,u),{projects:{...n.projects,[r]:u},undoStack:[...n.undoStack,a],redoStack:[]}}),updateNeedContextConnection:(t,n)=>e(r=>{var p;const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=((p=s.needContextConnections)==null?void 0:p.findIndex(h=>h.id===t))??-1;if(a===-1)return r;const u=[...s.needContextConnections||[]];u[a]={...u[a],...n};const d={...s,needContextConnections:u};return Se(o,d),{projects:{...r.projects,[o]:d}}}),toggleShowGroups:()=>e(t=>{const n=!t.showGroups;return localStorage.setItem("contextflow.showGroups",String(n)),{showGroups:n}}),toggleShowRelationships:()=>e(t=>{const n=!t.showRelationships;return localStorage.setItem("contextflow.showRelationships",String(n)),{showRelationships:n}}),setGroupOpacity:t=>{localStorage.setItem("contextflow.groupOpacity",String(t)),e({groupOpacity:t})},updateFlowStage:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.viewConfig.flowStages;if(t<0||t>=a.length)return r;const u=a[t],d=n.label!==void 0?n.label:u.label,p=n.position!==void 0?n.position:u.position;if(d!==u.label&&a.some((S,T)=>T!==t&&S.label===d))throw new Error("Stage label must be unique");if(p!==u.position&&a.some((S,T)=>T!==t&&S.position===p))throw new Error("Stage position must be unique");const h={label:d,position:p},g=[...a];g[t]=h;const w={...s,viewConfig:{...s.viewConfig,flowStages:g}},P={type:"updateFlowStage",payload:{flowStageIndex:t,oldFlowStage:u,newFlowStage:h}};return Se(o,w),{projects:{...r.projects,[o]:w},undoStack:[...r.undoStack,P],redoStack:[]}}),addFlowStage:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s)return r;const a=s.viewConfig.flowStages;if(a.some(P=>P.label===t))throw new Error("Stage label must be unique");if(a.some(P=>P.position===n))throw new Error("Stage position must be unique");const p={label:t,position:n},h=[...a,p],g={...s,viewConfig:{...s.viewConfig,flowStages:h}},w={type:"addFlowStage",payload:{flowStage:p}};return Se(o,g),{projects:{...r.projects,[o]:g},undoStack:[...r.undoStack,w],redoStack:[]}}),deleteFlowStage:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o)return n;const s=o.viewConfig.flowStages;if(t<0||t>=s.length)return n;const a=s[t],u=s.filter((h,g)=>g!==t),d={...o,viewConfig:{...o.viewConfig,flowStages:u}},p={type:"deleteFlowStage",payload:{flowStageIndex:t,flowStage:a}};return Se(r,d),{projects:{...n.projects,[r]:d},undoStack:[...n.undoStack,p],redoStack:[]}}),undo:()=>e(t=>{if(t.undoStack.length===0)return t;const n=t.activeProjectId;if(!n)return t;const r=t.projects[n];if(!r)return t;const o=t.undoStack[t.undoStack.length-1],s=t.undoStack.slice(0,-1);let a=r.contexts,u=r.repos,d=r.groups,p=r.relationships,h=r.actors||[],g=r.userNeeds||[],w=r.actorNeedConnections||[],P=r.needContextConnections||[];if(o.type==="moveContext"&&o.payload.contextId&&o.payload.oldPositions){const y=a.findIndex(v=>v.id===o.payload.contextId);y!==-1&&(a=[...a],a[y]={...a[y],positions:o.payload.oldPositions})}else if(o.type==="moveContextGroup"&&o.payload.positionsMap)a=a.map(y=>{var I;const v=(I=o.payload.positionsMap)==null?void 0:I[y.id];return v?{...y,positions:v.old}:y});else if(o.type==="addContext"&&o.payload.context)a=a.filter(y=>{var v;return y.id!==((v=o.payload.context)==null?void 0:v.id)});else if(o.type==="deleteContext"&&o.payload.context)a=[...a,o.payload.context];else if(o.type==="assignRepo"&&o.payload.repoId){const y=u.findIndex(v=>v.id===o.payload.repoId);y!==-1&&(u=[...u],u[y]={...u[y],contextId:o.payload.oldContextId})}else if(o.type==="unassignRepo"&&o.payload.repoId){const y=u.findIndex(v=>v.id===o.payload.repoId);y!==-1&&(u=[...u],u[y]={...u[y],contextId:o.payload.oldContextId})}else if(o.type==="addGroup"&&o.payload.group)d=d.filter(y=>{var v;return y.id!==((v=o.payload.group)==null?void 0:v.id)});else if(o.type==="deleteGroup"&&o.payload.group)d=[...d,o.payload.group];else if(o.type==="removeFromGroup"&&o.payload.groupId&&o.payload.contextId){const y=d.findIndex(v=>v.id===o.payload.groupId);y!==-1&&(d=[...d],d[y]={...d[y],contextIds:[...d[y].contextIds,o.payload.contextId]})}else if(o.type==="addToGroup"&&o.payload.groupId){const y=d.findIndex(v=>v.id===o.payload.groupId);if(y!==-1){d=[...d];const v=o.payload.contextIds||[o.payload.contextId];d[y]={...d[y],contextIds:d[y].contextIds.filter(I=>!v.includes(I))}}}else if(o.type==="addRelationship"&&o.payload.relationship)p=p.filter(y=>{var v;return y.id!==((v=o.payload.relationship)==null?void 0:v.id)});else if(o.type==="deleteRelationship"&&o.payload.relationship)p=[...p,o.payload.relationship];else if(o.type==="updateRelationship"&&o.payload.relationshipId&&o.payload.oldRelationship){const y=p.findIndex(v=>v.id===o.payload.relationshipId);y!==-1&&(p=[...p],p[y]=o.payload.oldRelationship)}else if(o.type==="addActor"&&o.payload.actor)h=h.filter(y=>{var v;return y.id!==((v=o.payload.actor)==null?void 0:v.id)});else if(o.type==="deleteActor"&&o.payload.actor)h=[...h,o.payload.actor];else if(o.type==="moveActor"&&o.payload.actorId&&o.payload.oldPosition!==void 0){const y=h.findIndex(v=>v.id===o.payload.actorId);y!==-1&&(h=[...h],h[y]={...h[y],position:o.payload.oldPosition})}else if(o.type==="addActorConnection"&&o.payload.actorConnection)newActorConnections=newActorConnections.filter(y=>{var v;return y.id!==((v=o.payload.actorConnection)==null?void 0:v.id)});else if(o.type==="deleteActorConnection"&&o.payload.actorConnection)newActorConnections=[...newActorConnections,o.payload.actorConnection];else if(o.type==="addUserNeed"&&o.payload.userNeed)g=g.filter(y=>{var v;return y.id!==((v=o.payload.userNeed)==null?void 0:v.id)});else if(o.type==="deleteUserNeed"&&o.payload.userNeed)g=[...g,o.payload.userNeed];else if(o.type==="moveUserNeed"&&o.payload.userNeedId&&o.payload.oldPosition!==void 0){const y=g.findIndex(v=>v.id===o.payload.userNeedId);y!==-1&&(g=[...g],g[y]={...g[y],position:o.payload.oldPosition})}else o.type==="addActorNeedConnection"&&o.payload.actorNeedConnection?w=w.filter(y=>{var v;return y.id!==((v=o.payload.actorNeedConnection)==null?void 0:v.id)}):o.type==="deleteActorNeedConnection"&&o.payload.actorNeedConnection?w=[...w,o.payload.actorNeedConnection]:o.type==="addNeedContextConnection"&&o.payload.needContextConnection?P=P.filter(y=>{var v;return y.id!==((v=o.payload.needContextConnection)==null?void 0:v.id)}):o.type==="deleteNeedContextConnection"&&o.payload.needContextConnection&&(P=[...P,o.payload.needContextConnection]);let N=r.viewConfig.flowStages;o.type==="updateFlowStage"&&o.payload.flowStageIndex!==void 0&&o.payload.oldFlowStage?(N=[...N],N[o.payload.flowStageIndex]=o.payload.oldFlowStage):o.type==="addFlowStage"&&o.payload.flowStage?N=N.filter(y=>{var v,I;return y.label!==((v=o.payload.flowStage)==null?void 0:v.label)&&y.position!==((I=o.payload.flowStage)==null?void 0:I.position)}):o.type==="deleteFlowStage"&&o.payload.flowStageIndex!==void 0&&o.payload.flowStage&&(N=[...N],N.splice(o.payload.flowStageIndex,0,o.payload.flowStage));let S=r.temporal;if(o.type==="createKeyframe"){const y=o.payload.keyframes||(o.payload.keyframe?[o.payload.keyframe]:[]),v=new Set(y.map(I=>I.id));S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).filter(I=>!v.has(I.id))}}else if(o.type==="deleteKeyframe"&&o.payload.keyframe){const y=[...(S==null?void 0:S.keyframes)||[],o.payload.keyframe].sort((v,I)=>v.date.localeCompare(I.date));S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:y}}else if(o.type==="updateKeyframe"&&o.payload.keyframeId&&o.payload.oldKeyframeData)S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).map(y=>y.id===o.payload.keyframeId?{...y,...o.payload.oldKeyframeData}:y)};else if(o.type==="moveContextInKeyframe"&&o.payload.keyframeId&&o.payload.contextId&&o.payload.oldPositions){const y=o.payload.oldPositions.strategic.x,v=o.payload.oldPositions.shared.y;S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).map(I=>I.id===o.payload.keyframeId?{...I,positions:{...I.positions,[o.payload.contextId]:{x:y,y:v}}}:I)}}const T={...r,contexts:a,repos:u,groups:d,relationships:p,actors:h,userNeeds:g,actorNeedConnections:w,needContextConnections:P,viewConfig:{...r.viewConfig,flowStages:N},temporal:S};return Se(n,T),{projects:{...t.projects,[n]:T},undoStack:s,redoStack:[...t.redoStack,o]}}),redo:()=>e(t=>{if(t.redoStack.length===0)return t;const n=t.activeProjectId;if(!n)return t;const r=t.projects[n];if(!r)return t;const o=t.redoStack[t.redoStack.length-1],s=t.redoStack.slice(0,-1);let a=r.contexts,u=r.repos,d=r.groups,p=r.relationships,h=r.actors||[],g=r.userNeeds||[],w=r.actorNeedConnections||[],P=r.needContextConnections||[];if(o.type==="moveContext"&&o.payload.contextId&&o.payload.newPositions){const y=a.findIndex(v=>v.id===o.payload.contextId);y!==-1&&(a=[...a],a[y]={...a[y],positions:o.payload.newPositions})}else if(o.type==="moveContextGroup"&&o.payload.positionsMap)a=a.map(y=>{var I;const v=(I=o.payload.positionsMap)==null?void 0:I[y.id];return v?{...y,positions:v.new}:y});else if(o.type==="addContext"&&o.payload.context)a=[...a,o.payload.context];else if(o.type==="deleteContext"&&o.payload.context)a=a.filter(y=>{var v;return y.id!==((v=o.payload.context)==null?void 0:v.id)});else if(o.type==="assignRepo"&&o.payload.repoId&&o.payload.newContextId){const y=u.findIndex(v=>v.id===o.payload.repoId);y!==-1&&(u=[...u],u[y]={...u[y],contextId:o.payload.newContextId})}else if(o.type==="unassignRepo"&&o.payload.repoId){const y=u.findIndex(v=>v.id===o.payload.repoId);y!==-1&&(u=[...u],u[y]={...u[y],contextId:void 0})}else if(o.type==="addGroup"&&o.payload.group)d=[...d,o.payload.group];else if(o.type==="deleteGroup"&&o.payload.group)d=d.filter(y=>{var v;return y.id!==((v=o.payload.group)==null?void 0:v.id)});else if(o.type==="removeFromGroup"&&o.payload.groupId&&o.payload.contextId){const y=d.findIndex(v=>v.id===o.payload.groupId);y!==-1&&(d=[...d],d[y]={...d[y],contextIds:d[y].contextIds.filter(v=>v!==o.payload.contextId)})}else if(o.type==="addToGroup"&&o.payload.groupId){const y=d.findIndex(v=>v.id===o.payload.groupId);if(y!==-1){d=[...d];const v=o.payload.contextIds||[o.payload.contextId];d[y]={...d[y],contextIds:[...d[y].contextIds,...v]}}}else if(o.type==="addRelationship"&&o.payload.relationship)p=[...p,o.payload.relationship];else if(o.type==="deleteRelationship"&&o.payload.relationship)p=p.filter(y=>{var v;return y.id!==((v=o.payload.relationship)==null?void 0:v.id)});else if(o.type==="updateRelationship"&&o.payload.relationshipId&&o.payload.newRelationship){const y=p.findIndex(v=>v.id===o.payload.relationshipId);y!==-1&&(p=[...p],p[y]=o.payload.newRelationship)}else if(o.type==="addActor"&&o.payload.actor)h=[...h,o.payload.actor];else if(o.type==="deleteActor"&&o.payload.actor)h=h.filter(y=>{var v;return y.id!==((v=o.payload.actor)==null?void 0:v.id)});else if(o.type==="moveActor"&&o.payload.actorId&&o.payload.newPosition!==void 0){const y=h.findIndex(v=>v.id===o.payload.actorId);y!==-1&&(h=[...h],h[y]={...h[y],position:o.payload.newPosition})}else if(o.type==="addActorConnection"&&o.payload.actorConnection)newActorConnections=[...newActorConnections,o.payload.actorConnection];else if(o.type==="deleteActorConnection"&&o.payload.actorConnection)newActorConnections=newActorConnections.filter(y=>{var v;return y.id!==((v=o.payload.actorConnection)==null?void 0:v.id)});else if(o.type==="addUserNeed"&&o.payload.userNeed)g=[...g,o.payload.userNeed];else if(o.type==="deleteUserNeed"&&o.payload.userNeed)g=g.filter(y=>{var v;return y.id!==((v=o.payload.userNeed)==null?void 0:v.id)});else if(o.type==="moveUserNeed"&&o.payload.userNeedId&&o.payload.newPosition!==void 0){const y=g.findIndex(v=>v.id===o.payload.userNeedId);y!==-1&&(g=[...g],g[y]={...g[y],position:o.payload.newPosition})}else o.type==="addActorNeedConnection"&&o.payload.actorNeedConnection?w=[...w,o.payload.actorNeedConnection]:o.type==="deleteActorNeedConnection"&&o.payload.actorNeedConnection?w=w.filter(y=>{var v;return y.id!==((v=o.payload.actorNeedConnection)==null?void 0:v.id)}):o.type==="addNeedContextConnection"&&o.payload.needContextConnection?P=[...P,o.payload.needContextConnection]:o.type==="deleteNeedContextConnection"&&o.payload.needContextConnection&&(P=P.filter(y=>{var v;return y.id!==((v=o.payload.needContextConnection)==null?void 0:v.id)}));let N=r.viewConfig.flowStages;o.type==="updateFlowStage"&&o.payload.flowStageIndex!==void 0&&o.payload.newFlowStage?(N=[...N],N[o.payload.flowStageIndex]=o.payload.newFlowStage):o.type==="addFlowStage"&&o.payload.flowStage?N=[...N,o.payload.flowStage]:o.type==="deleteFlowStage"&&o.payload.flowStageIndex!==void 0&&(N=N.filter((y,v)=>v!==o.payload.flowStageIndex));let S=r.temporal;if(o.type==="createKeyframe"){const y=o.payload.keyframes||(o.payload.keyframe?[o.payload.keyframe]:[]),v=[...(S==null?void 0:S.keyframes)||[],...y].sort((I,k)=>I.date.localeCompare(k.date));S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:v}}else if(o.type==="deleteKeyframe"&&o.payload.keyframe)S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).filter(y=>{var v;return y.id!==((v=o.payload.keyframe)==null?void 0:v.id)})};else if(o.type==="updateKeyframe"&&o.payload.keyframeId&&o.payload.newKeyframeData)S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).map(y=>y.id===o.payload.keyframeId?{...y,...o.payload.newKeyframeData}:y)};else if(o.type==="moveContextInKeyframe"&&o.payload.keyframeId&&o.payload.contextId&&o.payload.newPositions){const y=o.payload.newPositions.strategic.x,v=o.payload.newPositions.shared.y;S={...S,enabled:(S==null?void 0:S.enabled)||!1,keyframes:((S==null?void 0:S.keyframes)||[]).map(I=>I.id===o.payload.keyframeId?{...I,positions:{...I.positions,[o.payload.contextId]:{x:y,y:v}}}:I)}}const T={...r,contexts:a,repos:u,groups:d,relationships:p,actors:h,userNeeds:g,actorNeedConnections:w,needContextConnections:P,viewConfig:{...r.viewConfig,flowStages:N},temporal:S};return Se(n,T),{projects:{...t.projects,[n]:T},undoStack:[...t.undoStack,o],redoStack:s}}),fitToMap:()=>{Kc&&Kc()},exportProject:()=>{},importProject:t=>e(n=>(t.actors||(t.actors=[]),t.actorConnections||(t.actorConnections=[]),t.contexts=t.contexts.map(r=>{const o=!r.positions.distillation,s=!r.evolutionStage;return o||s?{...r,positions:{...r.positions,distillation:r.positions.distillation||{x:50,y:50}},strategicClassification:r.strategicClassification||"supporting",evolutionStage:r.evolutionStage||ai(r.positions.strategic.x)}:r}),Se(t.id,t),{projects:{...n.projects,[t.id]:t},activeProjectId:t.id,selectedContextId:null,selectedActorId:null,selectedUserNeedId:null})),reset:()=>e({activeProjectId:Ms.id,projects:{[Ms.id]:Ms,[Zf.id]:Zf},activeViewMode:"flow",selectedContextId:null,selectedRelationshipId:null,selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null,selectedContextIds:[],undoStack:[],redoStack:[]}),toggleTemporalMode:()=>e(t=>{var a,u;const n=t.activeProjectId;if(!n)return t;const r=t.projects[n];if(!r)return t;const o=((a=r.temporal)==null?void 0:a.enabled)||!1,s={...r,temporal:{enabled:!o,keyframes:((u=r.temporal)==null?void 0:u.keyframes)||[]}};return Se(n,s),{projects:{...t.projects,[n]:s}}}),setCurrentDate:t=>e(n=>({temporal:{...n.temporal,currentDate:t}})),setActiveKeyframe:t=>e(n=>t&&!n.temporal.activeKeyframeId?{temporal:{...n.temporal,activeKeyframeId:t,savedShowGroups:n.showGroups,savedShowRelationships:n.showRelationships},showGroups:!1,showRelationships:!1}:!t&&n.temporal.activeKeyframeId?{temporal:{...n.temporal,activeKeyframeId:t},showGroups:n.temporal.savedShowGroups??n.showGroups,showRelationships:n.temporal.savedShowRelationships??n.showRelationships}:{temporal:{...n.temporal,activeKeyframeId:t}}),addKeyframe:(t,n)=>{var k,E;const r=q.getState(),o=r.activeProjectId;if(!o)return null;const s=r.projects[o];if(!s)return null;if(!/^\d{4}(-Q[1-4])?$/.test(t))return console.error("Invalid keyframe date format:",t),null;const u=((k=s.temporal)==null?void 0:k.keyframes)||[];if(u.some(R=>R.date===t))return console.error("Duplicate keyframe date:",t),null;const d=new Date().getFullYear(),p=parseInt(t.split("-")[0]);p-d>10&&console.warn(`Keyframe date ${t} is more than 10 years in the future`);const h={};s.contexts.forEach(R=>{h[R.id]={x:R.positions.strategic.x,y:R.positions.shared.y}});const g=[],w=d.toString(),P=u.length===0,N=p>d;if(P&&N&&t!==w){const R={id:`keyframe-${Date.now()}-now`,date:w,label:"Current",positions:{...h},activeContextIds:s.contexts.map(Y=>Y.id)};g.push(R)}const T={id:`keyframe-${Date.now()}`,date:t,label:n,positions:h,activeContextIds:s.contexts.map(R=>R.id)};g.push(T);const y=[...u,...g].sort((R,Y)=>R.date.localeCompare(Y.date)),v={...s,temporal:{enabled:((E=s.temporal)==null?void 0:E.enabled)||!0,keyframes:y}},I={type:"createKeyframe",payload:{keyframes:g}};return Se(o,v),e({projects:{...r.projects,[o]:v},undoStack:[...r.undoStack,I],redoStack:[]}),T.id},deleteKeyframe:t=>e(n=>{const r=n.activeProjectId;if(!r)return n;const o=n.projects[r];if(!o||!o.temporal)return n;const s=o.temporal.keyframes.find(d=>d.id===t);if(!s)return n;const a={type:"deleteKeyframe",payload:{keyframe:s}},u={...o,temporal:{...o.temporal,keyframes:o.temporal.keyframes.filter(d=>d.id!==t)}};return Se(r,u),{projects:{...n.projects,[r]:u},undoStack:[...n.undoStack,a],redoStack:[]}}),updateKeyframe:(t,n)=>e(r=>{const o=r.activeProjectId;if(!o)return r;const s=r.projects[o];if(!s||!s.temporal)return r;const a=s.temporal.keyframes.find(h=>h.id===t);if(!a)return r;const u={type:"updateKeyframe",payload:{keyframeId:t,oldKeyframeData:{...a},newKeyframeData:n}},d=s.temporal.keyframes.map(h=>h.id===t?{...h,...n}:h).sort((h,g)=>h.date.localeCompare(g.date)),p={...s,temporal:{...s.temporal,keyframes:d}};return Se(o,p),{projects:{...r.projects,[o]:p},undoStack:[...r.undoStack,u],redoStack:[]}}),updateKeyframeContextPosition:(t,n,r,o)=>e(s=>{const a=s.activeProjectId;if(!a)return s;const u=s.projects[a];if(!u||!u.temporal)return s;const d=u.temporal.keyframes.find(P=>P.id===t);if(!d)return s;const p=d.positions[n],h={type:"moveContextInKeyframe",payload:{keyframeId:t,contextId:n,oldPositions:p?{flow:{x:0},strategic:{x:p.x},distillation:{x:0,y:0},shared:{y:p.y}}:void 0,newPositions:{flow:{x:0},strategic:{x:r},distillation:{x:0,y:0},shared:{y:o}}}},g=u.temporal.keyframes.map(P=>P.id===t?{...P,positions:{...P.positions,[n]:{x:r,y:o}}}:P),w={...u,temporal:{...u.temporal,keyframes:g}};return Se(a,w),{projects:{...s.projects,[a]:w},undoStack:[...s.undoStack,h],redoStack:[]}})}));Promise.all(Lr.map(e=>ow(e.id))).then(e=>{const t={};Lr.forEach((n,r)=>{const o=e[r];o?t[o.id]=o:t[n.id]=n}),q.setState({projects:t})}).catch(e=>{console.error("Failed to load projects from IndexedDB:",e)});function mt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=mt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:cw}=U,{useSyncExternalStoreWithSelector:uw}=f0,dw=e=>e;function y0(e,t=dw,n){const r=uw(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return cw(r),r}const qf=(e,t)=>{const n=l0(e),r=(o,s=t)=>y0(n,o,s);return Object.assign(r,n),r},fw=(e,t)=>e?qf(e,t):qf;function ot(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var pw={value:()=>{}};function Dl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ds(n)}function Ds(e){this._=e}function hw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ds.prototype=Dl.prototype={constructor:Ds,on:function(e,t){var n=this._,r=hw(e+"",n),o,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((o=(e=r[s]).type)&&(o=mw(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(o=(e=r[s]).type)n[o]=Kf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Kf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ds(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function mw(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Kf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=pw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qc="http://www.w3.org/1999/xhtml";const Qf={svg:"http://www.w3.org/2000/svg",xhtml:Qc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ol(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qf.hasOwnProperty(t)?{space:Qf[t],local:e}:e}function yw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qc&&t.documentElement.namespaceURI===Qc?t.createElement(e):t.createElementNS(n,e)}}function xw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function x0(e){var t=Ol(e);return(t.local?xw:yw)(t)}function gw(){}function hd(e){return e==null?gw:function(){return this.querySelector(e)}}function vw(e){typeof e!="function"&&(e=hd(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,u=r[o]=new Array(a),d,p,h=0;h<a;++h)(d=s[h])&&(p=e.call(d,d.__data__,h,s))&&("__data__"in d&&(p.__data__=d.__data__),u[h]=p);return new Et(r,this._parents)}function ww(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cw(){return[]}function g0(e){return e==null?Cw:function(){return this.querySelectorAll(e)}}function Pw(e){return function(){return ww(e.apply(this,arguments))}}function Sw(e){typeof e=="function"?e=Pw(e):e=g0(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var a=t[s],u=a.length,d,p=0;p<u;++p)(d=a[p])&&(r.push(e.call(d,d.__data__,p,a)),o.push(d));return new Et(r,o)}function v0(e){return function(){return this.matches(e)}}function w0(e){return function(t){return t.matches(e)}}var Iw=Array.prototype.find;function _w(e){return function(){return Iw.call(this.children,e)}}function bw(){return this.firstElementChild}function kw(e){return this.select(e==null?bw:_w(typeof e=="function"?e:w0(e)))}var Nw=Array.prototype.filter;function Ew(){return Array.from(this.children)}function Tw(e){return function(){return Nw.call(this.children,e)}}function Aw(e){return this.selectAll(e==null?Ew:Tw(typeof e=="function"?e:w0(e)))}function Lw(e){typeof e!="function"&&(e=v0(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,u=r[o]=[],d,p=0;p<a;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&u.push(d);return new Et(r,this._parents)}function C0(e){return new Array(e.length)}function jw(){return new Et(this._enter||this._groups.map(C0),this._parents)}function cl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cl.prototype={constructor:cl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Mw(e){return function(){return e}}function Dw(e,t,n,r,o,s){for(var a=0,u,d=t.length,p=s.length;a<p;++a)(u=t[a])?(u.__data__=s[a],r[a]=u):n[a]=new cl(e,s[a]);for(;a<d;++a)(u=t[a])&&(o[a]=u)}function Ow(e,t,n,r,o,s,a){var u,d,p=new Map,h=t.length,g=s.length,w=new Array(h),P;for(u=0;u<h;++u)(d=t[u])&&(w[u]=P=a.call(d,d.__data__,u,t)+"",p.has(P)?o[u]=d:p.set(P,d));for(u=0;u<g;++u)P=a.call(e,s[u],u,s)+"",(d=p.get(P))?(r[u]=d,d.__data__=s[u],p.delete(P)):n[u]=new cl(e,s[u]);for(u=0;u<h;++u)(d=t[u])&&p.get(w[u])===d&&(o[u]=d)}function Rw(e){return e.__data__}function Xw(e,t){if(!arguments.length)return Array.from(this,Rw);var n=t?Ow:Dw,r=this._parents,o=this._groups;typeof e!="function"&&(e=Mw(e));for(var s=o.length,a=new Array(s),u=new Array(s),d=new Array(s),p=0;p<s;++p){var h=r[p],g=o[p],w=g.length,P=Bw(e.call(h,h&&h.__data__,p,r)),N=P.length,S=u[p]=new Array(N),T=a[p]=new Array(N),y=d[p]=new Array(w);n(h,g,S,T,y,P,t);for(var v=0,I=0,k,E;v<N;++v)if(k=S[v]){for(v>=I&&(I=v+1);!(E=T[I])&&++I<N;);k._next=E||null}}return a=new Et(a,r),a._enter=u,a._exit=d,a}function Bw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zw(){return new Et(this._exit||this._groups.map(C0),this._parents)}function Yw(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function Fw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,a=Math.min(o,s),u=new Array(o),d=0;d<a;++d)for(var p=n[d],h=r[d],g=p.length,w=u[d]=new Array(g),P,N=0;N<g;++N)(P=p[N]||h[N])&&(w[N]=P);for(;d<o;++d)u[d]=n[d];return new Et(u,this._parents)}function $w(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],a;--o>=0;)(a=r[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Uw(e){e||(e=Hw);function t(g,w){return g&&w?e(g.__data__,w.__data__):!g-!w}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,d=o[s]=new Array(u),p,h=0;h<u;++h)(p=a[h])&&(d[h]=p);d.sort(t)}return new Et(o,this._parents).order()}function Hw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ww(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vw(){return Array.from(this)}function Gw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var a=r[o];if(a)return a}return null}function Zw(){let e=0;for(const t of this)++e;return e}function qw(){return!this.node()}function Kw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,a=o.length,u;s<a;++s)(u=o[s])&&e.call(u,u.__data__,s,o);return this}function Qw(e){return function(){this.removeAttribute(e)}}function Jw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eC(e,t){return function(){this.setAttribute(e,t)}}function tC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oC(e,t){var n=Ol(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jw:Qw:typeof t=="function"?n.local?rC:nC:n.local?tC:eC)(n,t))}function P0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function iC(e){return function(){this.style.removeProperty(e)}}function sC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function lC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function aC(e,t,n){return arguments.length>1?this.each((t==null?iC:typeof t=="function"?lC:sC)(e,t,n??"")):_o(this.node(),e)}function _o(e,t){return e.style.getPropertyValue(t)||P0(e).getComputedStyle(e,null).getPropertyValue(t)}function cC(e){return function(){delete this[e]}}function uC(e,t){return function(){this[e]=t}}function dC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fC(e,t){return arguments.length>1?this.each((t==null?cC:typeof t=="function"?dC:uC)(e,t)):this.node()[e]}function S0(e){return e.trim().split(/^|\s+/)}function md(e){return e.classList||new I0(e)}function I0(e){this._node=e,this._names=S0(e.getAttribute("class")||"")}I0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _0(e,t){for(var n=md(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function b0(e,t){for(var n=md(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function pC(e){return function(){_0(this,e)}}function hC(e){return function(){b0(this,e)}}function mC(e,t){return function(){(t.apply(this,arguments)?_0:b0)(this,e)}}function yC(e,t){var n=S0(e+"");if(arguments.length<2){for(var r=md(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?mC:t?pC:hC)(n,t))}function xC(){this.textContent=""}function gC(e){return function(){this.textContent=e}}function vC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function wC(e){return arguments.length?this.each(e==null?xC:(typeof e=="function"?vC:gC)(e)):this.node().textContent}function CC(){this.innerHTML=""}function PC(e){return function(){this.innerHTML=e}}function SC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function IC(e){return arguments.length?this.each(e==null?CC:(typeof e=="function"?SC:PC)(e)):this.node().innerHTML}function _C(){this.nextSibling&&this.parentNode.appendChild(this)}function bC(){return this.each(_C)}function kC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NC(){return this.each(kC)}function EC(e){var t=typeof e=="function"?e:x0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TC(){return null}function AC(e,t){var n=typeof e=="function"?e:x0(e),r=t==null?TC:typeof t=="function"?t:hd(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function LC(){var e=this.parentNode;e&&e.removeChild(this)}function jC(){return this.each(LC)}function MC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function DC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function OC(e){return this.select(e?DC:MC)}function RC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function XC(e){return function(t){e.call(this,t,this.__data__)}}function BC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zC(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function YC(e,t,n){return function(){var r=this.__on,o,s=XC(t);if(r){for(var a=0,u=r.length;a<u;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function FC(e,t,n){var r=BC(e+""),o,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,p=u.length,h;d<p;++d)for(o=0,h=u[d];o<s;++o)if((a=r[o]).type===h.type&&a.name===h.name)return h.value}return}for(u=t?YC:zC,o=0;o<s;++o)this.each(u(r[o],t,n));return this}function k0(e,t,n){var r=P0(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function $C(e,t){return function(){return k0(this,e,t)}}function UC(e,t){return function(){return k0(this,e,t.apply(this,arguments))}}function HC(e,t){return this.each((typeof t=="function"?UC:$C)(e,t))}function*WC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,a;o<s;++o)(a=r[o])&&(yield a)}var N0=[null];function Et(e,t){this._groups=e,this._parents=t}function Xi(){return new Et([[document.documentElement]],N0)}function VC(){return this}Et.prototype=Xi.prototype={constructor:Et,select:vw,selectAll:Sw,selectChild:kw,selectChildren:Aw,filter:Lw,data:Xw,enter:jw,exit:zw,join:Yw,merge:Fw,selection:VC,order:$w,sort:Uw,call:Ww,nodes:Vw,node:Gw,size:Zw,empty:qw,each:Kw,attr:oC,style:aC,property:fC,classed:yC,text:wC,html:IC,raise:bC,lower:NC,append:EC,insert:AC,remove:jC,clone:OC,datum:RC,on:FC,dispatch:HC,[Symbol.iterator]:WC};function Vt(e){return typeof e=="string"?new Et([[document.querySelector(e)]],[document.documentElement]):new Et([[e]],N0)}function GC(e){let t;for(;t=e.sourceEvent;)e=t;return e}function on(e,t){if(e=GC(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ZC={passive:!1},bi={capture:!0,passive:!1};function Ha(e){e.stopImmediatePropagation()}function fo(e){e.preventDefault(),e.stopImmediatePropagation()}function E0(e){var t=e.document.documentElement,n=Vt(e).on("dragstart.drag",fo,bi);"onselectstart"in t?n.on("selectstart.drag",fo,bi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function T0(e,t){var n=e.document.documentElement,r=Vt(e).on("dragstart.drag",null);t&&(r.on("click.drag",fo,bi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ds=e=>()=>e;function Jc(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:a,y:u,dx:d,dy:p,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:h}})}Jc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qC(e){return!e.ctrlKey&&!e.button}function KC(){return this.parentNode}function QC(e,t){return t??{x:e.x,y:e.y}}function JC(){return navigator.maxTouchPoints||"ontouchstart"in this}function eP(){var e=qC,t=KC,n=QC,r=JC,o={},s=Dl("start","drag","end"),a=0,u,d,p,h,g=0;function w(k){k.on("mousedown.drag",P).filter(r).on("touchstart.drag",T).on("touchmove.drag",y,ZC).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function P(k,E){if(!(h||!e.call(this,k,E))){var R=I(this,t.call(this,k,E),k,E,"mouse");R&&(Vt(k.view).on("mousemove.drag",N,bi).on("mouseup.drag",S,bi),E0(k.view),Ha(k),p=!1,u=k.clientX,d=k.clientY,R("start",k))}}function N(k){if(fo(k),!p){var E=k.clientX-u,R=k.clientY-d;p=E*E+R*R>g}o.mouse("drag",k)}function S(k){Vt(k.view).on("mousemove.drag mouseup.drag",null),T0(k.view,p),fo(k),o.mouse("end",k)}function T(k,E){if(e.call(this,k,E)){var R=k.changedTouches,Y=t.call(this,k,E),B=R.length,$,Z;for($=0;$<B;++$)(Z=I(this,Y,k,E,R[$].identifier,R[$]))&&(Ha(k),Z("start",k,R[$]))}}function y(k){var E=k.changedTouches,R=E.length,Y,B;for(Y=0;Y<R;++Y)(B=o[E[Y].identifier])&&(fo(k),B("drag",k,E[Y]))}function v(k){var E=k.changedTouches,R=E.length,Y,B;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),Y=0;Y<R;++Y)(B=o[E[Y].identifier])&&(Ha(k),B("end",k,E[Y]))}function I(k,E,R,Y,B,$){var Z=s.copy(),Q=on($||R,E),ne,ee,b;if((b=n.call(k,new Jc("beforestart",{sourceEvent:R,target:w,identifier:B,active:a,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:Z}),Y))!=null)return ne=b.x-Q[0]||0,ee=b.y-Q[1]||0,function A(z,G,O){var M=Q,H;switch(z){case"start":o[B]=A,H=a++;break;case"end":delete o[B],--a;case"drag":Q=on(O||G,E),H=a;break}Z.call(z,k,new Jc(z,{sourceEvent:G,subject:b,target:w,identifier:B,active:H,x:Q[0]+ne,y:Q[1]+ee,dx:Q[0]-M[0],dy:Q[1]-M[1],dispatch:Z}),Y)}}return w.filter=function(k){return arguments.length?(e=typeof k=="function"?k:ds(!!k),w):e},w.container=function(k){return arguments.length?(t=typeof k=="function"?k:ds(k),w):t},w.subject=function(k){return arguments.length?(n=typeof k=="function"?k:ds(k),w):n},w.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:ds(!!k),w):r},w.on=function(){var k=s.on.apply(s,arguments);return k===s?w:k},w.clickDistance=function(k){return arguments.length?(g=(k=+k)*k,w):Math.sqrt(g)},w}function yd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function A0(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bi(){}var ki=.7,ul=1/ki,po="\\s*([+-]?\\d+)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tP=/^#([0-9a-f]{3,8})$/,nP=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),rP=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),oP=new RegExp(`^rgba\\(${po},${po},${po},${Ni}\\)$`),iP=new RegExp(`^rgba\\(${un},${un},${un},${Ni}\\)$`),sP=new RegExp(`^hsl\\(${Ni},${un},${un}\\)$`),lP=new RegExp(`^hsla\\(${Ni},${un},${un},${Ni}\\)$`),Jf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yd(Bi,Ei,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ep,formatHex:ep,formatHex8:aP,formatHsl:cP,formatRgb:tp,toString:tp});function ep(){return this.rgb().formatHex()}function aP(){return this.rgb().formatHex8()}function cP(){return L0(this).formatHsl()}function tp(){return this.rgb().formatRgb()}function Ei(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tP.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?np(t):n===3?new vt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nP.exec(e))?new vt(t[1],t[2],t[3],1):(t=rP.exec(e))?new vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oP.exec(e))?fs(t[1],t[2],t[3],t[4]):(t=iP.exec(e))?fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sP.exec(e))?ip(t[1],t[2]/100,t[3]/100,1):(t=lP.exec(e))?ip(t[1],t[2]/100,t[3]/100,t[4]):Jf.hasOwnProperty(e)?np(Jf[e]):e==="transparent"?new vt(NaN,NaN,NaN,0):null}function np(e){return new vt(e>>16&255,e>>8&255,e&255,1)}function fs(e,t,n,r){return r<=0&&(e=t=n=NaN),new vt(e,t,n,r)}function uP(e){return e instanceof Bi||(e=Ei(e)),e?(e=e.rgb(),new vt(e.r,e.g,e.b,e.opacity)):new vt}function eu(e,t,n,r){return arguments.length===1?uP(e):new vt(e,t,n,r??1)}function vt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yd(vt,eu,A0(Bi,{brighter(e){return e=e==null?ul:Math.pow(ul,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vt(br(this.r),br(this.g),br(this.b),dl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rp,formatHex:rp,formatHex8:dP,formatRgb:op,toString:op}));function rp(){return`#${Pr(this.r)}${Pr(this.g)}${Pr(this.b)}`}function dP(){return`#${Pr(this.r)}${Pr(this.g)}${Pr(this.b)}${Pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function op(){const e=dl(this.opacity);return`${e===1?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${e===1?")":`, ${e})`}`}function dl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function br(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pr(e){return e=br(e),(e<16?"0":"")+e.toString(16)}function ip(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gt(e,t,n,r)}function L0(e){if(e instanceof Gt)return new Gt(e.h,e.s,e.l,e.opacity);if(e instanceof Bi||(e=Ei(e)),!e)return new Gt;if(e instanceof Gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,u=s-o,d=(s+o)/2;return u?(t===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-t)/u+2:a=(t-n)/u+4,u/=d<.5?s+o:2-s-o,a*=60):u=d>0&&d<1?0:a,new Gt(a,u,d,e.opacity)}function fP(e,t,n,r){return arguments.length===1?L0(e):new Gt(e,t,n,r??1)}function Gt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yd(Gt,fP,A0(Bi,{brighter(e){return e=e==null?ul:Math.pow(ul,e),new Gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new Gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new vt(Wa(e>=240?e-240:e+120,o,r),Wa(e,o,r),Wa(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Gt(sp(this.h),ps(this.s),ps(this.l),dl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dl(this.opacity);return`${e===1?"hsl(":"hsla("}${sp(this.h)}, ${ps(this.s)*100}%, ${ps(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sp(e){return e=(e||0)%360,e<0?e+360:e}function ps(e){return Math.max(0,Math.min(1,e||0))}function Wa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const j0=e=>()=>e;function pP(e,t){return function(n){return e+n*t}}function hP(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mP(e){return(e=+e)==1?M0:function(t,n){return n-t?hP(t,n,e):j0(isNaN(t)?n:t)}}function M0(e,t){var n=t-e;return n?pP(e,n):j0(isNaN(e)?t:e)}const lp=function e(t){var n=mP(t);function r(o,s){var a=n((o=eu(o)).r,(s=eu(s)).r),u=n(o.g,s.g),d=n(o.b,s.b),p=M0(o.opacity,s.opacity);return function(h){return o.r=a(h),o.g=u(h),o.b=d(h),o.opacity=p(h),o+""}}return r.gamma=e,r}(1);function Fn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var tu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Va=new RegExp(tu.source,"g");function yP(e){return function(){return e}}function xP(e){return function(t){return e(t)+""}}function gP(e,t){var n=tu.lastIndex=Va.lastIndex=0,r,o,s,a=-1,u=[],d=[];for(e=e+"",t=t+"";(r=tu.exec(e))&&(o=Va.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(o=o[0])?u[a]?u[a]+=o:u[++a]=o:(u[++a]=null,d.push({i:a,x:Fn(r,o)})),n=Va.lastIndex;return n<t.length&&(s=t.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?d[0]?xP(d[0].x):yP(t):(t=d.length,function(p){for(var h=0,g;h<t;++h)u[(g=d[h]).i]=g.x(p);return u.join("")})}var ap=180/Math.PI,nu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D0(e,t,n,r,o,s){var a,u,d;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*ap,skewX:Math.atan(d)*ap,scaleX:a,scaleY:u}}var hs;function vP(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nu:D0(t.a,t.b,t.c,t.d,t.e,t.f)}function wP(e){return e==null||(hs||(hs=document.createElementNS("http://www.w3.org/2000/svg","g")),hs.setAttribute("transform",e),!(e=hs.transform.baseVal.consolidate()))?nu:(e=e.matrix,D0(e.a,e.b,e.c,e.d,e.e,e.f))}function O0(e,t,n,r){function o(p){return p.length?p.pop()+" ":""}function s(p,h,g,w,P,N){if(p!==g||h!==w){var S=P.push("translate(",null,t,null,n);N.push({i:S-4,x:Fn(p,g)},{i:S-2,x:Fn(h,w)})}else(g||w)&&P.push("translate("+g+t+w+n)}function a(p,h,g,w){p!==h?(p-h>180?h+=360:h-p>180&&(p+=360),w.push({i:g.push(o(g)+"rotate(",null,r)-2,x:Fn(p,h)})):h&&g.push(o(g)+"rotate("+h+r)}function u(p,h,g,w){p!==h?w.push({i:g.push(o(g)+"skewX(",null,r)-2,x:Fn(p,h)}):h&&g.push(o(g)+"skewX("+h+r)}function d(p,h,g,w,P,N){if(p!==g||h!==w){var S=P.push(o(P)+"scale(",null,",",null,")");N.push({i:S-4,x:Fn(p,g)},{i:S-2,x:Fn(h,w)})}else(g!==1||w!==1)&&P.push(o(P)+"scale("+g+","+w+")")}return function(p,h){var g=[],w=[];return p=e(p),h=e(h),s(p.translateX,p.translateY,h.translateX,h.translateY,g,w),a(p.rotate,h.rotate,g,w),u(p.skewX,h.skewX,g,w),d(p.scaleX,p.scaleY,h.scaleX,h.scaleY,g,w),p=h=null,function(P){for(var N=-1,S=w.length,T;++N<S;)g[(T=w[N]).i]=T.x(P);return g.join("")}}}var CP=O0(vP,"px, ","px)","deg)"),PP=O0(wP,", ",")",")"),SP=1e-12;function cp(e){return((e=Math.exp(e))+1/e)/2}function IP(e){return((e=Math.exp(e))-1/e)/2}function _P(e){return((e=Math.exp(2*e))-1)/(e+1)}const bP=function e(t,n,r){function o(s,a){var u=s[0],d=s[1],p=s[2],h=a[0],g=a[1],w=a[2],P=h-u,N=g-d,S=P*P+N*N,T,y;if(S<SP)y=Math.log(w/p)/t,T=function(Y){return[u+Y*P,d+Y*N,p*Math.exp(t*Y*y)]};else{var v=Math.sqrt(S),I=(w*w-p*p+r*S)/(2*p*n*v),k=(w*w-p*p-r*S)/(2*w*n*v),E=Math.log(Math.sqrt(I*I+1)-I),R=Math.log(Math.sqrt(k*k+1)-k);y=(R-E)/t,T=function(Y){var B=Y*y,$=cp(E),Z=p/(n*v)*($*_P(t*B+E)-IP(E));return[u+Z*P,d+Z*N,p*$/cp(t*B+E)]}}return T.duration=y*1e3*t/Math.SQRT2,T}return o.rho=function(s){var a=Math.max(.001,+s),u=a*a,d=u*u;return e(a,u,d)},o}(Math.SQRT2,2,4);var bo=0,qo=0,zo=0,R0=1e3,fl,Ko,pl=0,jr=0,Rl=0,Ti=typeof performance=="object"&&performance.now?performance:Date,X0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xd(){return jr||(X0(kP),jr=Ti.now()+Rl)}function kP(){jr=0}function hl(){this._call=this._time=this._next=null}hl.prototype=B0.prototype={constructor:hl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xd():+n)+(t==null?0:+t),!this._next&&Ko!==this&&(Ko?Ko._next=this:fl=this,Ko=this),this._call=e,this._time=n,ru()},stop:function(){this._call&&(this._call=null,this._time=1/0,ru())}};function B0(e,t,n){var r=new hl;return r.restart(e,t,n),r}function NP(){xd(),++bo;for(var e=fl,t;e;)(t=jr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bo}function up(){jr=(pl=Ti.now())+Rl,bo=qo=0;try{NP()}finally{bo=0,TP(),jr=0}}function EP(){var e=Ti.now(),t=e-pl;t>R0&&(Rl-=t,pl=e)}function TP(){for(var e,t=fl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fl=n);Ko=e,ru(r)}function ru(e){if(!bo){qo&&(qo=clearTimeout(qo));var t=e-jr;t>24?(e<1/0&&(qo=setTimeout(up,e-Ti.now()-Rl)),zo&&(zo=clearInterval(zo))):(zo||(pl=Ti.now(),zo=setInterval(EP,R0)),bo=1,X0(up))}}function dp(e,t,n){var r=new hl;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var AP=Dl("start","end","cancel","interrupt"),LP=[],z0=0,fp=1,ou=2,Os=3,pp=4,iu=5,Rs=6;function Xl(e,t,n,r,o,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;jP(e,n,{name:t,index:r,group:o,on:AP,tween:LP,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:z0})}function gd(e,t){var n=Jt(e,t);if(n.state>z0)throw new Error("too late; already scheduled");return n}function fn(e,t){var n=Jt(e,t);if(n.state>Os)throw new Error("too late; already running");return n}function Jt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jP(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=B0(s,0,n.time);function s(p){n.state=fp,n.timer.restart(a,n.delay,n.time),n.delay<=p&&a(p-n.delay)}function a(p){var h,g,w,P;if(n.state!==fp)return d();for(h in r)if(P=r[h],P.name===n.name){if(P.state===Os)return dp(a);P.state===pp?(P.state=Rs,P.timer.stop(),P.on.call("interrupt",e,e.__data__,P.index,P.group),delete r[h]):+h<t&&(P.state=Rs,P.timer.stop(),P.on.call("cancel",e,e.__data__,P.index,P.group),delete r[h])}if(dp(function(){n.state===Os&&(n.state=pp,n.timer.restart(u,n.delay,n.time),u(p))}),n.state=ou,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ou){for(n.state=Os,o=new Array(w=n.tween.length),h=0,g=-1;h<w;++h)(P=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++g]=P);o.length=g+1}}function u(p){for(var h=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=iu,1),g=-1,w=o.length;++g<w;)o[g].call(e,h);n.state===iu&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Rs,n.timer.stop(),delete r[t];for(var p in r)return;delete e.__transition}}function Xs(e,t){var n=e.__transition,r,o,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}o=r.state>ou&&r.state<iu,r.state=Rs,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function MP(e){return this.each(function(){Xs(this,e)})}function DP(e,t){var n,r;return function(){var o=fn(this,e),s=o.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function OP(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=fn(this,e),a=s.tween;if(a!==r){o=(r=a).slice();for(var u={name:t,value:n},d=0,p=o.length;d<p;++d)if(o[d].name===t){o[d]=u;break}d===p&&o.push(u)}s.tween=o}}function RP(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Jt(this.node(),n).tween,o=0,s=r.length,a;o<s;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?DP:OP)(n,e,t))}function vd(e,t,n){var r=e._id;return e.each(function(){var o=fn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Jt(o,r).value[t]}}function Y0(e,t){var n;return(typeof t=="number"?Fn:t instanceof Ei?lp:(n=Ei(t))?(t=n,lp):gP)(e,t)}function XP(e){return function(){this.removeAttribute(e)}}function BP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zP(e,t,n){var r,o=n+"",s;return function(){var a=this.getAttribute(e);return a===o?null:a===r?s:s=t(r=a,n)}}function YP(e,t,n){var r,o=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?s:s=t(r=a,n)}}function FP(e,t,n){var r,o,s;return function(){var a,u=n(this),d;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),d=u+"",a===d?null:a===r&&d===o?s:(o=d,s=t(r=a,u)))}}function $P(e,t,n){var r,o,s;return function(){var a,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),d=u+"",a===d?null:a===r&&d===o?s:(o=d,s=t(r=a,u)))}}function UP(e,t){var n=Ol(e),r=n==="transform"?PP:Y0;return this.attrTween(e,typeof t=="function"?(n.local?$P:FP)(n,r,vd(this,"attr."+e,t)):t==null?(n.local?BP:XP)(n):(n.local?YP:zP)(n,r,t))}function HP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function WP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function VP(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&WP(e,s)),n}return o._value=t,o}function GP(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&HP(e,s)),n}return o._value=t,o}function ZP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ol(e);return this.tween(n,(r.local?VP:GP)(r,t))}function qP(e,t){return function(){gd(this,e).delay=+t.apply(this,arguments)}}function KP(e,t){return t=+t,function(){gd(this,e).delay=t}}function QP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qP:KP)(t,e)):Jt(this.node(),t).delay}function JP(e,t){return function(){fn(this,e).duration=+t.apply(this,arguments)}}function eS(e,t){return t=+t,function(){fn(this,e).duration=t}}function tS(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?JP:eS)(t,e)):Jt(this.node(),t).duration}function nS(e,t){if(typeof t!="function")throw new Error;return function(){fn(this,e).ease=t}}function rS(e){var t=this._id;return arguments.length?this.each(nS(t,e)):Jt(this.node(),t).ease}function oS(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fn(this,e).ease=n}}function iS(e){if(typeof e!="function")throw new Error;return this.each(oS(this._id,e))}function sS(e){typeof e!="function"&&(e=v0(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,u=r[o]=[],d,p=0;p<a;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&u.push(d);return new Tn(r,this._parents,this._name,this._id)}function lS(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var d=t[u],p=n[u],h=d.length,g=a[u]=new Array(h),w,P=0;P<h;++P)(w=d[P]||p[P])&&(g[P]=w);for(;u<r;++u)a[u]=t[u];return new Tn(a,this._parents,this._name,this._id)}function aS(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cS(e,t,n){var r,o,s=aS(t)?gd:fn;return function(){var a=s(this,e),u=a.on;u!==r&&(o=(r=u).copy()).on(t,n),a.on=o}}function uS(e,t){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(e):this.each(cS(n,e,t))}function dS(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fS(){return this.on("end.remove",dS(this._id))}function pS(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hd(e));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var u=r[a],d=u.length,p=s[a]=new Array(d),h,g,w=0;w<d;++w)(h=u[w])&&(g=e.call(h,h.__data__,w,u))&&("__data__"in h&&(g.__data__=h.__data__),p[w]=g,Xl(p[w],t,n,w,p,Jt(h,n)));return new Tn(s,this._parents,t,n)}function hS(e){var t=this._name,n=this._id;typeof e!="function"&&(e=g0(e));for(var r=this._groups,o=r.length,s=[],a=[],u=0;u<o;++u)for(var d=r[u],p=d.length,h,g=0;g<p;++g)if(h=d[g]){for(var w=e.call(h,h.__data__,g,d),P,N=Jt(h,n),S=0,T=w.length;S<T;++S)(P=w[S])&&Xl(P,t,n,S,w,N);s.push(w),a.push(h)}return new Tn(s,a,t,n)}var mS=Xi.prototype.constructor;function yS(){return new mS(this._groups,this._parents)}function xS(e,t){var n,r,o;return function(){var s=_o(this,e),a=(this.style.removeProperty(e),_o(this,e));return s===a?null:s===n&&a===r?o:o=t(n=s,r=a)}}function F0(e){return function(){this.style.removeProperty(e)}}function gS(e,t,n){var r,o=n+"",s;return function(){var a=_o(this,e);return a===o?null:a===r?s:s=t(r=a,n)}}function vS(e,t,n){var r,o,s;return function(){var a=_o(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),_o(this,e))),a===d?null:a===r&&d===o?s:(o=d,s=t(r=a,u))}}function wS(e,t){var n,r,o,s="style."+t,a="end."+s,u;return function(){var d=fn(this,e),p=d.on,h=d.value[s]==null?u||(u=F0(t)):void 0;(p!==n||o!==h)&&(r=(n=p).copy()).on(a,o=h),d.on=r}}function CS(e,t,n){var r=(e+="")=="transform"?CP:Y0;return t==null?this.styleTween(e,xS(e,r)).on("end.style."+e,F0(e)):typeof t=="function"?this.styleTween(e,vS(e,r,vd(this,"style."+e,t))).each(wS(this._id,e)):this.styleTween(e,gS(e,r,t),n).on("end.style."+e,null)}function PS(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function SS(e,t,n){var r,o;function s(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&PS(e,a,n)),r}return s._value=t,s}function IS(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,SS(e,t,n??""))}function _S(e){return function(){this.textContent=e}}function bS(e){return function(){var t=e(this);this.textContent=t??""}}function kS(e){return this.tween("text",typeof e=="function"?bS(vd(this,"text",e)):_S(e==null?"":e+""))}function NS(e){return function(t){this.textContent=e.call(this,t)}}function ES(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&NS(o)),t}return r._value=e,r}function TS(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ES(e))}function AS(){for(var e=this._name,t=this._id,n=$0(),r=this._groups,o=r.length,s=0;s<o;++s)for(var a=r[s],u=a.length,d,p=0;p<u;++p)if(d=a[p]){var h=Jt(d,t);Xl(d,e,n,p,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Tn(r,this._parents,e,n)}function LS(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,a){var u={value:a},d={value:function(){--o===0&&s()}};n.each(function(){var p=fn(this,r),h=p.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),p.on=t}),o===0&&s()})}var jS=0;function Tn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $0(){return++jS}var gn=Xi.prototype;Tn.prototype={constructor:Tn,select:pS,selectAll:hS,selectChild:gn.selectChild,selectChildren:gn.selectChildren,filter:sS,merge:lS,selection:yS,transition:AS,call:gn.call,nodes:gn.nodes,node:gn.node,size:gn.size,empty:gn.empty,each:gn.each,on:uS,attr:UP,attrTween:ZP,style:CS,styleTween:IS,text:kS,textTween:TS,remove:fS,tween:RP,delay:QP,duration:tS,ease:rS,easeVarying:iS,end:LS,[Symbol.iterator]:gn[Symbol.iterator]};function MS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var DS={time:null,delay:0,duration:250,ease:MS};function OS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function RS(e){var t,n;e instanceof Tn?(t=e._id,e=e._name):(t=$0(),(n=DS).time=xd(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var a=r[s],u=a.length,d,p=0;p<u;++p)(d=a[p])&&Xl(d,e,t,p,a,n||OS(d,t));return new Tn(r,this._parents,e,t)}Xi.prototype.interrupt=MP;Xi.prototype.transition=RS;const ms=e=>()=>e;function XS(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function In(e,t,n){this.k=e,this.x=t,this.y=n}In.prototype={constructor:In,scale:function(e){return e===1?this:new In(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new In(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rr=new In(1,0,0);In.prototype;function Ga(e){e.stopImmediatePropagation()}function Yo(e){e.preventDefault(),e.stopImmediatePropagation()}function BS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function hp(){return this.__zoom||rr}function YS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function FS(){return navigator.maxTouchPoints||"ontouchstart"in this}function $S(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function US(){var e=BS,t=zS,n=$S,r=YS,o=FS,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],u=250,d=bP,p=Dl("start","zoom","end"),h,g,w,P=500,N=150,S=0,T=10;function y(b){b.property("__zoom",hp).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",Z).filter(o).on("touchstart.zoom",Q).on("touchmove.zoom",ne).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(b,A,z,G){var O=b.selection?b.selection():b;O.property("__zoom",hp),b!==O?E(b,A,z,G):O.interrupt().each(function(){R(this,arguments).event(G).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},y.scaleBy=function(b,A,z,G){y.scaleTo(b,function(){var O=this.__zoom.k,M=typeof A=="function"?A.apply(this,arguments):A;return O*M},z,G)},y.scaleTo=function(b,A,z,G){y.transform(b,function(){var O=t.apply(this,arguments),M=this.__zoom,H=z==null?k(O):typeof z=="function"?z.apply(this,arguments):z,F=M.invert(H),D=typeof A=="function"?A.apply(this,arguments):A;return n(I(v(M,D),H,F),O,a)},z,G)},y.translateBy=function(b,A,z,G){y.transform(b,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),a)},null,G)},y.translateTo=function(b,A,z,G,O){y.transform(b,function(){var M=t.apply(this,arguments),H=this.__zoom,F=G==null?k(M):typeof G=="function"?G.apply(this,arguments):G;return n(rr.translate(F[0],F[1]).scale(H.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof z=="function"?-z.apply(this,arguments):-z),M,a)},G,O)};function v(b,A){return A=Math.max(s[0],Math.min(s[1],A)),A===b.k?b:new In(A,b.x,b.y)}function I(b,A,z){var G=A[0]-z[0]*b.k,O=A[1]-z[1]*b.k;return G===b.x&&O===b.y?b:new In(b.k,G,O)}function k(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function E(b,A,z,G){b.on("start.zoom",function(){R(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(G).end()}).tween("zoom",function(){var O=this,M=arguments,H=R(O,M).event(G),F=t.apply(O,M),D=z==null?k(F):typeof z=="function"?z.apply(O,M):z,ie=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),K=O.__zoom,le=typeof A=="function"?A.apply(O,M):A,ue=d(K.invert(D).concat(ie/K.k),le.invert(D).concat(ie/le.k));return function(oe){if(oe===1)oe=le;else{var ye=ue(oe),Pe=ie/ye[2];oe=new In(Pe,D[0]-ye[0]*Pe,D[1]-ye[1]*Pe)}H.zoom(null,oe)}})}function R(b,A,z){return!z&&b.__zooming||new Y(b,A)}function Y(b,A){this.that=b,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,A),this.taps=0}Y.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,A){return this.mouse&&b!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var A=Vt(this.that).datum();p.call(b,this.that,new XS(b,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:p}),A)}};function B(b,...A){if(!e.apply(this,arguments))return;var z=R(this,A).event(b),G=this.__zoom,O=Math.max(s[0],Math.min(s[1],G.k*Math.pow(2,r.apply(this,arguments)))),M=on(b);if(z.wheel)(z.mouse[0][0]!==M[0]||z.mouse[0][1]!==M[1])&&(z.mouse[1]=G.invert(z.mouse[0]=M)),clearTimeout(z.wheel);else{if(G.k===O)return;z.mouse=[M,G.invert(M)],Xs(this),z.start()}Yo(b),z.wheel=setTimeout(H,N),z.zoom("mouse",n(I(v(G,O),z.mouse[0],z.mouse[1]),z.extent,a));function H(){z.wheel=null,z.end()}}function $(b,...A){if(w||!e.apply(this,arguments))return;var z=b.currentTarget,G=R(this,A,!0).event(b),O=Vt(b.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",ie,!0),M=on(b,z),H=b.clientX,F=b.clientY;E0(b.view),Ga(b),G.mouse=[M,this.__zoom.invert(M)],Xs(this),G.start();function D(K){if(Yo(K),!G.moved){var le=K.clientX-H,ue=K.clientY-F;G.moved=le*le+ue*ue>S}G.event(K).zoom("mouse",n(I(G.that.__zoom,G.mouse[0]=on(K,z),G.mouse[1]),G.extent,a))}function ie(K){O.on("mousemove.zoom mouseup.zoom",null),T0(K.view,G.moved),Yo(K),G.event(K).end()}}function Z(b,...A){if(e.apply(this,arguments)){var z=this.__zoom,G=on(b.changedTouches?b.changedTouches[0]:b,this),O=z.invert(G),M=z.k*(b.shiftKey?.5:2),H=n(I(v(z,M),G,O),t.apply(this,A),a);Yo(b),u>0?Vt(this).transition().duration(u).call(E,H,G,b):Vt(this).call(y.transform,H,G,b)}}function Q(b,...A){if(e.apply(this,arguments)){var z=b.touches,G=z.length,O=R(this,A,b.changedTouches.length===G).event(b),M,H,F,D;for(Ga(b),H=0;H<G;++H)F=z[H],D=on(F,this),D=[D,this.__zoom.invert(D),F.identifier],O.touch0?!O.touch1&&O.touch0[2]!==D[2]&&(O.touch1=D,O.taps=0):(O.touch0=D,M=!0,O.taps=1+!!h);h&&(h=clearTimeout(h)),M&&(O.taps<2&&(g=D[0],h=setTimeout(function(){h=null},P)),Xs(this),O.start())}}function ne(b,...A){if(this.__zooming){var z=R(this,A).event(b),G=b.changedTouches,O=G.length,M,H,F,D;for(Yo(b),M=0;M<O;++M)H=G[M],F=on(H,this),z.touch0&&z.touch0[2]===H.identifier?z.touch0[0]=F:z.touch1&&z.touch1[2]===H.identifier&&(z.touch1[0]=F);if(H=z.that.__zoom,z.touch1){var ie=z.touch0[0],K=z.touch0[1],le=z.touch1[0],ue=z.touch1[1],oe=(oe=le[0]-ie[0])*oe+(oe=le[1]-ie[1])*oe,ye=(ye=ue[0]-K[0])*ye+(ye=ue[1]-K[1])*ye;H=v(H,Math.sqrt(oe/ye)),F=[(ie[0]+le[0])/2,(ie[1]+le[1])/2],D=[(K[0]+ue[0])/2,(K[1]+ue[1])/2]}else if(z.touch0)F=z.touch0[0],D=z.touch0[1];else return;z.zoom("touch",n(I(H,F,D),z.extent,a))}}function ee(b,...A){if(this.__zooming){var z=R(this,A).event(b),G=b.changedTouches,O=G.length,M,H;for(Ga(b),w&&clearTimeout(w),w=setTimeout(function(){w=null},P),M=0;M<O;++M)H=G[M],z.touch0&&z.touch0[2]===H.identifier?delete z.touch0:z.touch1&&z.touch1[2]===H.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(H=on(H,this),Math.hypot(g[0]-H[0],g[1]-H[1])<T)){var F=Vt(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return y.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:ms(+b),y):r},y.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ms(!!b),y):e},y.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:ms(!!b),y):o},y.extent=function(b){return arguments.length?(t=typeof b=="function"?b:ms([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),y):t},y.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],y):[s[0],s[1]]},y.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(b){return arguments.length?(n=b,y):n},y.duration=function(b){return arguments.length?(u=+b,y):u},y.interpolate=function(b){return arguments.length?(d=b,y):d},y.on=function(){var b=p.on.apply(p,arguments);return b===p?y:b},y.clickDistance=function(b){return arguments.length?(S=(b=+b)*b,y):Math.sqrt(S)},y.tapDistance=function(b){return arguments.length?(T=+b,y):T},y}const Bl=W.createContext(null),HS=Bl.Provider,An={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},U0=An.error001();function Xe(e,t){const n=W.useContext(Bl);if(n===null)throw new Error(U0);return y0(n,e,t)}const et=()=>{const e=W.useContext(Bl);if(e===null)throw new Error(U0);return W.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},WS=e=>e.userSelectionActive?"none":"all";function H0({position:e,children:t,className:n,style:r,...o}){const s=Xe(WS),a=`${e}`.split("-");return U.createElement("div",{className:mt(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},...o},t)}function VS({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:U.createElement(H0,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},U.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const GS=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:u=2,children:d,className:p,...h})=>{const g=W.useRef(null),[w,P]=W.useState({x:0,y:0,width:0,height:0}),N=mt(["react-flow__edge-textwrapper",p]);return W.useEffect(()=>{if(g.current){const S=g.current.getBBox();P({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:U.createElement("g",{transform:`translate(${e-w.width/2} ${t-w.height/2})`,className:N,visibility:w.width?"visible":"hidden",...h},o&&U.createElement("rect",{width:w.width+2*a[0],x:-a[0],y:-a[1],height:w.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:u,ry:u}),U.createElement("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:g,style:r},n),d)};var ZS=W.memo(GS);const wd=e=>({width:e.offsetWidth,height:e.offsetHeight}),ko=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Cd=(e={x:0,y:0},t)=>({x:ko(e.x,t[0][0],t[1][0]),y:ko(e.y,t[0][1],t[1][1])}),mp=(e,t,n)=>e<t?ko(Math.abs(e-t),1,50)/50:e>n?-ko(Math.abs(e-n),1,50)/50:0,W0=(e,t)=>{const n=mp(e.x,35,t.width-35)*20,r=mp(e.y,35,t.height-35)*20;return[n,r]},V0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},qS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Pd=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),KS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),yp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),su=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},QS=e=>Ot(e.width)&&Ot(e.height)&&Ot(e.x)&&Ot(e.y),Ot=e=>!isNaN(e)&&isFinite(e),Ue=Symbol.for("internals"),G0=["Enter"," ","Escape"],JS=(e,t)=>{},eI=e=>"nativeEvent"in e;function lu(e){var o,s;const t=eI(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Z0=e=>"clientX"in e,or=(e,t)=>{var s,a;const n=Z0(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},ml=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},zi=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:w,interactionWidth:P=20})=>U.createElement(U.Fragment,null,U.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:w}),P&&U.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:P,className:"react-flow__edge-interaction"}),o&&Ot(n)&&Ot(r)?U.createElement(ZS,{x:n,y:r,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p}):null);zi.displayName="BaseEdge";function Fo(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function q0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,a=Math.abs(r-t)/2,u=r<t?r+a:r-a;return[s,u,o,a]}function K0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:a,targetControlY:u}){const d=e*.125+o*.375+a*.375+n*.125,p=t*.125+s*.375+u*.375+r*.125,h=Math.abs(d-e),g=Math.abs(p-t);return[d,p,h,g]}var Mr;(function(e){e.Strict="strict",e.Loose="loose"})(Mr||(Mr={}));var Sr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Sr||(Sr={}));var Ai;(function(e){e.Partial="partial",e.Full="full"})(Ai||(Ai={}));var Wn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wn||(Wn={}));var yl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(yl||(yl={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));function xp({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Q0({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:s=fe.Top}){const[a,u]=xp({pos:n,x1:e,y1:t,x2:r,y2:o}),[d,p]=xp({pos:s,x1:r,y1:o,x2:e,y2:t}),[h,g,w,P]=K0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${e},${t} C${a},${u} ${d},${p} ${r},${o}`,h,g,w,P]}const Sd=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=fe.Bottom,targetPosition:s=fe.Top,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:w,markerEnd:P,markerStart:N,interactionWidth:S})=>{const[T,y,v]=Q0({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return U.createElement(zi,{path:T,labelX:y,labelY:v,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:w,markerEnd:P,markerStart:N,interactionWidth:S})});Sd.displayName="SimpleBezierEdge";const gp={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},tI=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vp=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nI({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:s}){const a=gp[t],u=gp[r],d={x:e.x+a.x*s,y:e.y+a.y*s},p={x:n.x+u.x*s,y:n.y+u.y*s},h=tI({source:d,sourcePosition:t,target:p}),g=h.x!==0?"x":"y",w=h[g];let P=[],N,S;const T={x:0,y:0},y={x:0,y:0},[v,I,k,E]=q0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[g]*u[g]===-1){N=o.x??v,S=o.y??I;const Y=[{x:N,y:d.y},{x:N,y:p.y}],B=[{x:d.x,y:S},{x:p.x,y:S}];a[g]===w?P=g==="x"?Y:B:P=g==="x"?B:Y}else{const Y=[{x:d.x,y:p.y}],B=[{x:p.x,y:d.y}];if(g==="x"?P=a.x===w?B:Y:P=a.y===w?Y:B,t===r){const ee=Math.abs(e[g]-n[g]);if(ee<=s){const b=Math.min(s-1,s-ee);a[g]===w?T[g]=(d[g]>e[g]?-1:1)*b:y[g]=(p[g]>n[g]?-1:1)*b}}if(t!==r){const ee=g==="x"?"y":"x",b=a[g]===u[ee],A=d[ee]>p[ee],z=d[ee]<p[ee];(a[g]===1&&(!b&&A||b&&z)||a[g]!==1&&(!b&&z||b&&A))&&(P=g==="x"?Y:B)}const $={x:d.x+T.x,y:d.y+T.y},Z={x:p.x+y.x,y:p.y+y.y},Q=Math.max(Math.abs($.x-P[0].x),Math.abs(Z.x-P[0].x)),ne=Math.max(Math.abs($.y-P[0].y),Math.abs(Z.y-P[0].y));Q>=ne?(N=($.x+Z.x)/2,S=P[0].y):(N=P[0].x,S=($.y+Z.y)/2)}return[[e,{x:d.x+T.x,y:d.y+T.y},...P,{x:p.x+y.x,y:p.y+y.y},n],N,S,k,E]}function rI(e,t,n,r){const o=Math.min(vp(e,t)/2,vp(t,n)/2,r),{x:s,y:a}=t;if(e.x===s&&s===n.x||e.y===a&&a===n.y)return`L${s} ${a}`;if(e.y===a){const p=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+o*p},${a}Q ${s},${a} ${s},${a+o*h}`}const u=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${a+o*d}Q ${s},${a} ${s+o*u},${a}`}function au({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:s=fe.Top,borderRadius:a=5,centerX:u,centerY:d,offset:p=20}){const[h,g,w,P,N]=nI({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:u,y:d},offset:p});return[h.reduce((T,y,v)=>{let I="";return v>0&&v<h.length-1?I=rI(h[v-1],y,h[v+1],a):I=`${v===0?"M":"L"}${y.x} ${y.y}`,T+=I,T},""),g,w,P,N]}const zl=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,sourcePosition:g=fe.Bottom,targetPosition:w=fe.Top,markerEnd:P,markerStart:N,pathOptions:S,interactionWidth:T})=>{const[y,v,I]=au({sourceX:e,sourceY:t,sourcePosition:g,targetX:n,targetY:r,targetPosition:w,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return U.createElement(zi,{path:y,labelX:v,labelY:I,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:P,markerStart:N,interactionWidth:T})});zl.displayName="SmoothStepEdge";const Id=W.memo(e=>{var t;return U.createElement(zl,{...e,pathOptions:W.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Id.displayName="StepEdge";function Yl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,a,u]=q0({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,a,u]}const _d=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:w,interactionWidth:P})=>{const[N,S,T]=Yl({sourceX:e,sourceY:t,targetX:n,targetY:r});return U.createElement(zi,{path:N,labelX:S,labelY:T,label:o,labelStyle:s,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:w,interactionWidth:P})});_d.displayName="StraightEdge";function ys(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function wp({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case fe.Left:return[t-ys(t-r,s),n];case fe.Right:return[t+ys(r-t,s),n];case fe.Top:return[t,n-ys(n-o,s)];case fe.Bottom:return[t,n+ys(o-n,s)]}}function bd({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:s=fe.Top,curvature:a=.25}){const[u,d]=wp({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[p,h]=wp({pos:s,x1:r,y1:o,x2:e,y2:t,c:a}),[g,w,P,N]=K0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:p,targetControlY:h});return[`M${e},${t} C${u},${d} ${p},${h} ${r},${o}`,g,w,P,N]}const xl=W.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=fe.Bottom,targetPosition:s=fe.Top,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:w,markerEnd:P,markerStart:N,pathOptions:S,interactionWidth:T})=>{const[y,v,I]=bd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:S==null?void 0:S.curvature});return U.createElement(zi,{path:y,labelX:v,labelY:I,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:w,markerEnd:P,markerStart:N,interactionWidth:T})});xl.displayName="BezierEdge";const kd=W.createContext(null),oI=kd.Provider;kd.Consumer;const iI=()=>W.useContext(kd),sI=e=>"id"in e&&"source"in e&&"target"in e,lI=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,cu=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,aI=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),cI=(e,t)=>{if(!e.source||!e.target)return t;let n;return sI(e)?n={...e}:n={...e,id:lI(e)},aI(n,t)?t:t.concat(n)},uu=({x:e,y:t},[n,r,o],s,[a,u])=>{const d={x:(e-n)/o,y:(t-r)/o};return s?{x:a*Math.round(d.x/a),y:u*Math.round(d.y/u)}:d},J0=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),ho=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Nd=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:a}=ho(o,t).positionAbsolute;return qS(r,Pd({x:s,y:a,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return KS(n)},ey=(e,t,[n,r,o]=[0,0,1],s=!1,a=!1,u=[0,0])=>{const d={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},p=[];return e.forEach(h=>{const{width:g,height:w,selectable:P=!0,hidden:N=!1}=h;if(a&&!P||N)return!1;const{positionAbsolute:S}=ho(h,u),T={x:S.x,y:S.y,width:g||0,height:w||0},y=su(d,T),v=typeof g>"u"||typeof w>"u"||g===null||w===null,I=s&&y>0,k=(g||0)*(w||0);(v||I||y>=k||h.dragging)&&p.push(h)}),p},ty=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},ny=(e,t,n,r,o,s=.1)=>{const a=t/(e.width*(1+s)),u=n/(e.height*(1+s)),d=Math.min(a,u),p=ko(d,r,o),h=e.x+e.width/2,g=e.y+e.height/2,w=t/2-h*p,P=n/2-g*p;return{x:w,y:P,zoom:p}},xr=(e,t=0)=>e.transition().duration(t);function Cp(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var a,u;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((a=e.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((u=e.positionAbsolute)==null?void 0:u.y)??0)+s.y+s.height/2}),o},[])}function uI(e,t,n,r,o,s){const{x:a,y:u}=or(e),p=t.elementsFromPoint(a,u).find(N=>N.classList.contains("react-flow__handle"));if(p){const N=p.getAttribute("data-nodeid");if(N){const S=Ed(void 0,p),T=p.getAttribute("data-handleid"),y=s({nodeId:N,id:T,type:S});if(y){const v=o.find(I=>I.nodeId===N&&I.type===S&&I.id===T);return{handle:{id:T,type:S,nodeId:N,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let h=[],g=1/0;if(o.forEach(N=>{const S=Math.sqrt((N.x-n.x)**2+(N.y-n.y)**2);if(S<=r){const T=s(N);S<=g&&(S<g?h=[{handle:N,validHandleResult:T}]:S===g&&h.push({handle:N,validHandleResult:T}),g=S)}}),!h.length)return{handle:null,validHandleResult:ry()};if(h.length===1)return h[0];const w=h.some(({validHandleResult:N})=>N.isValid),P=h.some(({handle:N})=>N.type==="target");return h.find(({handle:N,validHandleResult:S})=>P?N.type==="target":w?S.isValid:!0)||h[0]}const dI={source:null,target:null,sourceHandle:null,targetHandle:null},ry=()=>({handleDomNode:null,isValid:!1,connection:dI,endHandle:null});function oy(e,t,n,r,o,s,a){const u=o==="target",d=a.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),p={...ry(),handleDomNode:d};if(d){const h=Ed(void 0,d),g=d.getAttribute("data-nodeid"),w=d.getAttribute("data-handleid"),P=d.classList.contains("connectable"),N=d.classList.contains("connectableend"),S={source:u?g:n,sourceHandle:u?w:r,target:u?n:g,targetHandle:u?r:w};p.connection=S,P&&N&&(t===Mr.Strict?u&&h==="source"||!u&&h==="target":g!==n||w!==r)&&(p.endHandle={nodeId:g,handleId:w,type:h},p.isValid=s(S))}return p}function fI({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[Ue]){const{handleBounds:a}=s[Ue];let u=[],d=[];a&&(u=Cp(s,a,"source",`${t}-${n}-${r}`),d=Cp(s,a,"target",`${t}-${n}-${r}`)),o.push(...u,...d)}return o},[])}function Ed(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Za(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function pI(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function iy({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:a,isValidConnection:u,edgeUpdaterType:d,onReconnectEnd:p}){const h=V0(e.target),{connectionMode:g,domNode:w,autoPanOnConnect:P,connectionRadius:N,onConnectStart:S,panBy:T,getNodes:y,cancelConnection:v}=s();let I=0,k;const{x:E,y:R}=or(e),Y=h==null?void 0:h.elementFromPoint(E,R),B=Ed(d,Y),$=w==null?void 0:w.getBoundingClientRect();if(!$||!B)return;let Z,Q=or(e,$),ne=!1,ee=null,b=!1,A=null;const z=fI({nodes:y(),nodeId:n,handleId:t,handleType:B}),G=()=>{if(!P)return;const[H,F]=W0(Q,$);T({x:H,y:F}),I=requestAnimationFrame(G)};a({connectionPosition:Q,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:B,connectionStartHandle:{nodeId:n,handleId:t,type:B},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:B});function O(H){const{transform:F}=s();Q=or(H,$);const{handle:D,validHandleResult:ie}=uI(H,h,uu(Q,F,!1,[1,1]),N,z,K=>oy(K,g,n,t,o?"target":"source",u,h));if(k=D,ne||(G(),ne=!0),A=ie.handleDomNode,ee=ie.connection,b=ie.isValid,a({connectionPosition:k&&b?J0({x:k.x,y:k.y},F):Q,connectionStatus:pI(!!k,b),connectionEndHandle:ie.endHandle}),!k&&!b&&!A)return Za(Z);ee.source!==ee.target&&A&&(Za(Z),Z=A,A.classList.add("connecting","react-flow__handle-connecting"),A.classList.toggle("valid",b),A.classList.toggle("react-flow__handle-valid",b))}function M(H){var F,D;(k||A)&&ee&&b&&(r==null||r(ee)),(D=(F=s()).onConnectEnd)==null||D.call(F,H),d&&(p==null||p(H)),Za(Z),v(),cancelAnimationFrame(I),ne=!1,b=!1,ee=null,A=null,h.removeEventListener("mousemove",O),h.removeEventListener("mouseup",M),h.removeEventListener("touchmove",O),h.removeEventListener("touchend",M)}h.addEventListener("mousemove",O),h.addEventListener("mouseup",M),h.addEventListener("touchmove",O),h.addEventListener("touchend",M)}const Pp=()=>!0,hI=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),mI=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:a}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n}},sy=W.forwardRef(({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:a,onConnect:u,children:d,className:p,onMouseDown:h,onTouchStart:g,...w},P)=>{var $,Z;const N=a||null,S=e==="target",T=et(),y=iI(),{connectOnClick:v,noPanClassName:I}=Xe(hI,ot),{connecting:k,clickConnecting:E}=Xe(mI(y,N,e),ot);y||(Z=($=T.getState()).onError)==null||Z.call($,"010",An.error010());const R=Q=>{const{defaultEdgeOptions:ne,onConnect:ee,hasDefaultEdges:b}=T.getState(),A={...ne,...Q};if(b){const{edges:z,setEdges:G}=T.getState();G(cI(A,z))}ee==null||ee(A),u==null||u(A)},Y=Q=>{if(!y)return;const ne=Z0(Q);o&&(ne&&Q.button===0||!ne)&&iy({event:Q,handleId:N,nodeId:y,onConnect:R,isTarget:S,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||Pp}),ne?h==null||h(Q):g==null||g(Q)},B=Q=>{const{onClickConnectStart:ne,onClickConnectEnd:ee,connectionClickStartHandle:b,connectionMode:A,isValidConnection:z}=T.getState();if(!y||!b&&!o)return;if(!b){ne==null||ne(Q,{nodeId:y,handleId:N,handleType:e}),T.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:N}});return}const G=V0(Q.target),O=n||z||Pp,{connection:M,isValid:H}=oy({nodeId:y,id:N,type:e},A,b.nodeId,b.handleId||null,b.type,O,G);H&&R(M),ee==null||ee(Q),T.setState({connectionClickStartHandle:null})};return U.createElement("div",{"data-handleid":N,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${N}-${e}`,className:mt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,p,{source:!S,target:S,connectable:r,connectablestart:o,connectableend:s,connecting:E,connectionindicator:r&&(o&&!k||s&&k)}]),onMouseDown:Y,onTouchStart:Y,onClick:v?B:void 0,ref:P,...w},d)});sy.displayName="Handle";var dn=W.memo(sy);const ly=({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom})=>U.createElement(U.Fragment,null,U.createElement(dn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,U.createElement(dn,{type:"source",position:r,isConnectable:t}));ly.displayName="DefaultNode";var du=W.memo(ly);const ay=({data:e,isConnectable:t,sourcePosition:n=fe.Bottom})=>U.createElement(U.Fragment,null,e==null?void 0:e.label,U.createElement(dn,{type:"source",position:n,isConnectable:t}));ay.displayName="InputNode";var cy=W.memo(ay);const uy=({data:e,isConnectable:t,targetPosition:n=fe.Top})=>U.createElement(U.Fragment,null,U.createElement(dn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);uy.displayName="OutputNode";var dy=W.memo(uy);const Td=()=>null;Td.displayName="GroupNode";const yI=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),xs=e=>e.id;function xI(e,t){return ot(e.selectedNodes.map(xs),t.selectedNodes.map(xs))&&ot(e.selectedEdges.map(xs),t.selectedEdges.map(xs))}const fy=W.memo(({onSelectionChange:e})=>{const t=et(),{selectedNodes:n,selectedEdges:r}=Xe(yI,xI);return W.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});fy.displayName="SelectionListener";const gI=e=>!!e.onSelectionChange;function vI({onSelectionChange:e}){const t=Xe(gI);return e||t?U.createElement(fy,{onSelectionChange:e}):null}const wI=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Yr(e,t){W.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function be(e,t,n){W.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const CI=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:a,onClickConnectStart:u,onClickConnectEnd:d,nodesDraggable:p,nodesConnectable:h,nodesFocusable:g,edgesFocusable:w,edgesUpdatable:P,elevateNodesOnSelect:N,minZoom:S,maxZoom:T,nodeExtent:y,onNodesChange:v,onEdgesChange:I,elementsSelectable:k,connectionMode:E,snapGrid:R,snapToGrid:Y,translateExtent:B,connectOnClick:$,defaultEdgeOptions:Z,fitView:Q,fitViewOptions:ne,onNodesDelete:ee,onEdgesDelete:b,onNodeDrag:A,onNodeDragStart:z,onNodeDragStop:G,onSelectionDrag:O,onSelectionDragStart:M,onSelectionDragStop:H,noPanClassName:F,nodeOrigin:D,rfId:ie,autoPanOnConnect:K,autoPanOnNodeDrag:le,onError:ue,connectionRadius:oe,isValidConnection:ye,nodeDragThreshold:Pe})=>{const{setNodes:we,setEdges:re,setDefaultNodesAndEdges:ve,setMinZoom:X,setMaxZoom:pe,setTranslateExtent:ae,setNodeExtent:xe,reset:he}=Xe(wI,ot),te=et();return W.useEffect(()=>{const Te=r==null?void 0:r.map(me=>({...me,...Z}));return ve(n,Te),()=>{he()}},[]),be("defaultEdgeOptions",Z,te.setState),be("connectionMode",E,te.setState),be("onConnect",o,te.setState),be("onConnectStart",s,te.setState),be("onConnectEnd",a,te.setState),be("onClickConnectStart",u,te.setState),be("onClickConnectEnd",d,te.setState),be("nodesDraggable",p,te.setState),be("nodesConnectable",h,te.setState),be("nodesFocusable",g,te.setState),be("edgesFocusable",w,te.setState),be("edgesUpdatable",P,te.setState),be("elementsSelectable",k,te.setState),be("elevateNodesOnSelect",N,te.setState),be("snapToGrid",Y,te.setState),be("snapGrid",R,te.setState),be("onNodesChange",v,te.setState),be("onEdgesChange",I,te.setState),be("connectOnClick",$,te.setState),be("fitViewOnInit",Q,te.setState),be("fitViewOnInitOptions",ne,te.setState),be("onNodesDelete",ee,te.setState),be("onEdgesDelete",b,te.setState),be("onNodeDrag",A,te.setState),be("onNodeDragStart",z,te.setState),be("onNodeDragStop",G,te.setState),be("onSelectionDrag",O,te.setState),be("onSelectionDragStart",M,te.setState),be("onSelectionDragStop",H,te.setState),be("noPanClassName",F,te.setState),be("nodeOrigin",D,te.setState),be("rfId",ie,te.setState),be("autoPanOnConnect",K,te.setState),be("autoPanOnNodeDrag",le,te.setState),be("onError",ue,te.setState),be("connectionRadius",oe,te.setState),be("isValidConnection",ye,te.setState),be("nodeDragThreshold",Pe,te.setState),Yr(e,we),Yr(t,re),Yr(S,X),Yr(T,pe),Yr(B,ae),Yr(y,xe),null},Sp={display:"none"},PI={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},py="react-flow__node-desc",hy="react-flow__edge-desc",SI="react-flow__aria-live",II=e=>e.ariaLiveMessage;function _I({rfId:e}){const t=Xe(II);return U.createElement("div",{id:`${SI}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:PI},t)}function bI({rfId:e,disableKeyboardA11y:t}){return U.createElement(U.Fragment,null,U.createElement("div",{id:`${py}-${e}`,style:Sp},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),U.createElement("div",{id:`${hy}-${e}`,style:Sp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&U.createElement(_I,{rfId:e}))}var Li=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=W.useState(!1),o=W.useRef(!1),s=W.useRef(new Set([])),[a,u]=W.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),h=p.reduce((g,w)=>g.concat(...w),[]);return[p,h]}return[[],[]]},[e]);return W.useEffect(()=>{const d=typeof document<"u"?document:null,p=(t==null?void 0:t.target)||d;if(e!==null){const h=P=>{if(o.current=P.ctrlKey||P.metaKey||P.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&lu(P))return!1;const S=_p(P.code,u);s.current.add(P[S]),Ip(a,s.current,!1)&&(P.preventDefault(),r(!0))},g=P=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&lu(P))return!1;const S=_p(P.code,u);Ip(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(P[S]),P.key==="Meta"&&s.current.clear(),o.current=!1},w=()=>{s.current.clear(),r(!1)};return p==null||p.addEventListener("keydown",h),p==null||p.addEventListener("keyup",g),window.addEventListener("blur",w),()=>{p==null||p.removeEventListener("keydown",h),p==null||p.removeEventListener("keyup",g),window.removeEventListener("blur",w)}}},[e,r]),n};function Ip(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function _p(e,t){return t.includes(e)?"code":"key"}function my(e,t,n,r){var u,d;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),a=ho(s,r);return my(s,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((u=s[Ue])==null?void 0:u.z)??0)>(n.z??0)?((d=s[Ue])==null?void 0:d.z)??0:n.z??0},r)}function yy(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:a,y:u,z:d}=my(r,e,{...r.position,z:((s=r[Ue])==null?void 0:s.z)??0},t);r.positionAbsolute={x:a,y:u},r[Ue].z=d,n!=null&&n[r.id]&&(r[Ue].isParent=!0)}})}function qa(e,t,n,r){const o=new Map,s={},a=r?1e3:0;return e.forEach(u=>{var P;const d=(Ot(u.zIndex)?u.zIndex:0)+(u.selected?a:0),p=t.get(u.id),h={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},g=u.parentNode||u.parentId;g&&(s[g]=!0);const w=(p==null?void 0:p.type)&&(p==null?void 0:p.type)!==u.type;Object.defineProperty(h,Ue,{enumerable:!1,value:{handleBounds:w||(P=p==null?void 0:p[Ue])==null?void 0:P.handleBounds,z:d}}),o.set(u.id,h)}),yy(o,n,s),o}function xy(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:a,d3Zoom:u,d3Selection:d,fitViewOnInitDone:p,fitViewOnInit:h,nodeOrigin:g}=e(),w=t.initial&&!p&&h;if(u&&d&&(w||!t.initial)){const N=n().filter(T=>{var v;const y=t.includeHiddenNodes?T.width&&T.height:!T.hidden;return(v=t.nodes)!=null&&v.length?y&&t.nodes.some(I=>I.id===T.id):y}),S=N.every(T=>T.width&&T.height);if(N.length>0&&S){const T=Nd(N,g),{x:y,y:v,zoom:I}=ny(T,r,o,t.minZoom??s,t.maxZoom??a,t.padding??.1),k=rr.translate(y,v).scale(I);return typeof t.duration=="number"&&t.duration>0?u.transform(xr(d,t.duration),k):u.transform(d,k),!0}}return!1}function kI(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ue]:r[Ue],selected:n.selected})}),new Map(t)}function NI(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function gs({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:a,onEdgesChange:u,hasDefaultNodes:d,hasDefaultEdges:p}=n();e!=null&&e.length&&(d&&r({nodeInternals:kI(e,o)}),a==null||a(e)),t!=null&&t.length&&(p&&r({edges:NI(t,s)}),u==null||u(t))}const Fr=()=>{},EI={zoomIn:Fr,zoomOut:Fr,zoomTo:Fr,getZoom:()=>1,setViewport:Fr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Fr,fitBounds:Fr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},TI=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),AI=()=>{const e=et(),{d3Zoom:t,d3Selection:n}=Xe(TI,ot);return W.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(xr(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(xr(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(xr(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[a,u,d]=e.getState().transform,p=rr.translate(o.x??a,o.y??u).scale(o.zoom??d);t.transform(xr(n,s==null?void 0:s.duration),p)},getViewport:()=>{const[o,s,a]=e.getState().transform;return{x:o,y:s,zoom:a}},fitView:o=>xy(e.getState,o),setCenter:(o,s,a)=>{const{width:u,height:d,maxZoom:p}=e.getState(),h=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:p,g=u/2-o*h,w=d/2-s*h,P=rr.translate(g,w).scale(h);t.transform(xr(n,a==null?void 0:a.duration),P)},fitBounds:(o,s)=>{const{width:a,height:u,minZoom:d,maxZoom:p}=e.getState(),{x:h,y:g,zoom:w}=ny(o,a,u,d,p,(s==null?void 0:s.padding)??.1),P=rr.translate(h,g).scale(w);t.transform(xr(n,s==null?void 0:s.duration),P)},project:o=>{const{transform:s,snapToGrid:a,snapGrid:u}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),uu(o,s,a,u)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:a,snapGrid:u,domNode:d}=e.getState();if(!d)return o;const{x:p,y:h}=d.getBoundingClientRect(),g={x:o.x-p,y:o.y-h};return uu(g,s,a,u)},flowToScreenPosition:o=>{const{transform:s,domNode:a}=e.getState();if(!a)return o;const{x:u,y:d}=a.getBoundingClientRect(),p=J0(o,s);return{x:p.x+u,y:p.y+d}},viewportInitialized:!0}:EI,[t,n])};function jn(){const e=AI(),t=et(),n=W.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),r=W.useCallback(S=>t.getState().nodeInternals.get(S),[]),o=W.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(T=>({...T}))},[]),s=W.useCallback(S=>{const{edges:T=[]}=t.getState();return T.find(y=>y.id===S)},[]),a=W.useCallback(S=>{const{getNodes:T,setNodes:y,hasDefaultNodes:v,onNodesChange:I}=t.getState(),k=T(),E=typeof S=="function"?S(k):S;if(v)y(E);else if(I){const R=E.length===0?k.map(Y=>({type:"remove",id:Y.id})):E.map(Y=>({item:Y,type:"reset"}));I(R)}},[]),u=W.useCallback(S=>{const{edges:T=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:I}=t.getState(),k=typeof S=="function"?S(T):S;if(v)y(k);else if(I){const E=k.length===0?T.map(R=>({type:"remove",id:R.id})):k.map(R=>({item:R,type:"reset"}));I(E)}},[]),d=W.useCallback(S=>{const T=Array.isArray(S)?S:[S],{getNodes:y,setNodes:v,hasDefaultNodes:I,onNodesChange:k}=t.getState();if(I){const R=[...y(),...T];v(R)}else if(k){const E=T.map(R=>({item:R,type:"add"}));k(E)}},[]),p=W.useCallback(S=>{const T=Array.isArray(S)?S:[S],{edges:y=[],setEdges:v,hasDefaultEdges:I,onEdgesChange:k}=t.getState();if(I)v([...y,...T]);else if(k){const E=T.map(R=>({item:R,type:"add"}));k(E)}},[]),h=W.useCallback(()=>{const{getNodes:S,edges:T=[],transform:y}=t.getState(),[v,I,k]=y;return{nodes:S().map(E=>({...E})),edges:T.map(E=>({...E})),viewport:{x:v,y:I,zoom:k}}},[]),g=W.useCallback(({nodes:S,edges:T})=>{const{nodeInternals:y,getNodes:v,edges:I,hasDefaultNodes:k,hasDefaultEdges:E,onNodesDelete:R,onEdgesDelete:Y,onNodesChange:B,onEdgesChange:$}=t.getState(),Z=(S||[]).map(A=>A.id),Q=(T||[]).map(A=>A.id),ne=v().reduce((A,z)=>{const G=z.parentNode||z.parentId,O=!Z.includes(z.id)&&G&&A.find(H=>H.id===G);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(Z.includes(z.id)||O)&&A.push(z),A},[]),ee=I.filter(A=>typeof A.deletable=="boolean"?A.deletable:!0),b=ee.filter(A=>Q.includes(A.id));if(ne||b){const A=ty(ne,ee),z=[...b,...A],G=z.reduce((O,M)=>(O.includes(M.id)||O.push(M.id),O),[]);if((E||k)&&(E&&t.setState({edges:I.filter(O=>!G.includes(O.id))}),k&&(ne.forEach(O=>{y.delete(O.id)}),t.setState({nodeInternals:new Map(y)}))),G.length>0&&(Y==null||Y(z),$&&$(G.map(O=>({id:O,type:"remove"})))),ne.length>0&&(R==null||R(ne),B)){const O=ne.map(M=>({id:M.id,type:"remove"}));B(O)}}},[]),w=W.useCallback(S=>{const T=QS(S),y=T?null:t.getState().nodeInternals.get(S.id);return!T&&!y?[null,null,T]:[T?S:yp(y),y,T]},[]),P=W.useCallback((S,T=!0,y)=>{const[v,I,k]=w(S);return v?(y||t.getState().getNodes()).filter(E=>{if(!k&&(E.id===I.id||!E.positionAbsolute))return!1;const R=yp(E),Y=su(R,v);return T&&Y>0||Y>=v.width*v.height}):[]},[]),N=W.useCallback((S,T,y=!0)=>{const[v]=w(S);if(!v)return!1;const I=su(v,T);return y&&I>0||I>=v.width*v.height},[]);return W.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:a,setEdges:u,addNodes:d,addEdges:p,toObject:h,deleteElements:g,getIntersectingNodes:P,isNodeIntersecting:N}),[e,n,r,o,s,a,u,d,p,h,g,P,N])}const LI={actInsideInputWithModifier:!1};var jI=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=et(),{deleteElements:r}=jn(),o=Li(e,LI),s=Li(t);W.useEffect(()=>{if(o){const{edges:a,getNodes:u}=n.getState(),d=u().filter(h=>h.selected),p=a.filter(h=>h.selected);r({nodes:d,edges:p}),n.setState({nodesSelectionActive:!1})}},[o]),W.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function MI(e){const t=et();W.useEffect(()=>{let n;const r=()=>{var s,a;if(!e.current)return;const o=wd(e.current);(o.height===0||o.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",An.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Ad={position:"absolute",width:"100%",height:"100%",top:0,left:0},DI=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,vs=e=>({x:e.x,y:e.y,zoom:e.k}),$r=(e,t)=>e.target.closest(`.${t}`),bp=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),kp=e=>{const t=e.ctrlKey&&ml()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},OI=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),RI=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:u=.5,panOnScrollMode:d=Sr.Free,zoomOnDoubleClick:p=!0,elementsSelectable:h,panOnDrag:g=!0,defaultViewport:w,translateExtent:P,minZoom:N,maxZoom:S,zoomActivationKeyCode:T,preventScrolling:y=!0,children:v,noWheelClassName:I,noPanClassName:k})=>{const E=W.useRef(),R=et(),Y=W.useRef(!1),B=W.useRef(!1),$=W.useRef(null),Z=W.useRef({x:0,y:0,zoom:0}),{d3Zoom:Q,d3Selection:ne,d3ZoomHandler:ee,userSelectionActive:b}=Xe(OI,ot),A=Li(T),z=W.useRef(0),G=W.useRef(!1),O=W.useRef();return MI($),W.useEffect(()=>{if($.current){const M=$.current.getBoundingClientRect(),H=US().scaleExtent([N,S]).translateExtent(P),F=Vt($.current).call(H),D=rr.translate(w.x,w.y).scale(ko(w.zoom,N,S)),ie=[[0,0],[M.width,M.height]],K=H.constrain()(D,ie,P);H.transform(F,K),H.wheelDelta(kp),R.setState({d3Zoom:H,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[K.x,K.y,K.k],domNode:$.current.closest(".react-flow")})}},[]),W.useEffect(()=>{ne&&Q&&(a&&!A&&!b?ne.on("wheel.zoom",M=>{if($r(M,I))return!1;M.preventDefault(),M.stopImmediatePropagation();const H=ne.property("__zoom").k||1;if(M.ctrlKey&&s){const ye=on(M),Pe=kp(M),we=H*Math.pow(2,Pe);Q.scaleTo(ne,we,ye,M);return}const F=M.deltaMode===1?20:1;let D=d===Sr.Vertical?0:M.deltaX*F,ie=d===Sr.Horizontal?0:M.deltaY*F;!ml()&&M.shiftKey&&d!==Sr.Vertical&&(D=M.deltaY*F,ie=0),Q.translateBy(ne,-(D/H)*u,-(ie/H)*u,{internal:!0});const K=vs(ne.property("__zoom")),{onViewportChangeStart:le,onViewportChange:ue,onViewportChangeEnd:oe}=R.getState();clearTimeout(O.current),G.current||(G.current=!0,t==null||t(M,K),le==null||le(K)),G.current&&(e==null||e(M,K),ue==null||ue(K),O.current=setTimeout(()=>{n==null||n(M,K),oe==null||oe(K),G.current=!1},150))},{passive:!1}):typeof ee<"u"&&ne.on("wheel.zoom",function(M,H){if(!y&&M.type==="wheel"&&!M.ctrlKey||$r(M,I))return null;M.preventDefault(),ee.call(this,M,H)},{passive:!1}))},[b,a,d,ne,Q,ee,A,s,y,I,t,e,n]),W.useEffect(()=>{Q&&Q.on("start",M=>{var D,ie;if(!M.sourceEvent||M.sourceEvent.internal)return null;z.current=(D=M.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:H}=R.getState(),F=vs(M.transform);Y.current=!0,Z.current=F,((ie=M.sourceEvent)==null?void 0:ie.type)==="mousedown"&&R.setState({paneDragging:!0}),H==null||H(F),t==null||t(M.sourceEvent,F)})},[Q,t]),W.useEffect(()=>{Q&&(b&&!Y.current?Q.on("zoom",null):b||Q.on("zoom",M=>{var F;const{onViewportChange:H}=R.getState();if(R.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),B.current=!!(r&&bp(g,z.current??0)),(e||H)&&!((F=M.sourceEvent)!=null&&F.internal)){const D=vs(M.transform);H==null||H(D),e==null||e(M.sourceEvent,D)}}))},[b,Q,e,g,r]),W.useEffect(()=>{Q&&Q.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:H}=R.getState();if(Y.current=!1,R.setState({paneDragging:!1}),r&&bp(g,z.current??0)&&!B.current&&r(M.sourceEvent),B.current=!1,(n||H)&&DI(Z.current,M.transform)){const F=vs(M.transform);Z.current=F,clearTimeout(E.current),E.current=setTimeout(()=>{H==null||H(F),n==null||n(M.sourceEvent,F)},a?150:0)}})},[Q,a,g,n,r]),W.useEffect(()=>{Q&&Q.filter(M=>{const H=A||o,F=s&&M.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&M.button===1&&M.type==="mousedown"&&($r(M,"react-flow__node")||$r(M,"react-flow__edge")))return!0;if(!g&&!H&&!a&&!p&&!s||b||!p&&M.type==="dblclick"||$r(M,I)&&M.type==="wheel"||$r(M,k)&&(M.type!=="wheel"||a&&M.type==="wheel"&&!A)||!s&&M.ctrlKey&&M.type==="wheel"||!H&&!a&&!F&&M.type==="wheel"||!g&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(g)&&!g.includes(M.button)&&M.type==="mousedown")return!1;const D=Array.isArray(g)&&g.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&D})},[b,Q,o,s,a,p,g,h,A]),U.createElement("div",{className:"react-flow__renderer",ref:$,style:Ad},v)},XI=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function BI(){const{userSelectionActive:e,userSelectionRect:t}=Xe(XI,ot);return e&&t?U.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Np(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const a=Math.abs(t.position.x);r.position.x=r.position.x-a,r.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);r.position.y=r.position.y-a,r.style.height+=a,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function zI(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(u=>u.id===o.id);if(s.length===0)return r.push(o),r;const a={...o};for(const u of s)if(u)switch(u.type){case"select":{a.selected=u.selected;break}case"position":{typeof u.position<"u"&&(a.position=u.position),typeof u.positionAbsolute<"u"&&(a.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(a.dragging=u.dragging),a.expandParent&&Np(r,a);break}case"dimensions":{typeof u.dimensions<"u"&&(a.width=u.dimensions.width,a.height=u.dimensions.height),typeof u.updateStyle<"u"&&(a.style={...a.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(a.resizing=u.resizing),a.expandParent&&Np(r,a);break}case"remove":return r}return r.push(a),r},n)}function gy(e,t){return zI(e,t)}const $n=(e,t)=>({id:e,type:"select",selected:t});function oo(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push($n(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push($n(r.id,!1))),n},[])}const Ka=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},YI=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),vy=W.memo(({isSelecting:e,selectionMode:t=Ai.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:p,onPaneMouseLeave:h,children:g})=>{const w=W.useRef(null),P=et(),N=W.useRef(0),S=W.useRef(0),T=W.useRef(),{userSelectionActive:y,elementsSelectable:v,dragging:I}=Xe(YI,ot),k=()=>{P.setState({userSelectionActive:!1,userSelectionRect:null}),N.current=0,S.current=0},E=ee=>{s==null||s(ee),P.getState().resetSelectedElements(),P.setState({nodesSelectionActive:!1})},R=ee=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ee.preventDefault();return}a==null||a(ee)},Y=u?ee=>u(ee):void 0,B=ee=>{const{resetSelectedElements:b,domNode:A}=P.getState();if(T.current=A==null?void 0:A.getBoundingClientRect(),!v||!e||ee.button!==0||ee.target!==w.current||!T.current)return;const{x:z,y:G}=or(ee,T.current);b(),P.setState({userSelectionRect:{width:0,height:0,startX:z,startY:G,x:z,y:G}}),r==null||r(ee)},$=ee=>{const{userSelectionRect:b,nodeInternals:A,edges:z,transform:G,onNodesChange:O,onEdgesChange:M,nodeOrigin:H,getNodes:F}=P.getState();if(!e||!T.current||!b)return;P.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=or(ee,T.current),ie=b.startX??0,K=b.startY??0,le={...b,x:D.x<ie?D.x:ie,y:D.y<K?D.y:K,width:Math.abs(D.x-ie),height:Math.abs(D.y-K)},ue=F(),oe=ey(A,le,G,t===Ai.Partial,!0,H),ye=ty(oe,z).map(we=>we.id),Pe=oe.map(we=>we.id);if(N.current!==Pe.length){N.current=Pe.length;const we=oo(ue,Pe);we.length&&(O==null||O(we))}if(S.current!==ye.length){S.current=ye.length;const we=oo(z,ye);we.length&&(M==null||M(we))}P.setState({userSelectionRect:le})},Z=ee=>{if(ee.button!==0)return;const{userSelectionRect:b}=P.getState();!y&&b&&ee.target===w.current&&(E==null||E(ee)),P.setState({nodesSelectionActive:N.current>0}),k(),o==null||o(ee)},Q=ee=>{y&&(P.setState({nodesSelectionActive:N.current>0}),o==null||o(ee)),k()},ne=v&&(e||y);return U.createElement("div",{className:mt(["react-flow__pane",{dragging:I,selection:e}]),onClick:ne?void 0:Ka(E,w),onContextMenu:Ka(R,w),onWheel:Ka(Y,w),onMouseEnter:ne?void 0:d,onMouseDown:ne?B:void 0,onMouseMove:ne?$:p,onMouseUp:ne?Z:void 0,onMouseLeave:ne?Q:h,ref:w,style:Ad},g,U.createElement(BI,null))});vy.displayName="Pane";function wy(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:wy(r,t):!1}function Ep(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function FI(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!wy(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,a;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((a=o.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function $I(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Cy(e,t,n,r,o=[0,0],s){const a=$I(e,e.extent||r);let u=a;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=n.get(d),{x:w,y:P}=ho(g,o).positionAbsolute;u=g&&Ot(w)&&Ot(P)&&Ot(g.width)&&Ot(g.height)?[[w+e.width*o[0],P+e.height*o[1]],[w+g.width-e.width+e.width*o[0],P+g.height-e.height+e.height*o[1]]]:u}else s==null||s("005",An.error005()),u=a;else if(e.extent&&d&&e.extent!=="parent"){const g=n.get(d),{x:w,y:P}=ho(g,o).positionAbsolute;u=[[e.extent[0][0]+w,e.extent[0][1]+P],[e.extent[1][0]+w,e.extent[1][1]+P]]}let p={x:0,y:0};if(d){const g=n.get(d);p=ho(g,o).positionAbsolute}const h=u&&u!=="parent"?Cd(t,u):t;return{position:{x:h.x-p.x,y:h.y-p.y},positionAbsolute:h}}function Qa({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Tp=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),a=t.getBoundingClientRect(),u={x:a.width*r[0],y:a.height*r[1]};return s.map(d=>{const p=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(p.left-a.left-u.x)/n,y:(p.top-a.top-u.y)/n,...wd(d)}})};function $o(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function fu({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:u,onError:d}=t.getState(),p=u.get(e);if(!p){d==null||d("012",An.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&a)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):o([e])}function UI(){const e=et();return W.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,d={x:(a-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(d.x/o[0]):d.x,ySnapped:s?o[1]*Math.round(d.y/o[1]):d.y,...d}},[])}function Ja(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Py({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:a}){const u=et(),[d,p]=W.useState(!1),h=W.useRef([]),g=W.useRef({x:null,y:null}),w=W.useRef(0),P=W.useRef(null),N=W.useRef({x:0,y:0}),S=W.useRef(null),T=W.useRef(!1),y=W.useRef(!1),v=W.useRef(!1),I=UI();return W.useEffect(()=>{if(e!=null&&e.current){const k=Vt(e.current),E=({x:B,y:$})=>{const{nodeInternals:Z,onNodeDrag:Q,onSelectionDrag:ne,updateNodePositions:ee,nodeExtent:b,snapGrid:A,snapToGrid:z,nodeOrigin:G,onError:O}=u.getState();g.current={x:B,y:$};let M=!1,H={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&b){const D=Nd(h.current,G);H=Pd(D)}if(h.current=h.current.map(D=>{const ie={x:B-D.distance.x,y:$-D.distance.y};z&&(ie.x=A[0]*Math.round(ie.x/A[0]),ie.y=A[1]*Math.round(ie.y/A[1]));const K=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];h.current.length>1&&b&&!D.extent&&(K[0][0]=D.positionAbsolute.x-H.x+b[0][0],K[1][0]=D.positionAbsolute.x+(D.width??0)-H.x2+b[1][0],K[0][1]=D.positionAbsolute.y-H.y+b[0][1],K[1][1]=D.positionAbsolute.y+(D.height??0)-H.y2+b[1][1]);const le=Cy(D,ie,Z,K,G,O);return M=M||D.position.x!==le.position.x||D.position.y!==le.position.y,D.position=le.position,D.positionAbsolute=le.positionAbsolute,D}),!M)return;ee(h.current,!0,!0),p(!0);const F=o?Q:Ja(ne);if(F&&S.current){const[D,ie]=Qa({nodeId:o,dragItems:h.current,nodeInternals:Z});F(S.current,D,ie)}},R=()=>{if(!P.current)return;const[B,$]=W0(N.current,P.current);if(B!==0||$!==0){const{transform:Z,panBy:Q}=u.getState();g.current.x=(g.current.x??0)-B/Z[2],g.current.y=(g.current.y??0)-$/Z[2],Q({x:B,y:$})&&E(g.current)}w.current=requestAnimationFrame(R)},Y=B=>{var G;const{nodeInternals:$,multiSelectionActive:Z,nodesDraggable:Q,unselectNodesAndEdges:ne,onNodeDragStart:ee,onSelectionDragStart:b}=u.getState();y.current=!0;const A=o?ee:Ja(b);(!a||!s)&&!Z&&o&&((G=$.get(o))!=null&&G.selected||ne()),o&&s&&a&&fu({id:o,store:u,nodeRef:e});const z=I(B);if(g.current=z,h.current=FI($,Q,z,o),A&&h.current){const[O,M]=Qa({nodeId:o,dragItems:h.current,nodeInternals:$});A(B.sourceEvent,O,M)}};if(t)k.on(".drag",null);else{const B=eP().on("start",$=>{const{domNode:Z,nodeDragThreshold:Q}=u.getState();Q===0&&Y($),v.current=!1;const ne=I($);g.current=ne,P.current=(Z==null?void 0:Z.getBoundingClientRect())||null,N.current=or($.sourceEvent,P.current)}).on("drag",$=>{var ee,b;const Z=I($),{autoPanOnNodeDrag:Q,nodeDragThreshold:ne}=u.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!T.current&&y.current&&Q&&(T.current=!0,R()),!y.current){const A=Z.xSnapped-(((ee=g==null?void 0:g.current)==null?void 0:ee.x)??0),z=Z.ySnapped-(((b=g==null?void 0:g.current)==null?void 0:b.y)??0);Math.sqrt(A*A+z*z)>ne&&Y($)}(g.current.x!==Z.xSnapped||g.current.y!==Z.ySnapped)&&h.current&&y.current&&(S.current=$.sourceEvent,N.current=or($.sourceEvent,P.current),E(Z))}}).on("end",$=>{if(!(!y.current||v.current)&&(p(!1),T.current=!1,y.current=!1,cancelAnimationFrame(w.current),h.current)){const{updateNodePositions:Z,nodeInternals:Q,onNodeDragStop:ne,onSelectionDragStop:ee}=u.getState(),b=o?ne:Ja(ee);if(Z(h.current,!1,!1),b){const[A,z]=Qa({nodeId:o,dragItems:h.current,nodeInternals:Q});b($.sourceEvent,A,z)}}}).filter($=>{const Z=$.target;return!$.button&&(!n||!Ep(Z,`.${n}`,e))&&(!r||Ep(Z,r,e))});return k.call(B),()=>{k.on(".drag",null)}}}},[e,t,n,r,s,u,o,a,I]),d}function Sy(){const e=et();return W.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:a,snapToGrid:u,snapGrid:d,onError:p,nodesDraggable:h}=e.getState(),g=a().filter(v=>v.selected&&(v.draggable||h&&typeof v.draggable>"u")),w=u?d[0]:5,P=u?d[1]:5,N=n.isShiftPressed?4:1,S=n.x*w*N,T=n.y*P*N,y=g.map(v=>{if(v.positionAbsolute){const I={x:v.positionAbsolute.x+S,y:v.positionAbsolute.y+T};u&&(I.x=d[0]*Math.round(I.x/d[0]),I.y=d[1]*Math.round(I.y/d[1]));const{positionAbsolute:k,position:E}=Cy(v,I,r,o,void 0,p);v.position=E,v.positionAbsolute=k}return v});s(y,!0,!1)},[])}const mo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Uo=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:a,xPosOrigin:u,yPosOrigin:d,selected:p,onClick:h,onMouseEnter:g,onMouseMove:w,onMouseLeave:P,onContextMenu:N,onDoubleClick:S,style:T,className:y,isDraggable:v,isSelectable:I,isConnectable:k,isFocusable:E,selectNodesOnDrag:R,sourcePosition:Y,targetPosition:B,hidden:$,resizeObserver:Z,dragHandle:Q,zIndex:ne,isParent:ee,noDragClassName:b,noPanClassName:A,initialized:z,disableKeyboardA11y:G,ariaLabel:O,rfId:M,hasHandleBounds:H})=>{const F=et(),D=W.useRef(null),ie=W.useRef(null),K=W.useRef(Y),le=W.useRef(B),ue=W.useRef(r),oe=I||v||h||g||w||P,ye=Sy(),Pe=$o(n,F.getState,g),we=$o(n,F.getState,w),re=$o(n,F.getState,P),ve=$o(n,F.getState,N),X=$o(n,F.getState,S),pe=he=>{const{nodeDragThreshold:te}=F.getState();if(I&&(!R||!v||te>0)&&fu({id:n,store:F,nodeRef:D}),h){const Te=F.getState().nodeInternals.get(n);Te&&h(he,{...Te})}},ae=he=>{if(!lu(he)&&!G)if(G0.includes(he.key)&&I){const te=he.key==="Escape";fu({id:n,store:F,unselect:te,nodeRef:D})}else v&&p&&Object.prototype.hasOwnProperty.call(mo,he.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${he.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),ye({x:mo[he.key].x,y:mo[he.key].y,isShiftPressed:he.shiftKey}))};W.useEffect(()=>()=>{ie.current&&(Z==null||Z.unobserve(ie.current),ie.current=null)},[]),W.useEffect(()=>{if(D.current&&!$){const he=D.current;(!z||!H||ie.current!==he)&&(ie.current&&(Z==null||Z.unobserve(ie.current)),Z==null||Z.observe(he),ie.current=he)}},[$,z,H]),W.useEffect(()=>{const he=ue.current!==r,te=K.current!==Y,Te=le.current!==B;D.current&&(he||te||Te)&&(he&&(ue.current=r),te&&(K.current=Y),Te&&(le.current=B),F.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,r,Y,B]);const xe=Py({nodeRef:D,disabled:$||!v,noDragClassName:b,handleSelector:Q,nodeId:n,isSelectable:I,selectNodesOnDrag:R});return $?null:U.createElement("div",{className:mt(["react-flow__node",`react-flow__node-${r}`,{[A]:v},y,{selected:p,selectable:I,parent:ee,dragging:xe}]),ref:D,style:{zIndex:ne,transform:`translate(${u}px,${d}px)`,pointerEvents:oe?"all":"none",visibility:z?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Pe,onMouseMove:we,onMouseLeave:re,onContextMenu:ve,onClick:pe,onDoubleClick:X,onKeyDown:E?ae:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":G?void 0:`${py}-${M}`,"aria-label":O},U.createElement(oI,{value:n},U.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:a,selected:p,isConnectable:k,sourcePosition:Y,targetPosition:B,dragging:xe,dragHandle:Q,zIndex:ne})))};return t.displayName="NodeWrapper",W.memo(t)};const HI=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Nd(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function WI({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=et(),{width:o,height:s,x:a,y:u,transformString:d,userSelectionActive:p}=Xe(HI,ot),h=Sy(),g=W.useRef(null);if(W.useEffect(()=>{var N;n||(N=g.current)==null||N.focus({preventScroll:!0})},[n]),Py({nodeRef:g}),p||!o||!s)return null;const w=e?N=>{const S=r.getState().getNodes().filter(T=>T.selected);e(N,S)}:void 0,P=N=>{Object.prototype.hasOwnProperty.call(mo,N.key)&&h({x:mo[N.key].x,y:mo[N.key].y,isShiftPressed:N.shiftKey})};return U.createElement("div",{className:mt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d}},U.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:w,tabIndex:n?void 0:-1,onKeyDown:n?void 0:P,style:{width:o,height:s,top:u,left:a}}))}var VI=W.memo(WI);const GI=e=>e.nodesSelectionActive,Iy=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:u,onMove:d,onMoveStart:p,onMoveEnd:h,selectionKeyCode:g,selectionOnDrag:w,selectionMode:P,onSelectionStart:N,onSelectionEnd:S,multiSelectionKeyCode:T,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:I,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:R,panOnScrollSpeed:Y,panOnScrollMode:B,zoomOnDoubleClick:$,panOnDrag:Z,defaultViewport:Q,translateExtent:ne,minZoom:ee,maxZoom:b,preventScrolling:A,onSelectionContextMenu:z,noWheelClassName:G,noPanClassName:O,disableKeyboardA11y:M})=>{const H=Xe(GI),F=Li(g),D=Li(y),ie=D||Z,K=D||R,le=F||w&&ie!==!0;return jI({deleteKeyCode:u,multiSelectionKeyCode:T}),U.createElement(RI,{onMove:d,onMoveStart:p,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:I,zoomOnScroll:k,zoomOnPinch:E,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:B,zoomOnDoubleClick:$,panOnDrag:!F&&ie,defaultViewport:Q,translateExtent:ne,minZoom:ee,maxZoom:b,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:G,noPanClassName:O},U.createElement(vy,{onSelectionStart:N,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:ie,isSelecting:!!le,selectionMode:P},e,H&&U.createElement(VI,{onSelectionContextMenu:z,noPanClassName:O,disableKeyboardA11y:M})))};Iy.displayName="FlowRenderer";var ZI=W.memo(Iy);function qI(e){return Xe(W.useCallback(n=>e?ey(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function KI(e){const t={input:Uo(e.input||cy),default:Uo(e.default||du),output:Uo(e.output||dy),group:Uo(e.group||Td)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=Uo(e[s]||du),o),n);return{...t,...r}}const QI=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},JI=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),_y=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:a}=Xe(JI,ot),u=qI(e.onlyRenderVisibleElements),d=W.useRef(),p=W.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(g=>{const w=g.map(P=>({id:P.target.getAttribute("data-id"),nodeElement:P.target,forceUpdate:!0}));s(w)});return d.current=h,h},[]);return W.useEffect(()=>()=>{var h;(h=d==null?void 0:d.current)==null||h.disconnect()},[]),U.createElement("div",{className:"react-flow__nodes",style:Ad},u.map(h=>{var E,R,Y;let g=h.type||"default";e.nodeTypes[g]||(a==null||a("003",An.error003(g)),g="default");const w=e.nodeTypes[g]||e.nodeTypes.default,P=!!(h.draggable||t&&typeof h.draggable>"u"),N=!!(h.selectable||o&&typeof h.selectable>"u"),S=!!(h.connectable||n&&typeof h.connectable>"u"),T=!!(h.focusable||r&&typeof h.focusable>"u"),y=e.nodeExtent?Cd(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,v=(y==null?void 0:y.x)??0,I=(y==null?void 0:y.y)??0,k=QI({x:v,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return U.createElement(w,{key:h.id,id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition||fe.Bottom,targetPosition:h.targetPosition||fe.Top,hidden:h.hidden,xPos:v,yPos:I,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:P,isSelectable:N,isConnectable:S,isFocusable:T,resizeObserver:p,dragHandle:h.dragHandle,zIndex:((E=h[Ue])==null?void 0:E.z)??0,isParent:!!((R=h[Ue])!=null&&R.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((Y=h[Ue])!=null&&Y.handleBounds)})}))};_y.displayName="NodeRenderer";var e_=W.memo(_y);const t_=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,n_=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,Ap="react-flow__edgeupdater",Lp=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:a,type:u})=>U.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:a,className:mt([Ap,`${Ap}-${u}`]),cx:t_(t,r,e),cy:n_(n,r,e),r,stroke:"transparent",fill:"transparent"}),r_=()=>!0;var Ur=e=>{const t=({id:n,className:r,type:o,data:s,onClick:a,onEdgeDoubleClick:u,selected:d,animated:p,label:h,labelStyle:g,labelShowBg:w,labelBgStyle:P,labelBgPadding:N,labelBgBorderRadius:S,style:T,source:y,target:v,sourceX:I,sourceY:k,targetX:E,targetY:R,sourcePosition:Y,targetPosition:B,elementsSelectable:$,hidden:Z,sourceHandleId:Q,targetHandleId:ne,onContextMenu:ee,onMouseEnter:b,onMouseMove:A,onMouseLeave:z,reconnectRadius:G,onReconnect:O,onReconnectStart:M,onReconnectEnd:H,markerEnd:F,markerStart:D,rfId:ie,ariaLabel:K,isFocusable:le,isReconnectable:ue,pathOptions:oe,interactionWidth:ye,disableKeyboardA11y:Pe})=>{const we=W.useRef(null),[re,ve]=W.useState(!1),[X,pe]=W.useState(!1),ae=et(),xe=W.useMemo(()=>`url('#${cu(D,ie)}')`,[D,ie]),he=W.useMemo(()=>`url('#${cu(F,ie)}')`,[F,ie]);if(Z)return null;const te=Ke=>{var It;const{edges:St,addSelectedEdges:mn,unselectNodesAndEdges:yn,multiSelectionActive:Yt}=ae.getState(),Ft=St.find(dr=>dr.id===n);Ft&&($&&(ae.setState({nodesSelectionActive:!1}),Ft.selected&&Yt?(yn({nodes:[],edges:[Ft]}),(It=we.current)==null||It.blur()):mn([n])),a&&a(Ke,Ft))},Te=Fo(n,ae.getState,u),me=Fo(n,ae.getState,ee),Ae=Fo(n,ae.getState,b),qe=Fo(n,ae.getState,A),Lt=Fo(n,ae.getState,z),zt=(Ke,St)=>{if(Ke.button!==0)return;const{edges:mn,isValidConnection:yn}=ae.getState(),Yt=St?v:y,Ft=(St?ne:Q)||null,It=St?"target":"source",dr=yn||r_,Rr=St,fr=mn.find(xn=>xn.id===n);pe(!0),M==null||M(Ke,fr,It);const Ao=xn=>{pe(!1),H==null||H(xn,fr,It)};iy({event:Ke,handleId:Ft,nodeId:Yt,onConnect:xn=>O==null?void 0:O(fr,xn),isTarget:Rr,getState:ae.getState,setState:ae.setState,isValidConnection:dr,edgeUpdaterType:It,onReconnectEnd:Ao})},Mn=Ke=>zt(Ke,!0),pn=Ke=>zt(Ke,!1),hn=()=>ve(!0),Dn=()=>ve(!1),On=!$&&!a,ur=Ke=>{var St;if(!Pe&&G0.includes(Ke.key)&&$){const{unselectNodesAndEdges:mn,addSelectedEdges:yn,edges:Yt}=ae.getState();Ke.key==="Escape"?((St=we.current)==null||St.blur(),mn({edges:[Yt.find(It=>It.id===n)]})):yn([n])}};return U.createElement("g",{className:mt(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:d,animated:p,inactive:On,updating:re}]),onClick:te,onDoubleClick:Te,onContextMenu:me,onMouseEnter:Ae,onMouseMove:qe,onMouseLeave:Lt,onKeyDown:le?ur:void 0,tabIndex:le?0:void 0,role:le?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":K===null?void 0:K||`Edge from ${y} to ${v}`,"aria-describedby":le?`${hy}-${ie}`:void 0,ref:we},!X&&U.createElement(e,{id:n,source:y,target:v,selected:d,animated:p,label:h,labelStyle:g,labelShowBg:w,labelBgStyle:P,labelBgPadding:N,labelBgBorderRadius:S,data:s,style:T,sourceX:I,sourceY:k,targetX:E,targetY:R,sourcePosition:Y,targetPosition:B,sourceHandleId:Q,targetHandleId:ne,markerStart:xe,markerEnd:he,pathOptions:oe,interactionWidth:ye}),ue&&U.createElement(U.Fragment,null,(ue==="source"||ue===!0)&&U.createElement(Lp,{position:Y,centerX:I,centerY:k,radius:G,onMouseDown:Mn,onMouseEnter:hn,onMouseOut:Dn,type:"source"}),(ue==="target"||ue===!0)&&U.createElement(Lp,{position:B,centerX:E,centerY:R,radius:G,onMouseDown:pn,onMouseEnter:hn,onMouseOut:Dn,type:"target"})))};return t.displayName="EdgeWrapper",W.memo(t)};function o_(e){const t={default:Ur(e.default||xl),straight:Ur(e.bezier||_d),step:Ur(e.step||Id),smoothstep:Ur(e.step||zl),simplebezier:Ur(e.simplebezier||Sd)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=Ur(e[s]||xl),o),n);return{...t,...r}}function jp(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case fe.Top:return{x:r+s/2,y:o};case fe.Right:return{x:r+s,y:o+a/2};case fe.Bottom:return{x:r+s/2,y:o+a};case fe.Left:return{x:r,y:o+a/2}}}function Mp(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const i_=(e,t,n,r,o,s)=>{const a=jp(n,e,t),u=jp(s,r,o);return{sourceX:a.x,sourceY:a.y,targetX:u.x,targetY:u.y}};function s_({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:a,height:u,transform:d}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const h=Pd({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:a/d[2],height:u/d[2]}),g=Math.max(0,Math.min(h.x2,p.x2)-Math.max(h.x,p.x)),w=Math.max(0,Math.min(h.y2,p.y2)-Math.max(h.y,p.y));return Math.ceil(g*w)>0}function Dp(e){var r,o,s,a,u;const t=((r=e==null?void 0:e[Ue])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const l_=[{level:0,isMaxLevel:!0,edges:[]}];function a_(e,t,n=!1){let r=-1;const o=e.reduce((a,u)=>{var h,g;const d=Ot(u.zIndex);let p=d?u.zIndex:0;if(n){const w=t.get(u.target),P=t.get(u.source),N=u.selected||(w==null?void 0:w.selected)||(P==null?void 0:P.selected),S=Math.max(((h=P==null?void 0:P[Ue])==null?void 0:h.z)||0,((g=w==null?void 0:w[Ue])==null?void 0:g.z)||0,1e3);p=(d?u.zIndex:0)+(N?S:0)}return a[p]?a[p].push(u):a[p]=[u],r=p>r?p:r,a},{}),s=Object.entries(o).map(([a,u])=>{const d=+a;return{edges:u,level:d,isMaxLevel:d===r}});return s.length===0?l_:s}function c_(e,t,n){const r=Xe(W.useCallback(o=>e?o.edges.filter(s=>{const a=t.get(s.source),u=t.get(s.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(u==null?void 0:u.width)&&(u==null?void 0:u.height)&&s_({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:u.width,targetHeight:u.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return a_(r,t,n)}const u_=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),d_=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Op={[yl.Arrow]:u_,[yl.ArrowClosed]:d_};function f_(e){const t=et();return W.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(Op,e)?Op[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",An.error009(e)),null)},[e])}const p_=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:u="auto-start-reverse"})=>{const d=f_(t);return d?U.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:u,refX:"0",refY:"0"},U.createElement(d,{color:n,strokeWidth:a})):null},h_=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const u=cu(a,t);r.includes(u)||(o.push({id:u,color:a.color||e,...a}),r.push(u))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},by=({defaultColor:e,rfId:t})=>{const n=Xe(W.useCallback(h_({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,a)=>s.id!==o[a].id)));return U.createElement("defs",null,n.map(r=>U.createElement(p_,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};by.displayName="MarkerDefinitions";var m_=W.memo(by);const y_=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ky=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:h,onEdgeDoubleClick:g,onReconnect:w,onReconnectStart:P,onReconnectEnd:N,reconnectRadius:S,children:T,disableKeyboardA11y:y})=>{const{edgesFocusable:v,edgesUpdatable:I,elementsSelectable:k,width:E,height:R,connectionMode:Y,nodeInternals:B,onError:$}=Xe(y_,ot),Z=c_(t,B,n);return E?U.createElement(U.Fragment,null,Z.map(({level:Q,edges:ne,isMaxLevel:ee})=>U.createElement("svg",{key:Q,style:{zIndex:Q},width:E,height:R,className:"react-flow__edges react-flow__container"},ee&&U.createElement(m_,{defaultColor:e,rfId:r}),U.createElement("g",null,ne.map(b=>{const[A,z,G]=Dp(B.get(b.source)),[O,M,H]=Dp(B.get(b.target));if(!G||!H)return null;let F=b.type||"default";o[F]||($==null||$("011",An.error011(F)),F="default");const D=o[F]||o.default,ie=Y===Mr.Strict?M.target:(M.target??[]).concat(M.source??[]),K=Mp(z.source,b.sourceHandle),le=Mp(ie,b.targetHandle),ue=(K==null?void 0:K.position)||fe.Bottom,oe=(le==null?void 0:le.position)||fe.Top,ye=!!(b.focusable||v&&typeof b.focusable>"u"),Pe=b.reconnectable||b.updatable,we=typeof w<"u"&&(Pe||I&&typeof Pe>"u");if(!K||!le)return $==null||$("008",An.error008(K,b)),null;const{sourceX:re,sourceY:ve,targetX:X,targetY:pe}=i_(A,K,ue,O,le,oe);return U.createElement(D,{key:b.id,id:b.id,className:mt([b.className,s]),type:F,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:re,sourceY:ve,targetX:X,targetY:pe,sourcePosition:ue,targetPosition:oe,elementsSelectable:k,onContextMenu:a,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,onClick:h,onEdgeDoubleClick:g,onReconnect:w,onReconnectStart:P,onReconnectEnd:N,reconnectRadius:S,rfId:r,ariaLabel:b.ariaLabel,isFocusable:ye,isReconnectable:we,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:y})})))),T):null};ky.displayName="EdgeRenderer";var x_=W.memo(ky);const g_=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function v_({children:e}){const t=Xe(g_);return U.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function w_(e){const t=jn(),n=W.useRef(!1);W.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const C_={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top},Ny=({nodeId:e,handleType:t,style:n,type:r=Wn.Bezier,CustomComponent:o,connectionStatus:s})=>{var R,Y,B;const{fromNode:a,handleId:u,toX:d,toY:p,connectionMode:h}=Xe(W.useCallback($=>({fromNode:$.nodeInternals.get(e),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[e]),ot),g=(R=a==null?void 0:a[Ue])==null?void 0:R.handleBounds;let w=g==null?void 0:g[t];if(h===Mr.Loose&&(w=w||(g==null?void 0:g[t==="source"?"target":"source"])),!a||!w)return null;const P=u?w.find($=>$.id===u):w[0],N=P?P.x+P.width/2:(a.width??0)/2,S=P?P.y+P.height/2:a.height??0,T=(((Y=a.positionAbsolute)==null?void 0:Y.x)??0)+N,y=(((B=a.positionAbsolute)==null?void 0:B.y)??0)+S,v=P==null?void 0:P.position,I=v?C_[v]:null;if(!v||!I)return null;if(o)return U.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:P,fromX:T,fromY:y,toX:d,toY:p,fromPosition:v,toPosition:I,connectionStatus:s});let k="";const E={sourceX:T,sourceY:y,sourcePosition:v,targetX:d,targetY:p,targetPosition:I};return r===Wn.Bezier?[k]=bd(E):r===Wn.Step?[k]=au({...E,borderRadius:0}):r===Wn.SmoothStep?[k]=au(E):r===Wn.SimpleBezier?[k]=Q0(E):k=`M${T},${y} ${d},${p}`,U.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:n})};Ny.displayName="ConnectionLine";const P_=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function S_({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:a,width:u,height:d,connectionStatus:p}=Xe(P_,ot);return!(o&&s&&u&&a)?null:U.createElement("svg",{style:e,width:u,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},U.createElement("g",{className:mt(["react-flow__connection",p])},U.createElement(Ny,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:p})))}function Rp(e,t){return W.useRef(null),et(),W.useMemo(()=>t(e),[e])}const Ey=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:a,onEdgeClick:u,onNodeDoubleClick:d,onEdgeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:w,onNodeContextMenu:P,onSelectionContextMenu:N,onSelectionStart:S,onSelectionEnd:T,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:I,connectionLineContainerStyle:k,selectionKeyCode:E,selectionOnDrag:R,selectionMode:Y,multiSelectionKeyCode:B,panActivationKeyCode:$,zoomActivationKeyCode:Z,deleteKeyCode:Q,onlyRenderVisibleElements:ne,elementsSelectable:ee,selectNodesOnDrag:b,defaultViewport:A,translateExtent:z,minZoom:G,maxZoom:O,preventScrolling:M,defaultMarkerColor:H,zoomOnScroll:F,zoomOnPinch:D,panOnScroll:ie,panOnScrollSpeed:K,panOnScrollMode:le,zoomOnDoubleClick:ue,panOnDrag:oe,onPaneClick:ye,onPaneMouseEnter:Pe,onPaneMouseMove:we,onPaneMouseLeave:re,onPaneScroll:ve,onPaneContextMenu:X,onEdgeContextMenu:pe,onEdgeMouseEnter:ae,onEdgeMouseMove:xe,onEdgeMouseLeave:he,onReconnect:te,onReconnectStart:Te,onReconnectEnd:me,reconnectRadius:Ae,noDragClassName:qe,noWheelClassName:Lt,noPanClassName:zt,elevateEdgesOnSelect:Mn,disableKeyboardA11y:pn,nodeOrigin:hn,nodeExtent:Dn,rfId:On})=>{const ur=Rp(e,KI),Ke=Rp(t,o_);return w_(s),U.createElement(ZI,{onPaneClick:ye,onPaneMouseEnter:Pe,onPaneMouseMove:we,onPaneMouseLeave:re,onPaneContextMenu:X,onPaneScroll:ve,deleteKeyCode:Q,selectionKeyCode:E,selectionOnDrag:R,selectionMode:Y,onSelectionStart:S,onSelectionEnd:T,multiSelectionKeyCode:B,panActivationKeyCode:$,zoomActivationKeyCode:Z,elementsSelectable:ee,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:D,zoomOnDoubleClick:ue,panOnScroll:ie,panOnScrollSpeed:K,panOnScrollMode:le,panOnDrag:oe,defaultViewport:A,translateExtent:z,minZoom:G,maxZoom:O,onSelectionContextMenu:N,preventScrolling:M,noDragClassName:qe,noWheelClassName:Lt,noPanClassName:zt,disableKeyboardA11y:pn},U.createElement(v_,null,U.createElement(x_,{edgeTypes:Ke,onEdgeClick:u,onEdgeDoubleClick:p,onlyRenderVisibleElements:ne,onEdgeContextMenu:pe,onEdgeMouseEnter:ae,onEdgeMouseMove:xe,onEdgeMouseLeave:he,onReconnect:te,onReconnectStart:Te,onReconnectEnd:me,reconnectRadius:Ae,defaultMarkerColor:H,noPanClassName:zt,elevateEdgesOnSelect:!!Mn,disableKeyboardA11y:pn,rfId:On},U.createElement(S_,{style:v,type:y,component:I,containerStyle:k})),U.createElement("div",{className:"react-flow__edgelabel-renderer"}),U.createElement(e_,{nodeTypes:ur,onNodeClick:a,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:w,onNodeContextMenu:P,selectNodesOnDrag:b,onlyRenderVisibleElements:ne,noPanClassName:zt,noDragClassName:qe,disableKeyboardA11y:pn,nodeOrigin:hn,nodeExtent:Dn,rfId:On})))};Ey.displayName="GraphView";var I_=W.memo(Ey);const pu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Bn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:pu,nodeExtent:pu,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Mr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:JS,isValidConnection:void 0},__=()=>fw((e,t)=>({...Bn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:qa(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",a=o?qa(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:u,domNode:d,nodeOrigin:p}=t(),h=d==null?void 0:d.querySelector(".react-flow__viewport");if(!h)return;const g=window.getComputedStyle(h),{m22:w}=new window.DOMMatrixReadOnly(g.transform),P=n.reduce((S,T)=>{const y=o.get(T.id);if(y!=null&&y.hidden)o.set(y.id,{...y,[Ue]:{...y[Ue],handleBounds:void 0}});else if(y){const v=wd(T.nodeElement);!!(v.width&&v.height&&(y.width!==v.width||y.height!==v.height||T.forceUpdate))&&(o.set(y.id,{...y,[Ue]:{...y[Ue],handleBounds:{source:Tp(".source",T.nodeElement,w,p),target:Tp(".target",T.nodeElement,w,p)}},...v}),S.push({id:y.id,type:"dimensions",dimensions:v}))}return S},[]);yy(o,p);const N=a||s&&!a&&xy(t,{initial:!0,...u});e({nodeInternals:new Map(o),fitViewOnInitDone:N}),(P==null?void 0:P.length)>0&&(r==null||r(P))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),a=n.map(u=>{const d={id:u.id,type:"position",dragging:o};return r&&(d.positionAbsolute=u.positionAbsolute,d.position=u.position),d});s(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:a,getNodes:u,elevateNodesOnSelect:d}=t();if(n!=null&&n.length){if(s){const p=gy(n,u()),h=qa(p,o,a,d);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let a,u=null;r?a=n.map(d=>$n(d,!0)):(a=oo(s(),n),u=oo(o,[])),gs({changedNodes:a,changedEdges:u,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let a,u=null;r?a=n.map(d=>$n(d,!0)):(a=oo(o,n),u=oo(s(),[])),gs({changedNodes:u,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),a=n||s(),u=r||o,d=a.map(h=>(h.selected=!1,$n(h.id,!1))),p=u.map(h=>$n(h.id,!1));gs({changedNodes:d,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(u=>u.selected).map(u=>$n(u.id,!1)),a=n.filter(u=>u.selected).map(u=>$n(u.id,!1));gs({changedNodes:s,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Cd(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:a,d3Selection:u,translateExtent:d}=t();if(!a||!u||!n.x&&!n.y)return!1;const p=rr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[o,s]],g=a==null?void 0:a.constrain()(p,h,d);return a.transform(u,g),r[0]!==g.x||r[1]!==g.y||r[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Bn.connectionNodeId,connectionHandleId:Bn.connectionHandleId,connectionHandleType:Bn.connectionHandleType,connectionStatus:Bn.connectionStatus,connectionStartHandle:Bn.connectionStartHandle,connectionEndHandle:Bn.connectionEndHandle}),reset:()=>e({...Bn})}),Object.is),Ld=({children:e})=>{const t=W.useRef(null);return t.current||(t.current=__()),U.createElement(HS,{value:t.current},e)};Ld.displayName="ReactFlowProvider";const Ty=({children:e})=>W.useContext(Bl)?U.createElement(U.Fragment,null,e):U.createElement(Ld,null,e);Ty.displayName="ReactFlowWrapper";const b_={input:cy,default:du,output:dy,group:Td},k_={default:xl,straight:_d,step:Id,smoothstep:zl,simplebezier:Sd},N_=[0,0],E_=[15,15],T_={x:0,y:0,zoom:1},A_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ay=W.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=b_,edgeTypes:a=k_,onNodeClick:u,onEdgeClick:d,onInit:p,onMove:h,onMoveStart:g,onMoveEnd:w,onConnect:P,onConnectStart:N,onConnectEnd:S,onClickConnectStart:T,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:I,onNodeMouseLeave:k,onNodeContextMenu:E,onNodeDoubleClick:R,onNodeDragStart:Y,onNodeDrag:B,onNodeDragStop:$,onNodesDelete:Z,onEdgesDelete:Q,onSelectionChange:ne,onSelectionDragStart:ee,onSelectionDrag:b,onSelectionDragStop:A,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:O,connectionMode:M=Mr.Strict,connectionLineType:H=Wn.Bezier,connectionLineStyle:F,connectionLineComponent:D,connectionLineContainerStyle:ie,deleteKeyCode:K="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:ue=!1,selectionMode:oe=Ai.Full,panActivationKeyCode:ye="Space",multiSelectionKeyCode:Pe=ml()?"Meta":"Control",zoomActivationKeyCode:we=ml()?"Meta":"Control",snapToGrid:re=!1,snapGrid:ve=E_,onlyRenderVisibleElements:X=!1,selectNodesOnDrag:pe=!0,nodesDraggable:ae,nodesConnectable:xe,nodesFocusable:he,nodeOrigin:te=N_,edgesFocusable:Te,edgesUpdatable:me,elementsSelectable:Ae,defaultViewport:qe=T_,minZoom:Lt=.5,maxZoom:zt=2,translateExtent:Mn=pu,preventScrolling:pn=!0,nodeExtent:hn,defaultMarkerColor:Dn="#b1b1b7",zoomOnScroll:On=!0,zoomOnPinch:ur=!0,panOnScroll:Ke=!1,panOnScrollSpeed:St=.5,panOnScrollMode:mn=Sr.Free,zoomOnDoubleClick:yn=!0,panOnDrag:Yt=!0,onPaneClick:Ft,onPaneMouseEnter:It,onPaneMouseMove:dr,onPaneMouseLeave:Rr,onPaneScroll:fr,onPaneContextMenu:Ao,children:Fi,onEdgeContextMenu:xn,onEdgeDoubleClick:Fl,onEdgeMouseEnter:$l,onEdgeMouseMove:Ul,onEdgeMouseLeave:Hl,onEdgeUpdate:Wl,onEdgeUpdateStart:Vl,onEdgeUpdateEnd:Gl,onReconnect:Zl,onReconnectStart:ql,onReconnectEnd:Kl,reconnectRadius:Ql=10,edgeUpdaterRadius:Jl=10,onNodesChange:ea,onEdgesChange:ta,noDragClassName:na="nodrag",noWheelClassName:ra="nowheel",noPanClassName:$i="nopan",fitView:oa=!1,fitViewOptions:ia,connectOnClick:pr=!0,attributionPosition:Ui,proOptions:sa,defaultEdgeOptions:la,elevateNodesOnSelect:aa=!0,elevateEdgesOnSelect:ca=!1,disableKeyboardA11y:Hi=!1,autoPanOnConnect:Rn=!0,autoPanOnNodeDrag:ua=!0,connectionRadius:da=20,isValidConnection:fa,onError:pa,style:ha,id:Wi,nodeDragThreshold:ma,...ya},xa)=>{const Ve=Wi||"1";return U.createElement("div",{...ya,style:{...ha,...A_},ref:xa,className:mt(["react-flow",o]),"data-testid":"rf__wrapper",id:Wi},U.createElement(Ty,null,U.createElement(I_,{onInit:p,onMove:h,onMoveStart:g,onMoveEnd:w,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:v,onNodeMouseMove:I,onNodeMouseLeave:k,onNodeContextMenu:E,onNodeDoubleClick:R,nodeTypes:s,edgeTypes:a,connectionLineType:H,connectionLineStyle:F,connectionLineComponent:D,connectionLineContainerStyle:ie,selectionKeyCode:le,selectionOnDrag:ue,selectionMode:oe,deleteKeyCode:K,multiSelectionKeyCode:Pe,panActivationKeyCode:ye,zoomActivationKeyCode:we,onlyRenderVisibleElements:X,selectNodesOnDrag:pe,defaultViewport:qe,translateExtent:Mn,minZoom:Lt,maxZoom:zt,preventScrolling:pn,zoomOnScroll:On,zoomOnPinch:ur,zoomOnDoubleClick:yn,panOnScroll:Ke,panOnScrollSpeed:St,panOnScrollMode:mn,panOnDrag:Yt,onPaneClick:Ft,onPaneMouseEnter:It,onPaneMouseMove:dr,onPaneMouseLeave:Rr,onPaneScroll:fr,onPaneContextMenu:Ao,onSelectionContextMenu:z,onSelectionStart:G,onSelectionEnd:O,onEdgeContextMenu:xn,onEdgeDoubleClick:Fl,onEdgeMouseEnter:$l,onEdgeMouseMove:Ul,onEdgeMouseLeave:Hl,onReconnect:Zl??Wl,onReconnectStart:ql??Vl,onReconnectEnd:Kl??Gl,reconnectRadius:Ql??Jl,defaultMarkerColor:Dn,noDragClassName:na,noWheelClassName:ra,noPanClassName:$i,elevateEdgesOnSelect:ca,rfId:Ve,disableKeyboardA11y:Hi,nodeOrigin:te,nodeExtent:hn}),U.createElement(CI,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:P,onConnectStart:N,onConnectEnd:S,onClickConnectStart:T,onClickConnectEnd:y,nodesDraggable:ae,nodesConnectable:xe,nodesFocusable:he,edgesFocusable:Te,edgesUpdatable:me,elementsSelectable:Ae,elevateNodesOnSelect:aa,minZoom:Lt,maxZoom:zt,nodeExtent:hn,onNodesChange:ea,onEdgesChange:ta,snapToGrid:re,snapGrid:ve,connectionMode:M,translateExtent:Mn,connectOnClick:pr,defaultEdgeOptions:la,fitView:oa,fitViewOptions:ia,onNodesDelete:Z,onEdgesDelete:Q,onNodeDragStart:Y,onNodeDrag:B,onNodeDragStop:$,onSelectionDrag:b,onSelectionDragStart:ee,onSelectionDragStop:A,noPanClassName:$i,nodeOrigin:te,rfId:Ve,autoPanOnConnect:Rn,autoPanOnNodeDrag:ua,onError:pa,connectionRadius:da,isValidConnection:fa,nodeDragThreshold:ma}),U.createElement(vI,{onSelectionChange:ne}),Fi,U.createElement(VS,{proOptions:sa,position:Ui}),U.createElement(bI,{rfId:Ve,disableKeyboardA11y:Hi})))});Ay.displayName="ReactFlow";const L_=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Yi(){return Xe(L_,ot)}function j_(e){return t=>{const[n,r]=W.useState(t),o=W.useCallback(s=>r(a=>e(s,a)),[]);return[n,r,o]}}const M_=j_(gy);function D_(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},U.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function O_(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},U.createElement("path",{d:"M0 0h32v4.2H0z"}))}function R_(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},U.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function X_(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function B_(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Qo=({children:e,className:t,...n})=>U.createElement("button",{type:"button",className:mt(["react-flow__controls-button",t]),...n},e);Qo.displayName="ControlButton";const z_=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ly=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:a,onFitView:u,onInteractiveChange:d,className:p,children:h,position:g="bottom-left"})=>{const w=et(),[P,N]=W.useState(!1),{isInteractive:S,minZoomReached:T,maxZoomReached:y}=Xe(z_,ot),{zoomIn:v,zoomOut:I,fitView:k}=jn();if(W.useEffect(()=>{N(!0)},[]),!P)return null;const E=()=>{v(),s==null||s()},R=()=>{I(),a==null||a()},Y=()=>{k(o),u==null||u()},B=()=>{w.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),d==null||d(!S)};return U.createElement(H0,{className:mt(["react-flow__controls",p]),position:g,style:e,"data-testid":"rf__controls"},t&&U.createElement(U.Fragment,null,U.createElement(Qo,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},U.createElement(D_,null)),U.createElement(Qo,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:T},U.createElement(O_,null))),n&&U.createElement(Qo,{className:"react-flow__controls-fitview",onClick:Y,title:"fit view","aria-label":"fit view"},U.createElement(R_,null)),r&&U.createElement(Qo,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity"},S?U.createElement(B_,null):U.createElement(X_,null)),h)};Ly.displayName="Controls";var Y_=W.memo(Ly),Kt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Kt||(Kt={}));function F_({color:e,dimensions:t,lineWidth:n}){return U.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function $_({color:e,radius:t}){return U.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const U_={[Kt.Dots]:"#91919a",[Kt.Lines]:"#eee",[Kt.Cross]:"#e2e2e2"},H_={[Kt.Dots]:1,[Kt.Lines]:1,[Kt.Cross]:6},W_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jy({id:e,variant:t=Kt.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:a,style:u,className:d}){const p=W.useRef(null),{transform:h,patternId:g}=Xe(W_,ot),w=a||U_[t],P=r||H_[t],N=t===Kt.Dots,S=t===Kt.Cross,T=Array.isArray(n)?n:[n,n],y=[T[0]*h[2]||1,T[1]*h[2]||1],v=P*h[2],I=S?[v,v]:y,k=N?[v/s,v/s]:[I[0]/s,I[1]/s];return U.createElement("svg",{className:mt(["react-flow__background",d]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},U.createElement("pattern",{id:g+e,x:h[0]%y[0],y:h[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},N?U.createElement($_,{color:w,radius:v/s}):U.createElement(F_,{dimensions:I,color:w,lineWidth:o})),U.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}jy.displayName="Background";var V_=W.memo(jy);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),My=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=W.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:a,...u},d)=>W.createElement("svg",{ref:d,...Z_,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:My("lucide",o),...u},[...a.map(([p,h])=>W.createElement(p,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const n=W.forwardRef(({className:r,...o},s)=>W.createElement(q_,{ref:s,iconNode:t,className:My(`lucide-${G_(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=Be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=Be("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Be("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Be("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Be("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Be("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ft(e){if(!e||typeof e!="string")return new Date().getFullYear();const t=e.match(/^(\d{4})(?:-Q([1-4]))?$/);if(!t)return new Date().getFullYear();const n=parseInt(t[1],10),r=t[2]?parseInt(t[2],10):null,o=r!==null?(r-1)/4:.375;return n+o}function Xy(e,t,n){const r=ft(e),o=ft(t),s=ft(n);return s===o?0:(r-o)/(s-o)}function Xp(e,t,n){return e+(t-e)*n}function By(e,t){const n=ft(e);let r=null,o=-1/0;for(const s of t){const a=ft(s.date);a<=n&&a>o&&(r=s,o=a)}return r}function zy(e,t){const n=ft(e);let r=null,o=1/0;for(const s of t){const a=ft(s.date);a>=n&&a<o&&(r=s,o=a)}return r}function nc(e,t){if(t.length===0)return null;const n=ft(e);let r=t[0],o=Math.abs(ft(t[0].date)-n);for(const s of t){const a=Math.abs(ft(s.date)-n);a<o&&(r=s,o=a)}return r}function rc(e,t,n=.05){const r=ft(e),o=ft(t.date);return Math.abs(r-o)<n*5}function Yy(e,t,n,r){if(n.length===0)return r;const o=By(t,n),s=zy(t,n);if(!o&&!s||!o)return r;if(!s||o===s)return o.positions[e]||r;const a=o.positions[e]||r,u=s.positions[e]||r,d=Xy(t,o.date,s.date);return{x:Xp(a.x,u.x,d),y:Xp(a.y,u.y,d)}}function pb(e,t,n){if(n.length===0)return 1;const r=By(t,n),o=zy(t,n);if(!r)return 1;if(!o||r===o)return r.activeContextIds.includes(e)?1:0;const s=r.activeContextIds.includes(e),a=o.activeContextIds.includes(e);if(s&&a)return 1;if(!s&&!a)return 0;const u=Xy(t,r.date,o.date);return s&&!a?1-u:u}function hb(){var Pe,we;const e=q(re=>re.activeProjectId),t=q(re=>e?re.projects[e]:void 0),n=q(re=>re.activeViewMode),r=q(re=>re.temporal.currentDate),o=q(re=>re.temporal.activeKeyframeId),s=q(re=>re.setCurrentDate),a=q(re=>re.setActiveKeyframe),u=q(re=>re.updateKeyframe),d=q(re=>re.deleteKeyframe),p=q(re=>re.addKeyframe),h=W.useRef(null),[g,w]=W.useState(!1),[P,N]=W.useState(null),[S,T]=W.useState(""),[y,v]=W.useState(null),[I,k]=W.useState(!1),E=W.useRef(null),R=W.useMemo(()=>{var ve;return(((ve=t==null?void 0:t.temporal)==null?void 0:ve.keyframes)||[]).filter(X=>X&&typeof X.date=="string"&&X.date.length>0)},[(Pe=t==null?void 0:t.temporal)==null?void 0:Pe.keyframes]),Y=new Date().getFullYear(),B=R.map(re=>parseInt(re.date.split("-")[0])),$=Math.min(Y,...B),Z=Math.max(Y+10,...B),Q=Z-$,ne=re=>{const ve=re/100,X=$+ve*Q,pe=Math.floor(X),ae=X-pe,xe=Math.min(4,Math.floor(ae*4)+1);return`${pe}-Q${xe}`},ee=re=>(ft(re)-$)/Q*100,b=re=>{if(!h.current)return;const ve=h.current.getBoundingClientRect(),pe=(re.clientX-ve.left)/ve.width*100,ae=ne(Math.max(0,Math.min(100,pe))),xe=nc(ae,R);xe&&rc(ae,xe)?(s(xe.date),a(xe.id)):(s(ae),a(null))},A=re=>{if(!h.current)return;const ve=h.current.getBoundingClientRect(),pe=(re.clientX-ve.left)/ve.width*100,ae=ne(Math.max(0,Math.min(100,pe))),xe=nc(ae,R);if(xe&&rc(ae,xe))return;const he=p(ae,void 0);he&&(s(ae),a(he))},z=re=>{w(!0),b(re)},G=re=>{if(!g||!h.current)return;const ve=h.current.getBoundingClientRect(),pe=(re.clientX-ve.left)/ve.width*100,ae=ne(Math.max(0,Math.min(100,pe)));s(ae),a(null)},O=()=>{w(!1)},M=(re,ve)=>{re.stopPropagation(),N(ve.id),T(ve.label||"")},H=(re,ve)=>{re.preventDefault(),re.stopPropagation(),v({keyframe:ve,x:re.clientX,y:re.clientY})},F=(re,ve)=>{u(re,{label:ve.trim()||void 0}),N(null)},D=re=>{const X=`${parseInt(re.date.split("-")[0])+1}`;if(R.some(pe=>pe.date===X)){alert("A keyframe already exists at that date");return}p(X,re.label?`${re.label} (copy)`:void 0),v(null)},ie=re=>{window.confirm(`Delete keyframe "${re.label||re.date}"?`)&&d(re.id),v(null)},K=()=>{s(Y.toString()),a(null)},le=()=>{const re=Y.toString();s(re);const ve=nc(re,R);ve&&rc(re,ve)?a(ve.id):a(null)},ue=()=>{if(I)E.current&&(clearInterval(E.current),E.current=null),k(!1);else{if(R.length===0)return;k(!0),a(null)}};if(W.useEffect(()=>{if(!I)return;const re=R;if(re.length===0){k(!1);return}const ve=r||Y.toString(),X=re[re.length-1],pe=ft(ve),ae=ft(X.date);if(pe>=ae){const te=re[0];s(te.date),k(!1);return}const xe=200;let he=pe;return E.current=window.setInterval(()=>{const te=ae;if(he+=.25,he>=te){s(X.date),k(!1),E.current&&(clearInterval(E.current),E.current=null);return}const me=Math.floor(he),Ae=he-me,qe=Math.min(4,Math.floor(Ae*4)+1),Lt=`${me}-Q${qe}`;s(Lt)},xe),()=>{E.current&&(clearInterval(E.current),E.current=null)}},[I]),W.useEffect(()=>{const re=()=>v(null);if(y)return window.addEventListener("click",re),()=>window.removeEventListener("click",re)},[y]),W.useEffect(()=>{if(g)return window.addEventListener("mousemove",G),window.addEventListener("mouseup",O),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",O)}},[g,$,Z,Q]),n!=="strategic"||!((we=t==null?void 0:t.temporal)!=null&&we.enabled))return null;const oe=ee(r||Y.toString()),ye=o?R.find(re=>re.id===o):null;return x.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-white dark:bg-neutral-800 border-t border-slate-200 dark:border-neutral-700 flex items-center gap-4 px-8 z-20",children:[x.jsx("button",{onClick:ue,disabled:R.length===0,className:"flex items-center justify-center w-10 h-10 text-white bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed rounded-md transition-colors shadow-md",title:I?"Pause animation":"Play animation",children:I?x.jsx(ib,{size:20}):x.jsx(sb,{size:20})}),x.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-neutral-700 rounded-md transition-colors border border-slate-300 dark:border-neutral-600",title:"Jump to current year",children:[x.jsx(Q_,{size:16}),"Now"]}),x.jsxs("div",{className:"relative flex-1 h-16",children:[x.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex items-center",children:Array.from({length:Q+1},(re,ve)=>$+ve).map(re=>{const ve=(re-$)/Q*100,X=re===Y;return x.jsxs("div",{className:"absolute",style:{left:`${ve}%`,transform:"translateX(-50%)"},children:[x.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:re}),X&&x.jsx("div",{className:"absolute top-6 w-px h-3 bg-blue-500",style:{left:"50%",transform:"translateX(-50%)"}})]},re)})}),x.jsxs("div",{ref:h,className:"absolute top-10 left-0 right-0 h-2 bg-slate-200 dark:bg-neutral-700 rounded-full cursor-pointer",onMouseDown:z,onDoubleClick:A,children:[R.map(re=>{const ve=ee(re.date),X=P===re.id;return x.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2",style:{left:`${ve}%`,transform:"translateX(-50%)"},children:[x.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white dark:border-neutral-800 cursor-pointer hover:scale-125 transition-transform shadow-md ${re.id===o?"bg-blue-600 scale-125":"bg-blue-500"}`,onClick:pe=>M(pe,re),onContextMenu:pe=>H(pe,re),title:X?void 0:`${re.date}${re.label?` - ${re.label}`:""}
Click to edit label, right-click for options`}),X&&x.jsx("input",{type:"text",value:S,onChange:pe=>T(pe.target.value),onBlur:()=>F(re.id,S),onKeyDown:pe=>{pe.key==="Enter"?F(re.id,S):pe.key==="Escape"&&N(null)},autoFocus:!0,placeholder:re.date,className:"absolute top-6 left-1/2 -translate-x-1/2 w-32 px-2 py-1 text-xs bg-white dark:bg-neutral-800 border border-blue-500 rounded shadow-lg text-slate-900 dark:text-slate-100 focus:outline-none z-50",onClick:pe=>pe.stopPropagation()})]},re.id)}),x.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 w-5 h-5 rounded-full border-2 cursor-grab active:cursor-grabbing z-10 transition-all duration-200 ${o?"bg-blue-600 border-white dark:border-neutral-800 shadow-[0_0_0_4px_rgba(59,130,246,0.3),0_4px_12px_rgba(0,0,0,0.2)]":"bg-slate-700 dark:bg-slate-300 border-white dark:border-neutral-800 shadow-lg"}`,style:{left:`${oe}%`,transform:"translate(-50%, -50%)"}})]}),x.jsx("div",{className:"absolute top-14 left-1/2 -translate-x-1/2 text-center",children:R.length===0?x.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Double-click on timeline to add a keyframe"}):o?x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"space-y-0.5",children:[x.jsxs("div",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[" Editing: ",(ye==null?void 0:ye.label)||(ye==null?void 0:ye.date)]}),x.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Drag contexts to set positions for this keyframe"})]}),x.jsxs("button",{onClick:K,className:"flex items-center gap-1.5 px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-md transition-colors shadow-md",title:"Exit keyframe editing mode",children:[x.jsx(ln,{size:16}),"Exit"]})]}):x.jsxs("div",{className:"space-y-0.5",children:[x.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:r||Y.toString()}),x.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Drag to scrub  Double-click to create keyframe"})]})})]}),y&&x.jsxs("div",{className:"fixed bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded-md shadow-lg py-1 z-50",style:{left:y.x,top:y.y},onClick:re=>re.stopPropagation(),children:[x.jsxs("button",{onClick:()=>D(y.keyframe),className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-neutral-700 flex items-center gap-2",children:[x.jsx(eb,{size:14}),"Duplicate keyframe"]}),x.jsxs("button",{onClick:()=>ie(y.keyframe),className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[x.jsx(vn,{size:14}),"Delete keyframe"]})]})]})}function mb(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function yb(e,t){return e[0]-t[0]||e[1]-t[1]}function Bp(e){const t=e.length,n=[0,1];let r=2,o;for(o=2;o<t;++o){for(;r>1&&mb(e[n[r-2]],e[n[r-1]],e[o])<=0;)--r;n[r++]=o}return n.slice(0,r)}function xb(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),o=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(yb),t=0;t<n;++t)o[t]=[r[t][0],-r[t][1]];var s=Bp(r),a=Bp(o),u=a[0]===s[0],d=a[a.length-1]===s[s.length-1],p=[];for(t=s.length-1;t>=0;--t)p.push(e[r[s[t]][2]]);for(t=+u;t<a.length-d;++t)p.push(e[r[a[t]][2]]);return p}function Hr(e){return function(){return e}}const zp=1e-12,mu=Math.PI,yu=2*mu,gr=1e-6,gb=yu-gr;function Fy(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vb(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Fy;const n=10**t;return function(r){this._+=r[0];for(let o=1,s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class wb{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Fy:vb(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,s,a){this._append`C${+t},${+n},${+r},${+o},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,o,s){if(t=+t,n=+n,r=+r,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,d=r-t,p=o-n,h=a-t,g=u-n,w=h*h+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(w>gr)if(!(Math.abs(g*d-p*h)>gr)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let P=r-a,N=o-u,S=d*d+p*p,T=P*P+N*N,y=Math.sqrt(S),v=Math.sqrt(w),I=s*Math.tan((mu-Math.acos((S+w-T)/(2*y*v)))/2),k=I/v,E=I/y;Math.abs(k-1)>gr&&this._append`L${t+k*h},${n+k*g}`,this._append`A${s},${s},0,0,${+(g*P>h*N)},${this._x1=t+E*d},${this._y1=n+E*p}`}}arc(t,n,r,o,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(o),d=r*Math.sin(o),p=t+u,h=n+d,g=1^a,w=a?o-s:s-o;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>gr||Math.abs(this._y1-h)>gr)&&this._append`L${p},${h}`,r&&(w<0&&(w=w%yu+yu),w>gb?this._append`A${r},${r},0,1,${g},${t-u},${n-d}A${r},${r},0,1,${g},${this._x1=p},${this._y1=h}`:w>gr&&this._append`A${r},${r},0,${+(w>=mu)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function Cb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wb(t)}function Pb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $y(e){this._context=e}$y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sb(e){return new $y(e)}function Ib(e){return e[0]}function _b(e){return e[1]}function Yp(e,t){var n=Hr(!0),r=null,o=Sb,s=null,a=Cb(u);e=typeof e=="function"?e:e===void 0?Ib:Hr(e),t=typeof t=="function"?t:t===void 0?_b:Hr(t);function u(d){var p,h=(d=Pb(d)).length,g,w=!1,P;for(r==null&&(s=o(P=a())),p=0;p<=h;++p)!(p<h&&n(g=d[p],p,d))===w&&((w=!w)?s.lineStart():s.lineEnd()),w&&s.point(+e(g,p,d),+t(g,p,d));if(P)return s=null,P+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Hr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Hr(+d),u):t},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Hr(!!d),u):n},u.curve=function(d){return arguments.length?(o=d,r!=null&&(s=o(r)),u):o},u.context=function(d){return arguments.length?(d==null?r=s=null:s=o(r=d),u):r},u}function Fp(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function jd(e,t){this._context=e,this._k=(1-t)/6}jd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Fp(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Fp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(r){return new jd(r,t)}return n.tension=function(r){return e(+r)},n})(0);function bb(e,t,n){var r=e._x1,o=e._y1,s=e._x2,a=e._y2;if(e._l01_a>zp){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,o=(o*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>zp){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/h,a=(a*p+e._y1*e._l23_2a-n*e._l12_2a)/h}e._context.bezierCurveTo(r,o,s,a,e._x2,e._y2)}function Uy(e,t){this._context=e,this._alpha=t}Uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:bb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $p=function e(t){function n(r){return t?new Uy(r,t):new jd(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);var Hy={exports:{}};(function(e){(function(){var t={};t.version="6.4.2.2",t.use_lines=!0,t.use_xyz=!1;var n=!1;e.exports?(e.exports=t,n=!0):typeof document<"u"?window.ClipperLib=t:self.ClipperLib=t;var r;if(n){var o="chrome";r="Netscape"}else{var o=navigator.userAgent.toString().toLowerCase();r=navigator.appName}var s={};o.indexOf("chrome")!=-1&&o.indexOf("chromium")==-1?s.chrome=1:s.chrome=0,o.indexOf("chromium")!=-1?s.chromium=1:s.chromium=0,o.indexOf("safari")!=-1&&o.indexOf("chrome")==-1&&o.indexOf("chromium")==-1?s.safari=1:s.safari=0,o.indexOf("firefox")!=-1?s.firefox=1:s.firefox=0,o.indexOf("firefox/17")!=-1?s.firefox17=1:s.firefox17=0,o.indexOf("firefox/15")!=-1?s.firefox15=1:s.firefox15=0,o.indexOf("firefox/3")!=-1?s.firefox3=1:s.firefox3=0,o.indexOf("opera")!=-1?s.opera=1:s.opera=0,o.indexOf("msie 10")!=-1?s.msie10=1:s.msie10=0,o.indexOf("msie 9")!=-1?s.msie9=1:s.msie9=0,o.indexOf("msie 8")!=-1?s.msie8=1:s.msie8=0,o.indexOf("msie 7")!=-1?s.msie7=1:s.msie7=0,o.indexOf("msie ")!=-1?s.msie=1:s.msie=0,t.biginteger_used=null;var a;function u(i,l,c){t.biginteger_used=1,i!=null&&(typeof i=="number"&&typeof l>"u"?this.fromInt(i):typeof i=="number"?this.fromNumber(i,l,c):l==null&&typeof i!="string"?this.fromString(i,256):this.fromString(i,l))}function d(){return new u(null,void 0,void 0)}function p(i,l,c,f,m,C){for(;--C>=0;){var _=l*this[i++]+c[f]+m;m=Math.floor(_/67108864),c[f++]=_&67108863}return m}function h(i,l,c,f,m,C){for(var _=l&32767,L=l>>15;--C>=0;){var j=this[i]&32767,V=this[i++]>>15,se=L*j+V*_;j=_*j+((se&32767)<<15)+c[f]+(m&1073741823),m=(j>>>30)+(se>>>15)+L*V+(m>>>30),c[f++]=j&1073741823}return m}function g(i,l,c,f,m,C){for(var _=l&16383,L=l>>14;--C>=0;){var j=this[i]&16383,V=this[i++]>>14,se=L*j+V*_;j=_*j+((se&16383)<<14)+c[f]+m,m=(j>>28)+(se>>14)+L*V,c[f++]=j&268435455}return m}r=="Microsoft Internet Explorer"?(u.prototype.am=h,a=30):r!="Netscape"?(u.prototype.am=p,a=26):(u.prototype.am=g,a=28),u.prototype.DB=a,u.prototype.DM=(1<<a)-1,u.prototype.DV=1<<a;var w=52;u.prototype.FV=Math.pow(2,w),u.prototype.F1=w-a,u.prototype.F2=2*a-w;var P="0123456789abcdefghijklmnopqrstuvwxyz",N=new Array,S,T;for(S=48,T=0;T<=9;++T)N[S++]=T;for(S=97,T=10;T<36;++T)N[S++]=T;for(S=65,T=10;T<36;++T)N[S++]=T;function y(i){return P.charAt(i)}function v(i,l){var c=N[i.charCodeAt(l)];return c??-1}function I(i){for(var l=this.t-1;l>=0;--l)i[l]=this[l];i.t=this.t,i.s=this.s}function k(i){this.t=1,this.s=i<0?-1:0,i>0?this[0]=i:i<-1?this[0]=i+this.DV:this.t=0}function E(i){var l=d();return l.fromInt(i),l}function R(i,l){var c;if(l==16)c=4;else if(l==8)c=3;else if(l==256)c=8;else if(l==2)c=1;else if(l==32)c=5;else if(l==4)c=2;else{this.fromRadix(i,l);return}this.t=0,this.s=0;for(var f=i.length,m=!1,C=0;--f>=0;){var _=c==8?i[f]&255:v(i,f);if(_<0){i.charAt(f)=="-"&&(m=!0);continue}m=!1,C==0?this[this.t++]=_:C+c>this.DB?(this[this.t-1]|=(_&(1<<this.DB-C)-1)<<C,this[this.t++]=_>>this.DB-C):this[this.t-1]|=_<<C,C+=c,C>=this.DB&&(C-=this.DB)}c==8&&i[0]&128&&(this.s=-1,C>0&&(this[this.t-1]|=(1<<this.DB-C)-1<<C)),this.clamp(),m&&u.ZERO.subTo(this,this)}function Y(){for(var i=this.s&this.DM;this.t>0&&this[this.t-1]==i;)--this.t}function B(i){if(this.s<0)return"-"+this.negate().toString(i);var l;if(i==16)l=4;else if(i==8)l=3;else if(i==2)l=1;else if(i==32)l=5;else if(i==4)l=2;else return this.toRadix(i);var c=(1<<l)-1,f,m=!1,C="",_=this.t,L=this.DB-_*this.DB%l;if(_-- >0)for(L<this.DB&&(f=this[_]>>L)>0&&(m=!0,C=y(f));_>=0;)L<l?(f=(this[_]&(1<<L)-1)<<l-L,f|=this[--_]>>(L+=this.DB-l)):(f=this[_]>>(L-=l)&c,L<=0&&(L+=this.DB,--_)),f>0&&(m=!0),m&&(C+=y(f));return m?C:"0"}function $(){var i=d();return u.ZERO.subTo(this,i),i}function Z(){return this.s<0?this.negate():this}function Q(i){var l=this.s-i.s;if(l!=0)return l;var c=this.t;if(l=c-i.t,l!=0)return this.s<0?-l:l;for(;--c>=0;)if((l=this[c]-i[c])!=0)return l;return 0}function ne(i){var l=1,c;return(c=i>>>16)!=0&&(i=c,l+=16),(c=i>>8)!=0&&(i=c,l+=8),(c=i>>4)!=0&&(i=c,l+=4),(c=i>>2)!=0&&(i=c,l+=2),(c=i>>1)!=0&&(i=c,l+=1),l}function ee(){return this.t<=0?0:this.DB*(this.t-1)+ne(this[this.t-1]^this.s&this.DM)}function b(i,l){var c;for(c=this.t-1;c>=0;--c)l[c+i]=this[c];for(c=i-1;c>=0;--c)l[c]=0;l.t=this.t+i,l.s=this.s}function A(i,l){for(var c=i;c<this.t;++c)l[c-i]=this[c];l.t=Math.max(this.t-i,0),l.s=this.s}function z(i,l){var c=i%this.DB,f=this.DB-c,m=(1<<f)-1,C=Math.floor(i/this.DB),_=this.s<<c&this.DM,L;for(L=this.t-1;L>=0;--L)l[L+C+1]=this[L]>>f|_,_=(this[L]&m)<<c;for(L=C-1;L>=0;--L)l[L]=0;l[C]=_,l.t=this.t+C+1,l.s=this.s,l.clamp()}function G(i,l){l.s=this.s;var c=Math.floor(i/this.DB);if(c>=this.t){l.t=0;return}var f=i%this.DB,m=this.DB-f,C=(1<<f)-1;l[0]=this[c]>>f;for(var _=c+1;_<this.t;++_)l[_-c-1]|=(this[_]&C)<<m,l[_-c]=this[_]>>f;f>0&&(l[this.t-c-1]|=(this.s&C)<<m),l.t=this.t-c,l.clamp()}function O(i,l){for(var c=0,f=0,m=Math.min(i.t,this.t);c<m;)f+=this[c]-i[c],l[c++]=f&this.DM,f>>=this.DB;if(i.t<this.t){for(f-=i.s;c<this.t;)f+=this[c],l[c++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;c<i.t;)f-=i[c],l[c++]=f&this.DM,f>>=this.DB;f-=i.s}l.s=f<0?-1:0,f<-1?l[c++]=this.DV+f:f>0&&(l[c++]=f),l.t=c,l.clamp()}function M(i,l){var c=this.abs(),f=i.abs(),m=c.t;for(l.t=m+f.t;--m>=0;)l[m]=0;for(m=0;m<f.t;++m)l[m+c.t]=c.am(0,f[m],l,m,0,c.t);l.s=0,l.clamp(),this.s!=i.s&&u.ZERO.subTo(l,l)}function H(i){for(var l=this.abs(),c=i.t=2*l.t;--c>=0;)i[c]=0;for(c=0;c<l.t-1;++c){var f=l.am(c,l[c],i,2*c,0,1);(i[c+l.t]+=l.am(c+1,2*l[c],i,2*c+1,f,l.t-c-1))>=l.DV&&(i[c+l.t]-=l.DV,i[c+l.t+1]=1)}i.t>0&&(i[i.t-1]+=l.am(c,l[c],i,2*c,0,1)),i.s=0,i.clamp()}function F(i,l,c){var f=i.abs();if(!(f.t<=0)){var m=this.abs();if(m.t<f.t){l!=null&&l.fromInt(0),c!=null&&this.copyTo(c);return}c==null&&(c=d());var C=d(),_=this.s,L=i.s,j=this.DB-ne(f[f.t-1]);j>0?(f.lShiftTo(j,C),m.lShiftTo(j,c)):(f.copyTo(C),m.copyTo(c));var V=C.t,se=C[V-1];if(se!=0){var J=se*(1<<this.F1)+(V>1?C[V-2]>>this.F2:0),de=this.FV/J,Ce=(1<<this.F1)/J,_e=1<<this.F2,ke=c.t,je=ke-V,yt=l??d();for(C.dlShiftTo(je,yt),c.compareTo(yt)>=0&&(c[c.t++]=1,c.subTo(yt,c)),u.ONE.dlShiftTo(V,yt),yt.subTo(C,C);C.t<V;)C[C.t++]=0;for(;--je>=0;){var en=c[--ke]==se?this.DM:Math.floor(c[ke]*de+(c[ke-1]+_e)*Ce);if((c[ke]+=C.am(0,en,c,je,0,V))<en)for(C.dlShiftTo(je,yt),c.subTo(yt,c);c[ke]<--en;)c.subTo(yt,c)}l!=null&&(c.drShiftTo(V,l),_!=L&&u.ZERO.subTo(l,l)),c.t=V,c.clamp(),j>0&&c.rShiftTo(j,c),_<0&&u.ZERO.subTo(c,c)}}}function D(i){var l=d();return this.abs().divRemTo(i,null,l),this.s<0&&l.compareTo(u.ZERO)>0&&i.subTo(l,l),l}function ie(i){this.m=i}function K(i){return i.s<0||i.compareTo(this.m)>=0?i.mod(this.m):i}function le(i){return i}function ue(i){i.divRemTo(this.m,null,i)}function oe(i,l,c){i.multiplyTo(l,c),this.reduce(c)}function ye(i,l){i.squareTo(l),this.reduce(l)}ie.prototype.convert=K,ie.prototype.revert=le,ie.prototype.reduce=ue,ie.prototype.mulTo=oe,ie.prototype.sqrTo=ye;function Pe(){if(this.t<1)return 0;var i=this[0];if(!(i&1))return 0;var l=i&3;return l=l*(2-(i&15)*l)&15,l=l*(2-(i&255)*l)&255,l=l*(2-((i&65535)*l&65535))&65535,l=l*(2-i*l%this.DV)%this.DV,l>0?this.DV-l:-l}function we(i){this.m=i,this.mp=i.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<i.DB-15)-1,this.mt2=2*i.t}function re(i){var l=d();return i.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),i.s<0&&l.compareTo(u.ZERO)>0&&this.m.subTo(l,l),l}function ve(i){var l=d();return i.copyTo(l),this.reduce(l),l}function X(i){for(;i.t<=this.mt2;)i[i.t++]=0;for(var l=0;l<this.m.t;++l){var c=i[l]&32767,f=c*this.mpl+((c*this.mph+(i[l]>>15)*this.mpl&this.um)<<15)&i.DM;for(c=l+this.m.t,i[c]+=this.m.am(0,f,i,l,0,this.m.t);i[c]>=i.DV;)i[c]-=i.DV,i[++c]++}i.clamp(),i.drShiftTo(this.m.t,i),i.compareTo(this.m)>=0&&i.subTo(this.m,i)}function pe(i,l){i.squareTo(l),this.reduce(l)}function ae(i,l,c){i.multiplyTo(l,c),this.reduce(c)}we.prototype.convert=re,we.prototype.revert=ve,we.prototype.reduce=X,we.prototype.mulTo=ae,we.prototype.sqrTo=pe;function xe(){return(this.t>0?this[0]&1:this.s)==0}function he(i,l){if(i>4294967295||i<1)return u.ONE;var c=d(),f=d(),m=l.convert(this),C=ne(i)-1;for(m.copyTo(c);--C>=0;)if(l.sqrTo(c,f),(i&1<<C)>0)l.mulTo(f,m,c);else{var _=c;c=f,f=_}return l.revert(c)}function te(i,l){var c;return i<256||l.isEven()?c=new ie(l):c=new we(l),this.exp(i,c)}u.prototype.copyTo=I,u.prototype.fromInt=k,u.prototype.fromString=R,u.prototype.clamp=Y,u.prototype.dlShiftTo=b,u.prototype.drShiftTo=A,u.prototype.lShiftTo=z,u.prototype.rShiftTo=G,u.prototype.subTo=O,u.prototype.multiplyTo=M,u.prototype.squareTo=H,u.prototype.divRemTo=F,u.prototype.invDigit=Pe,u.prototype.isEven=xe,u.prototype.exp=he,u.prototype.toString=B,u.prototype.negate=$,u.prototype.abs=Z,u.prototype.compareTo=Q,u.prototype.bitLength=ee,u.prototype.mod=D,u.prototype.modPowInt=te,u.ZERO=E(0),u.ONE=E(1);function Te(){var i=d();return this.copyTo(i),i}function me(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ae(){return this.t==0?this.s:this[0]<<24>>24}function qe(){return this.t==0?this.s:this[0]<<16>>16}function Lt(i){return Math.floor(Math.LN2*this.DB/Math.log(i))}function zt(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Mn(i){if(i==null&&(i=10),this.signum()==0||i<2||i>36)return"0";var l=this.chunkSize(i),c=Math.pow(i,l),f=E(c),m=d(),C=d(),_="";for(this.divRemTo(f,m,C);m.signum()>0;)_=(c+C.intValue()).toString(i).substr(1)+_,m.divRemTo(f,m,C);return C.intValue().toString(i)+_}function pn(i,l){this.fromInt(0),l==null&&(l=10);for(var c=this.chunkSize(l),f=Math.pow(l,c),m=!1,C=0,_=0,L=0;L<i.length;++L){var j=v(i,L);if(j<0){i.charAt(L)=="-"&&this.signum()==0&&(m=!0);continue}_=l*_+j,++C>=c&&(this.dMultiply(f),this.dAddOffset(_,0),C=0,_=0)}C>0&&(this.dMultiply(Math.pow(l,C)),this.dAddOffset(_,0)),m&&u.ZERO.subTo(this,this)}function hn(i,l,c){if(typeof l=="number")if(i<2)this.fromInt(1);else for(this.fromNumber(i,c),this.testBit(i-1)||this.bitwiseTo(u.ONE.shiftLeft(i-1),Yt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>i&&this.subTo(u.ONE.shiftLeft(i-1),this);else{var f=new Array,m=i&7;f.length=(i>>3)+1,l.nextBytes(f),m>0?f[0]&=(1<<m)-1:f[0]=0,this.fromString(f,256)}}function Dn(){var i=this.t,l=new Array;l[0]=this.s;var c=this.DB-i*this.DB%8,f,m=0;if(i-- >0)for(c<this.DB&&(f=this[i]>>c)!=(this.s&this.DM)>>c&&(l[m++]=f|this.s<<this.DB-c);i>=0;)c<8?(f=(this[i]&(1<<c)-1)<<8-c,f|=this[--i]>>(c+=this.DB-8)):(f=this[i]>>(c-=8)&255,c<=0&&(c+=this.DB,--i)),f&128&&(f|=-256),m==0&&(this.s&128)!=(f&128)&&++m,(m>0||f!=this.s)&&(l[m++]=f);return l}function On(i){return this.compareTo(i)==0}function ur(i){return this.compareTo(i)<0?this:i}function Ke(i){return this.compareTo(i)>0?this:i}function St(i,l,c){var f,m,C=Math.min(i.t,this.t);for(f=0;f<C;++f)c[f]=l(this[f],i[f]);if(i.t<this.t){for(m=i.s&this.DM,f=C;f<this.t;++f)c[f]=l(this[f],m);c.t=this.t}else{for(m=this.s&this.DM,f=C;f<i.t;++f)c[f]=l(m,i[f]);c.t=i.t}c.s=l(this.s,i.s),c.clamp()}function mn(i,l){return i&l}function yn(i){var l=d();return this.bitwiseTo(i,mn,l),l}function Yt(i,l){return i|l}function Ft(i){var l=d();return this.bitwiseTo(i,Yt,l),l}function It(i,l){return i^l}function dr(i){var l=d();return this.bitwiseTo(i,It,l),l}function Rr(i,l){return i&~l}function fr(i){var l=d();return this.bitwiseTo(i,Rr,l),l}function Ao(){for(var i=d(),l=0;l<this.t;++l)i[l]=this.DM&~this[l];return i.t=this.t,i.s=~this.s,i}function Fi(i){var l=d();return i<0?this.rShiftTo(-i,l):this.lShiftTo(i,l),l}function xn(i){var l=d();return i<0?this.lShiftTo(-i,l):this.rShiftTo(i,l),l}function Fl(i){if(i==0)return-1;var l=0;return i&65535||(i>>=16,l+=16),i&255||(i>>=8,l+=8),i&15||(i>>=4,l+=4),i&3||(i>>=2,l+=2),i&1||++l,l}function $l(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+Fl(this[i]);return this.s<0?this.t*this.DB:-1}function Ul(i){for(var l=0;i!=0;)i&=i-1,++l;return l}function Hl(){for(var i=0,l=this.s&this.DM,c=0;c<this.t;++c)i+=Ul(this[c]^l);return i}function Wl(i){var l=Math.floor(i/this.DB);return l>=this.t?this.s!=0:(this[l]&1<<i%this.DB)!=0}function Vl(i,l){var c=u.ONE.shiftLeft(i);return this.bitwiseTo(c,l,c),c}function Gl(i){return this.changeBit(i,Yt)}function Zl(i){return this.changeBit(i,Rr)}function ql(i){return this.changeBit(i,It)}function Kl(i,l){for(var c=0,f=0,m=Math.min(i.t,this.t);c<m;)f+=this[c]+i[c],l[c++]=f&this.DM,f>>=this.DB;if(i.t<this.t){for(f+=i.s;c<this.t;)f+=this[c],l[c++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;c<i.t;)f+=i[c],l[c++]=f&this.DM,f>>=this.DB;f+=i.s}l.s=f<0?-1:0,f>0?l[c++]=f:f<-1&&(l[c++]=this.DV+f),l.t=c,l.clamp()}function Ql(i){var l=d();return this.addTo(i,l),l}function Jl(i){var l=d();return this.subTo(i,l),l}function ea(i){var l=d();return this.multiplyTo(i,l),l}function ta(){var i=d();return this.squareTo(i),i}function na(i){var l=d();return this.divRemTo(i,l,null),l}function ra(i){var l=d();return this.divRemTo(i,null,l),l}function $i(i){var l=d(),c=d();return this.divRemTo(i,l,c),new Array(l,c)}function oa(i){this[this.t]=this.am(0,i-1,this,0,0,this.t),++this.t,this.clamp()}function ia(i,l){if(i!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=i;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}}function pr(){}function Ui(i){return i}function sa(i,l,c){i.multiplyTo(l,c)}function la(i,l){i.squareTo(l)}pr.prototype.convert=Ui,pr.prototype.revert=Ui,pr.prototype.mulTo=sa,pr.prototype.sqrTo=la;function aa(i){return this.exp(i,new pr)}function ca(i,l,c){var f=Math.min(this.t+i.t,l);for(c.s=0,c.t=f;f>0;)c[--f]=0;var m;for(m=c.t-this.t;f<m;++f)c[f+this.t]=this.am(0,i[f],c,f,0,this.t);for(m=Math.min(i.t,l);f<m;++f)this.am(0,i[f],c,f,0,l-f);c.clamp()}function Hi(i,l,c){--l;var f=c.t=this.t+i.t-l;for(c.s=0;--f>=0;)c[f]=0;for(f=Math.max(l-this.t,0);f<i.t;++f)c[this.t+f-l]=this.am(l-f,i[f],c,0,0,this.t+f-l);c.clamp(),c.drShiftTo(1,c)}function Rn(i){this.r2=d(),this.q3=d(),u.ONE.dlShiftTo(2*i.t,this.r2),this.mu=this.r2.divide(i),this.m=i}function ua(i){if(i.s<0||i.t>2*this.m.t)return i.mod(this.m);if(i.compareTo(this.m)<0)return i;var l=d();return i.copyTo(l),this.reduce(l),l}function da(i){return i}function fa(i){for(i.drShiftTo(this.m.t-1,this.r2),i.t>this.m.t+1&&(i.t=this.m.t+1,i.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);i.compareTo(this.r2)<0;)i.dAddOffset(1,this.m.t+1);for(i.subTo(this.r2,i);i.compareTo(this.m)>=0;)i.subTo(this.m,i)}function pa(i,l){i.squareTo(l),this.reduce(l)}function ha(i,l,c){i.multiplyTo(l,c),this.reduce(c)}Rn.prototype.convert=ua,Rn.prototype.revert=da,Rn.prototype.reduce=fa,Rn.prototype.mulTo=ha,Rn.prototype.sqrTo=pa;function Wi(i,l){var c=i.bitLength(),f,m=E(1),C;if(c<=0)return m;c<18?f=1:c<48?f=3:c<144?f=4:c<768?f=5:f=6,c<8?C=new ie(l):l.isEven()?C=new Rn(l):C=new we(l);var _=new Array,L=3,j=f-1,V=(1<<f)-1;if(_[1]=C.convert(this),f>1){var se=d();for(C.sqrTo(_[1],se);L<=V;)_[L]=d(),C.mulTo(se,_[L-2],_[L]),L+=2}var J=i.t-1,de,Ce=!0,_e=d(),ke;for(c=ne(i[J])-1;J>=0;){for(c>=j?de=i[J]>>c-j&V:(de=(i[J]&(1<<c+1)-1)<<j-c,J>0&&(de|=i[J-1]>>this.DB+c-j)),L=f;!(de&1);)de>>=1,--L;if((c-=L)<0&&(c+=this.DB,--J),Ce)_[de].copyTo(m),Ce=!1;else{for(;L>1;)C.sqrTo(m,_e),C.sqrTo(_e,m),L-=2;L>0?C.sqrTo(m,_e):(ke=m,m=_e,_e=ke),C.mulTo(_e,_[de],m)}for(;J>=0&&!(i[J]&1<<c);)C.sqrTo(m,_e),ke=m,m=_e,_e=ke,--c<0&&(c=this.DB-1,--J)}return C.revert(m)}function ma(i){var l=this.s<0?this.negate():this.clone(),c=i.s<0?i.negate():i.clone();if(l.compareTo(c)<0){var f=l;l=c,c=f}var m=l.getLowestSetBit(),C=c.getLowestSetBit();if(C<0)return l;for(m<C&&(C=m),C>0&&(l.rShiftTo(C,l),c.rShiftTo(C,c));l.signum()>0;)(m=l.getLowestSetBit())>0&&l.rShiftTo(m,l),(m=c.getLowestSetBit())>0&&c.rShiftTo(m,c),l.compareTo(c)>=0?(l.subTo(c,l),l.rShiftTo(1,l)):(c.subTo(l,c),c.rShiftTo(1,c));return C>0&&c.lShiftTo(C,c),c}function ya(i){if(i<=0)return 0;var l=this.DV%i,c=this.s<0?i-1:0;if(this.t>0)if(l==0)c=this[0]%i;else for(var f=this.t-1;f>=0;--f)c=(l*c+this[f])%i;return c}function xa(i){var l=i.isEven();if(this.isEven()&&l||i.signum()==0)return u.ZERO;for(var c=i.clone(),f=this.clone(),m=E(1),C=E(0),_=E(0),L=E(1);c.signum()!=0;){for(;c.isEven();)c.rShiftTo(1,c),l?((!m.isEven()||!C.isEven())&&(m.addTo(this,m),C.subTo(i,C)),m.rShiftTo(1,m)):C.isEven()||C.subTo(i,C),C.rShiftTo(1,C);for(;f.isEven();)f.rShiftTo(1,f),l?((!_.isEven()||!L.isEven())&&(_.addTo(this,_),L.subTo(i,L)),_.rShiftTo(1,_)):L.isEven()||L.subTo(i,L),L.rShiftTo(1,L);c.compareTo(f)>=0?(c.subTo(f,c),l&&m.subTo(_,m),C.subTo(L,C)):(f.subTo(c,f),l&&_.subTo(m,_),L.subTo(C,L))}if(f.compareTo(u.ONE)!=0)return u.ZERO;if(L.compareTo(i)>=0)return L.subtract(i);if(L.signum()<0)L.addTo(i,L);else return L;return L.signum()<0?L.add(i):L}var Ve=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Wy=(1<<26)/Ve[Ve.length-1];function Vy(i){var l,c=this.abs();if(c.t==1&&c[0]<=Ve[Ve.length-1]){for(l=0;l<Ve.length;++l)if(c[0]==Ve[l])return!0;return!1}if(c.isEven())return!1;for(l=1;l<Ve.length;){for(var f=Ve[l],m=l+1;m<Ve.length&&f<Wy;)f*=Ve[m++];for(f=c.modInt(f);l<m;)if(f%Ve[l++]==0)return!1}return c.millerRabin(i)}function Gy(i){var l=this.subtract(u.ONE),c=l.getLowestSetBit();if(c<=0)return!1;var f=l.shiftRight(c);i=i+1>>1,i>Ve.length&&(i=Ve.length);for(var m=d(),C=0;C<i;++C){m.fromInt(Ve[Math.floor(Math.random()*Ve.length)]);var _=m.modPow(f,this);if(_.compareTo(u.ONE)!=0&&_.compareTo(l)!=0){for(var L=1;L++<c&&_.compareTo(l)!=0;)if(_=_.modPowInt(2,this),_.compareTo(u.ONE)==0)return!1;if(_.compareTo(l)!=0)return!1}}return!0}u.prototype.chunkSize=Lt,u.prototype.toRadix=Mn,u.prototype.fromRadix=pn,u.prototype.fromNumber=hn,u.prototype.bitwiseTo=St,u.prototype.changeBit=Vl,u.prototype.addTo=Kl,u.prototype.dMultiply=oa,u.prototype.dAddOffset=ia,u.prototype.multiplyLowerTo=ca,u.prototype.multiplyUpperTo=Hi,u.prototype.modInt=ya,u.prototype.millerRabin=Gy,u.prototype.clone=Te,u.prototype.intValue=me,u.prototype.byteValue=Ae,u.prototype.shortValue=qe,u.prototype.signum=zt,u.prototype.toByteArray=Dn,u.prototype.equals=On,u.prototype.min=ur,u.prototype.max=Ke,u.prototype.and=yn,u.prototype.or=Ft,u.prototype.xor=dr,u.prototype.andNot=fr,u.prototype.not=Ao,u.prototype.shiftLeft=Fi,u.prototype.shiftRight=xn,u.prototype.getLowestSetBit=$l,u.prototype.bitCount=Hl,u.prototype.testBit=Wl,u.prototype.setBit=Gl,u.prototype.clearBit=Zl,u.prototype.flipBit=ql,u.prototype.add=Ql,u.prototype.subtract=Jl,u.prototype.multiply=ea,u.prototype.divide=na,u.prototype.remainder=ra,u.prototype.divideAndRemainder=$i,u.prototype.modPow=Wi,u.prototype.modInverse=xa,u.prototype.pow=aa,u.prototype.gcd=ma,u.prototype.isProbablePrime=Vy,u.prototype.square=ta;var Ie=u;Ie.prototype.IsNegative=function(){return this.compareTo(Ie.ZERO)==-1},Ie.op_Equality=function(i,l){return i.compareTo(l)==0},Ie.op_Inequality=function(i,l){return i.compareTo(l)!=0},Ie.op_GreaterThan=function(i,l){return i.compareTo(l)>0},Ie.op_LessThan=function(i,l){return i.compareTo(l)<0},Ie.op_Addition=function(i,l){return new Ie(i,void 0,void 0).add(new Ie(l,void 0,void 0))},Ie.op_Subtraction=function(i,l){return new Ie(i,void 0,void 0).subtract(new Ie(l,void 0,void 0))},Ie.Int128Mul=function(i,l){return new Ie(i,void 0,void 0).multiply(new Ie(l,void 0,void 0))},Ie.op_Division=function(i,l){return i.divide(l)},Ie.prototype.ToDouble=function(){return parseFloat(this.toString())};var Md=function(i,l){var c;if(typeof Object.getOwnPropertyNames>"u"){for(c in l.prototype)(typeof i.prototype[c]>"u"||i.prototype[c]===Object.prototype[c])&&(i.prototype[c]=l.prototype[c]);for(c in l)typeof i[c]>"u"&&(i[c]=l[c]);i.$baseCtor=l}else{for(var f=Object.getOwnPropertyNames(l.prototype),m=0;m<f.length;m++)typeof Object.getOwnPropertyDescriptor(i.prototype,f[m])>"u"&&Object.defineProperty(i.prototype,f[m],Object.getOwnPropertyDescriptor(l.prototype,f[m]));for(c in l)typeof i[c]>"u"&&(i[c]=l[c]);i.$baseCtor=l}};t.Path=function(){return[]},t.Path.prototype.push=Array.prototype.push,t.Paths=function(){return[]},t.Paths.prototype.push=Array.prototype.push,t.DoublePoint=function(){var i=arguments;this.X=0,this.Y=0,i.length===1?(this.X=i[0].X,this.Y=i[0].Y):i.length===2&&(this.X=i[0],this.Y=i[1])},t.DoublePoint0=function(){this.X=0,this.Y=0},t.DoublePoint0.prototype=t.DoublePoint.prototype,t.DoublePoint1=function(i){this.X=i.X,this.Y=i.Y},t.DoublePoint1.prototype=t.DoublePoint.prototype,t.DoublePoint2=function(i,l){this.X=i,this.Y=l},t.DoublePoint2.prototype=t.DoublePoint.prototype,t.PolyNode=function(){this.m_Parent=null,this.m_polygon=new t.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},t.PolyNode.prototype.IsHoleNode=function(){for(var i=!0,l=this.m_Parent;l!==null;)i=!i,l=l.m_Parent;return i},t.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},t.PolyNode.prototype.Contour=function(){return this.m_polygon},t.PolyNode.prototype.AddChild=function(i){var l=this.m_Childs.length;this.m_Childs.push(i),i.m_Parent=this,i.m_Index=l},t.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},t.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},t.PolyNode.prototype.Childs=function(){return this.m_Childs},t.PolyNode.prototype.Parent=function(){return this.m_Parent},t.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},t.PolyTree=function(){this.m_AllPolys=[],t.PolyNode.call(this)},t.PolyTree.prototype.Clear=function(){for(var i=0,l=this.m_AllPolys.length;i<l;i++)this.m_AllPolys[i]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},t.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},t.PolyTree.prototype.Total=function(){var i=this.m_AllPolys.length;return i>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&i--,i},Md(t.PolyTree,t.PolyNode),t.Math_Abs_Int64=t.Math_Abs_Int32=t.Math_Abs_Double=function(i){return Math.abs(i)},t.Math_Max_Int32_Int32=function(i,l){return Math.max(i,l)},s.msie||s.opera||s.safari?t.Cast_Int32=function(i){return i|0}:t.Cast_Int32=function(i){return~~i},typeof Number.toInteger>"u"&&(Number.toInteger=null),s.chrome?t.Cast_Int64=function(i){return i<-2147483648||i>2147483647?i<0?Math.ceil(i):Math.floor(i):~~i}:s.firefox&&typeof Number.toInteger=="function"?t.Cast_Int64=function(i){return Number.toInteger(i)}:s.msie7||s.msie8?t.Cast_Int64=function(i){return parseInt(i,10)}:s.msie?t.Cast_Int64=function(i){return i<-2147483648||i>2147483647?i<0?Math.ceil(i):Math.floor(i):i|0}:t.Cast_Int64=function(i){return i<0?Math.ceil(i):Math.floor(i)},t.Clear=function(i){i.length=0},t.PI=3.141592653589793,t.PI2=2*3.141592653589793,t.IntPoint=function(){var i=arguments,l=i.length;if(this.X=0,this.Y=0,t.use_xyz)if(this.Z=0,l===3)this.X=i[0],this.Y=i[1],this.Z=i[2];else if(l===2)this.X=i[0],this.Y=i[1],this.Z=0;else if(l===1)if(i[0]instanceof t.DoublePoint){var c=i[0];this.X=t.Clipper.Round(c.X),this.Y=t.Clipper.Round(c.Y),this.Z=0}else{var f=i[0];typeof f.Z>"u"&&(f.Z=0),this.X=f.X,this.Y=f.Y,this.Z=f.Z}else this.X=0,this.Y=0,this.Z=0;else if(l===2)this.X=i[0],this.Y=i[1];else if(l===1)if(i[0]instanceof t.DoublePoint){var c=i[0];this.X=t.Clipper.Round(c.X),this.Y=t.Clipper.Round(c.Y)}else{var f=i[0];this.X=f.X,this.Y=f.Y}else this.X=0,this.Y=0},t.IntPoint.op_Equality=function(i,l){return i.X===l.X&&i.Y===l.Y},t.IntPoint.op_Inequality=function(i,l){return i.X!==l.X||i.Y!==l.Y},t.IntPoint0=function(){this.X=0,this.Y=0,t.use_xyz&&(this.Z=0)},t.IntPoint0.prototype=t.IntPoint.prototype,t.IntPoint1=function(i){this.X=i.X,this.Y=i.Y,t.use_xyz&&(typeof i.Z>"u"?this.Z=0:this.Z=i.Z)},t.IntPoint1.prototype=t.IntPoint.prototype,t.IntPoint1dp=function(i){this.X=t.Clipper.Round(i.X),this.Y=t.Clipper.Round(i.Y),t.use_xyz&&(this.Z=0)},t.IntPoint1dp.prototype=t.IntPoint.prototype,t.IntPoint2=function(i,l,c){this.X=i,this.Y=l,t.use_xyz&&(typeof c>"u"?this.Z=0:this.Z=c)},t.IntPoint2.prototype=t.IntPoint.prototype,t.IntRect=function(){var i=arguments,l=i.length;if(l===4)this.left=i[0],this.top=i[1],this.right=i[2],this.bottom=i[3];else if(l===1){var c=i[0];this.left=c.left,this.top=c.top,this.right=c.right,this.bottom=c.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},t.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},t.IntRect0.prototype=t.IntRect.prototype,t.IntRect1=function(i){this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom},t.IntRect1.prototype=t.IntRect.prototype,t.IntRect4=function(i,l,c,f){this.left=i,this.top=l,this.right=c,this.bottom=f},t.IntRect4.prototype=t.IntRect.prototype,t.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},t.PolyType={ptSubject:0,ptClip:1},t.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},t.JoinType={jtSquare:0,jtRound:1,jtMiter:2},t.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},t.EdgeSide={esLeft:0,esRight:1},t.Direction={dRightToLeft:0,dLeftToRight:1},t.TEdge=function(){this.Bot=new t.IntPoint0,this.Curr=new t.IntPoint0,this.Top=new t.IntPoint0,this.Delta=new t.IntPoint0,this.Dx=0,this.PolyTyp=t.PolyType.ptSubject,this.Side=t.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},t.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new t.IntPoint0},t.MyIntersectNodeSort=function(){},t.MyIntersectNodeSort.Compare=function(i,l){var c=l.Pt.Y-i.Pt.Y;return c>0?1:c<0?-1:0},t.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},t.Scanbeam=function(){this.Y=0,this.Next=null},t.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},t.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},t.OutPt=function(){this.Idx=0,this.Pt=new t.IntPoint0,this.Next=null,this.Prev=null},t.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new t.IntPoint0},t.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},t.ClipperBase.horizontal=-9007199254740992,t.ClipperBase.Skip=-2,t.ClipperBase.Unassigned=-1,t.ClipperBase.tolerance=1e-20,t.ClipperBase.loRange=47453132,t.ClipperBase.hiRange=0xfffffffffffff,t.ClipperBase.near_zero=function(i){return i>-t.ClipperBase.tolerance&&i<t.ClipperBase.tolerance},t.ClipperBase.IsHorizontal=function(i){return i.Delta.Y===0},t.ClipperBase.prototype.PointIsVertex=function(i,l){var c=l;do{if(t.IntPoint.op_Equality(c.Pt,i))return!0;c=c.Next}while(c!==l);return!1},t.ClipperBase.prototype.PointOnLineSegment=function(i,l,c,f){return f?i.X===l.X&&i.Y===l.Y||i.X===c.X&&i.Y===c.Y||i.X>l.X==i.X<c.X&&i.Y>l.Y==i.Y<c.Y&&Ie.op_Equality(Ie.Int128Mul(i.X-l.X,c.Y-l.Y),Ie.Int128Mul(c.X-l.X,i.Y-l.Y)):i.X===l.X&&i.Y===l.Y||i.X===c.X&&i.Y===c.Y||i.X>l.X==i.X<c.X&&i.Y>l.Y==i.Y<c.Y&&(i.X-l.X)*(c.Y-l.Y)===(c.X-l.X)*(i.Y-l.Y)},t.ClipperBase.prototype.PointOnPolygon=function(i,l,c){for(var f=l;;){if(this.PointOnLineSegment(i,f.Pt,f.Next.Pt,c))return!0;if(f=f.Next,f===l)break}return!1},t.ClipperBase.prototype.SlopesEqual=t.ClipperBase.SlopesEqual=function(){var i=arguments,l=i.length,c,f,m,C,_,L,j;return l===3?(c=i[0],f=i[1],j=i[2],j?Ie.op_Equality(Ie.Int128Mul(c.Delta.Y,f.Delta.X),Ie.Int128Mul(c.Delta.X,f.Delta.Y)):t.Cast_Int64(c.Delta.Y*f.Delta.X)===t.Cast_Int64(c.Delta.X*f.Delta.Y)):l===4?(m=i[0],C=i[1],_=i[2],j=i[3],j?Ie.op_Equality(Ie.Int128Mul(m.Y-C.Y,C.X-_.X),Ie.Int128Mul(m.X-C.X,C.Y-_.Y)):t.Cast_Int64((m.Y-C.Y)*(C.X-_.X))-t.Cast_Int64((m.X-C.X)*(C.Y-_.Y))===0):(m=i[0],C=i[1],_=i[2],L=i[3],j=i[4],j?Ie.op_Equality(Ie.Int128Mul(m.Y-C.Y,_.X-L.X),Ie.Int128Mul(m.X-C.X,_.Y-L.Y)):t.Cast_Int64((m.Y-C.Y)*(_.X-L.X))-t.Cast_Int64((m.X-C.X)*(_.Y-L.Y))===0)},t.ClipperBase.SlopesEqual3=function(i,l,c){return c?Ie.op_Equality(Ie.Int128Mul(i.Delta.Y,l.Delta.X),Ie.Int128Mul(i.Delta.X,l.Delta.Y)):t.Cast_Int64(i.Delta.Y*l.Delta.X)===t.Cast_Int64(i.Delta.X*l.Delta.Y)},t.ClipperBase.SlopesEqual4=function(i,l,c,f){return f?Ie.op_Equality(Ie.Int128Mul(i.Y-l.Y,l.X-c.X),Ie.Int128Mul(i.X-l.X,l.Y-c.Y)):t.Cast_Int64((i.Y-l.Y)*(l.X-c.X))-t.Cast_Int64((i.X-l.X)*(l.Y-c.Y))===0},t.ClipperBase.SlopesEqual5=function(i,l,c,f,m){return m?Ie.op_Equality(Ie.Int128Mul(i.Y-l.Y,c.X-f.X),Ie.Int128Mul(i.X-l.X,c.Y-f.Y)):t.Cast_Int64((i.Y-l.Y)*(c.X-f.X))-t.Cast_Int64((i.X-l.X)*(c.Y-f.Y))===0},t.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var i=0,l=this.m_edges.length;i<l;++i){for(var c=0,f=this.m_edges[i].length;c<f;++c)this.m_edges[i][c]=null;t.Clear(this.m_edges[i])}t.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},t.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var i=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=i}this.m_CurrentLM=null},t.ClipperBase.prototype.RangeTest=function(i,l){l.Value?(i.X>t.ClipperBase.hiRange||i.Y>t.ClipperBase.hiRange||-i.X>t.ClipperBase.hiRange||-i.Y>t.ClipperBase.hiRange)&&t.Error("Coordinate outside allowed range in RangeTest()."):(i.X>t.ClipperBase.loRange||i.Y>t.ClipperBase.loRange||-i.X>t.ClipperBase.loRange||-i.Y>t.ClipperBase.loRange)&&(l.Value=!0,this.RangeTest(i,l))},t.ClipperBase.prototype.InitEdge=function(i,l,c,f){i.Next=l,i.Prev=c,i.Curr.X=f.X,i.Curr.Y=f.Y,t.use_xyz&&(i.Curr.Z=f.Z),i.OutIdx=-1},t.ClipperBase.prototype.InitEdge2=function(i,l){i.Curr.Y>=i.Next.Curr.Y?(i.Bot.X=i.Curr.X,i.Bot.Y=i.Curr.Y,t.use_xyz&&(i.Bot.Z=i.Curr.Z),i.Top.X=i.Next.Curr.X,i.Top.Y=i.Next.Curr.Y,t.use_xyz&&(i.Top.Z=i.Next.Curr.Z)):(i.Top.X=i.Curr.X,i.Top.Y=i.Curr.Y,t.use_xyz&&(i.Top.Z=i.Curr.Z),i.Bot.X=i.Next.Curr.X,i.Bot.Y=i.Next.Curr.Y,t.use_xyz&&(i.Bot.Z=i.Next.Curr.Z)),this.SetDx(i),i.PolyTyp=l},t.ClipperBase.prototype.FindNextLocMin=function(i){for(var l;;){for(;t.IntPoint.op_Inequality(i.Bot,i.Prev.Bot)||t.IntPoint.op_Equality(i.Curr,i.Top);)i=i.Next;if(i.Dx!==t.ClipperBase.horizontal&&i.Prev.Dx!==t.ClipperBase.horizontal)break;for(;i.Prev.Dx===t.ClipperBase.horizontal;)i=i.Prev;for(l=i;i.Dx===t.ClipperBase.horizontal;)i=i.Next;if(i.Top.Y!==i.Prev.Bot.Y){l.Prev.Bot.X<i.Bot.X&&(i=l);break}}return i},t.ClipperBase.prototype.ProcessBound=function(i,l){var c,f=i,m;if(f.OutIdx===t.ClipperBase.Skip){if(i=f,l){for(;i.Top.Y===i.Next.Bot.Y;)i=i.Next;for(;i!==f&&i.Dx===t.ClipperBase.horizontal;)i=i.Prev}else{for(;i.Top.Y===i.Prev.Bot.Y;)i=i.Prev;for(;i!==f&&i.Dx===t.ClipperBase.horizontal;)i=i.Next}if(i===f)l?f=i.Next:f=i.Prev;else{l?i=f.Next:i=f.Prev;var C=new t.LocalMinima;C.Next=null,C.Y=i.Bot.Y,C.LeftBound=null,C.RightBound=i,i.WindDelta=0,f=this.ProcessBound(i,l),this.InsertLocalMinima(C)}return f}if(i.Dx===t.ClipperBase.horizontal&&(l?c=i.Prev:c=i.Next,c.Dx===t.ClipperBase.horizontal?c.Bot.X!==i.Bot.X&&c.Top.X!==i.Bot.X&&this.ReverseHorizontal(i):c.Bot.X!==i.Bot.X&&this.ReverseHorizontal(i)),c=i,l){for(;f.Top.Y===f.Next.Bot.Y&&f.Next.OutIdx!==t.ClipperBase.Skip;)f=f.Next;if(f.Dx===t.ClipperBase.horizontal&&f.Next.OutIdx!==t.ClipperBase.Skip){for(m=f;m.Prev.Dx===t.ClipperBase.horizontal;)m=m.Prev;m.Prev.Top.X>f.Next.Top.X&&(f=m.Prev)}for(;i!==f;)i.NextInLML=i.Next,i.Dx===t.ClipperBase.horizontal&&i!==c&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),i=i.Next;i.Dx===t.ClipperBase.horizontal&&i!==c&&i.Bot.X!==i.Prev.Top.X&&this.ReverseHorizontal(i),f=f.Next}else{for(;f.Top.Y===f.Prev.Bot.Y&&f.Prev.OutIdx!==t.ClipperBase.Skip;)f=f.Prev;if(f.Dx===t.ClipperBase.horizontal&&f.Prev.OutIdx!==t.ClipperBase.Skip){for(m=f;m.Next.Dx===t.ClipperBase.horizontal;)m=m.Next;(m.Next.Top.X===f.Prev.Top.X||m.Next.Top.X>f.Prev.Top.X)&&(f=m.Next)}for(;i!==f;)i.NextInLML=i.Prev,i.Dx===t.ClipperBase.horizontal&&i!==c&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),i=i.Prev;i.Dx===t.ClipperBase.horizontal&&i!==c&&i.Bot.X!==i.Next.Top.X&&this.ReverseHorizontal(i),f=f.Prev}return f},t.ClipperBase.prototype.AddPath=function(i,l,c){t.use_lines?!c&&l===t.PolyType.ptClip&&t.Error("AddPath: Open paths must be subject."):c||t.Error("AddPath: Open paths have been disabled.");var f=i.length-1;if(c)for(;f>0&&t.IntPoint.op_Equality(i[f],i[0]);)--f;for(;f>0&&t.IntPoint.op_Equality(i[f],i[f-1]);)--f;if(c&&f<2||!c&&f<1)return!1;for(var m=new Array,C=0;C<=f;C++)m.push(new t.TEdge);var _=!0;m[1].Curr.X=i[1].X,m[1].Curr.Y=i[1].Y,t.use_xyz&&(m[1].Curr.Z=i[1].Z);var L={Value:this.m_UseFullRange};this.RangeTest(i[0],L),this.m_UseFullRange=L.Value,L.Value=this.m_UseFullRange,this.RangeTest(i[f],L),this.m_UseFullRange=L.Value,this.InitEdge(m[0],m[1],m[f],i[0]),this.InitEdge(m[f],m[0],m[f-1],i[f]);for(var C=f-1;C>=1;--C)L.Value=this.m_UseFullRange,this.RangeTest(i[C],L),this.m_UseFullRange=L.Value,this.InitEdge(m[C],m[C+1],m[C-1],i[C]);for(var j=m[0],V=j,se=j;;){if(V.Curr===V.Next.Curr&&(c||V.Next!==j)){if(V===V.Next)break;V===j&&(j=V.Next),V=this.RemoveEdge(V),se=V;continue}if(V.Prev===V.Next)break;if(c&&t.ClipperBase.SlopesEqual4(V.Prev.Curr,V.Curr,V.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(V.Prev.Curr,V.Curr,V.Next.Curr))){V===j&&(j=V.Next),V=this.RemoveEdge(V),V=V.Prev,se=V;continue}if(V=V.Next,V===se||!c&&V.Next===j)break}if(!c&&V===V.Next||c&&V.Prev===V.Next)return!1;c||(this.m_HasOpenPaths=!0,j.Prev.OutIdx=t.ClipperBase.Skip),V=j;do this.InitEdge2(V,l),V=V.Next,_&&V.Curr.Y!==j.Curr.Y&&(_=!1);while(V!==j);if(_){if(c)return!1;V.Prev.OutIdx=t.ClipperBase.Skip;var J=new t.LocalMinima;for(J.Next=null,J.Y=V.Bot.Y,J.LeftBound=null,J.RightBound=V,J.RightBound.Side=t.EdgeSide.esRight,J.RightBound.WindDelta=0;V.Bot.X!==V.Prev.Top.X&&this.ReverseHorizontal(V),V.Next.OutIdx!==t.ClipperBase.Skip;)V.NextInLML=V.Next,V=V.Next;return this.InsertLocalMinima(J),this.m_edges.push(m),!0}this.m_edges.push(m);var de,Ce=null;for(t.IntPoint.op_Equality(V.Prev.Bot,V.Prev.Top)&&(V=V.Next);V=this.FindNextLocMin(V),V!==Ce;){Ce===null&&(Ce=V);var J=new t.LocalMinima;J.Next=null,J.Y=V.Bot.Y,V.Dx<V.Prev.Dx?(J.LeftBound=V.Prev,J.RightBound=V,de=!1):(J.LeftBound=V,J.RightBound=V.Prev,de=!0),J.LeftBound.Side=t.EdgeSide.esLeft,J.RightBound.Side=t.EdgeSide.esRight,c?J.LeftBound.Next===J.RightBound?J.LeftBound.WindDelta=-1:J.LeftBound.WindDelta=1:J.LeftBound.WindDelta=0,J.RightBound.WindDelta=-J.LeftBound.WindDelta,V=this.ProcessBound(J.LeftBound,de),V.OutIdx===t.ClipperBase.Skip&&(V=this.ProcessBound(V,de));var _e=this.ProcessBound(J.RightBound,!de);_e.OutIdx===t.ClipperBase.Skip&&(_e=this.ProcessBound(_e,!de)),J.LeftBound.OutIdx===t.ClipperBase.Skip?J.LeftBound=null:J.RightBound.OutIdx===t.ClipperBase.Skip&&(J.RightBound=null),this.InsertLocalMinima(J),de||(V=_e)}return!0},t.ClipperBase.prototype.AddPaths=function(i,l,c){for(var f=!1,m=0,C=i.length;m<C;++m)this.AddPath(i[m],l,c)&&(f=!0);return f},t.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(i,l,c){return t.IntPoint.op_Equality(i,c)||t.IntPoint.op_Equality(i,l)||t.IntPoint.op_Equality(c,l)?!1:i.X!==c.X?l.X>i.X==l.X<c.X:l.Y>i.Y==l.Y<c.Y},t.ClipperBase.prototype.RemoveEdge=function(i){i.Prev.Next=i.Next,i.Next.Prev=i.Prev;var l=i.Next;return i.Prev=null,l},t.ClipperBase.prototype.SetDx=function(i){i.Delta.X=i.Top.X-i.Bot.X,i.Delta.Y=i.Top.Y-i.Bot.Y,i.Delta.Y===0?i.Dx=t.ClipperBase.horizontal:i.Dx=i.Delta.X/i.Delta.Y},t.ClipperBase.prototype.InsertLocalMinima=function(i){if(this.m_MinimaList===null)this.m_MinimaList=i;else if(i.Y>=this.m_MinimaList.Y)i.Next=this.m_MinimaList,this.m_MinimaList=i;else{for(var l=this.m_MinimaList;l.Next!==null&&i.Y<l.Next.Y;)l=l.Next;i.Next=l.Next,l.Next=i}},t.ClipperBase.prototype.PopLocalMinima=function(i,l){return l.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===i?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},t.ClipperBase.prototype.ReverseHorizontal=function(i){var l=i.Top.X;i.Top.X=i.Bot.X,i.Bot.X=l,t.use_xyz&&(l=i.Top.Z,i.Top.Z=i.Bot.Z,i.Bot.Z=l)},t.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var i=this.m_MinimaList;i!==null;){this.InsertScanbeam(i.Y);var l=i.LeftBound;l!==null&&(l.Curr.X=l.Bot.X,l.Curr.Y=l.Bot.Y,t.use_xyz&&(l.Curr.Z=l.Bot.Z),l.OutIdx=t.ClipperBase.Unassigned),l=i.RightBound,l!==null&&(l.Curr.X=l.Bot.X,l.Curr.Y=l.Bot.Y,t.use_xyz&&(l.Curr.Z=l.Bot.Z),l.OutIdx=t.ClipperBase.Unassigned),i=i.Next}this.m_ActiveEdges=null}},t.ClipperBase.prototype.InsertScanbeam=function(i){if(this.m_Scanbeam===null)this.m_Scanbeam=new t.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=i;else if(i>this.m_Scanbeam.Y){var l=new t.Scanbeam;l.Y=i,l.Next=this.m_Scanbeam,this.m_Scanbeam=l}else{for(var c=this.m_Scanbeam;c.Next!==null&&i<=c.Next.Y;)c=c.Next;if(i===c.Y)return;var f=new t.Scanbeam;f.Y=i,f.Next=c.Next,c.Next=f}},t.ClipperBase.prototype.PopScanbeam=function(i){return this.m_Scanbeam===null?(i.v=0,!1):(i.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},t.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},t.ClipperBase.prototype.CreateOutRec=function(){var i=new t.OutRec;return i.Idx=t.ClipperBase.Unassigned,i.IsHole=!1,i.IsOpen=!1,i.FirstLeft=null,i.Pts=null,i.BottomPt=null,i.PolyNode=null,this.m_PolyOuts.push(i),i.Idx=this.m_PolyOuts.length-1,i},t.ClipperBase.prototype.DisposeOutRec=function(i){var l=this.m_PolyOuts[i];l.Pts=null,l=null,this.m_PolyOuts[i]=null},t.ClipperBase.prototype.UpdateEdgeIntoAEL=function(i){i.NextInLML===null&&t.Error("UpdateEdgeIntoAEL: invalid call");var l=i.PrevInAEL,c=i.NextInAEL;return i.NextInLML.OutIdx=i.OutIdx,l!==null?l.NextInAEL=i.NextInLML:this.m_ActiveEdges=i.NextInLML,c!==null&&(c.PrevInAEL=i.NextInLML),i.NextInLML.Side=i.Side,i.NextInLML.WindDelta=i.WindDelta,i.NextInLML.WindCnt=i.WindCnt,i.NextInLML.WindCnt2=i.WindCnt2,i=i.NextInLML,i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,i.PrevInAEL=l,i.NextInAEL=c,t.ClipperBase.IsHorizontal(i)||this.InsertScanbeam(i.Top.Y),i},t.ClipperBase.prototype.SwapPositionsInAEL=function(i,l){if(!(i.NextInAEL===i.PrevInAEL||l.NextInAEL===l.PrevInAEL)){if(i.NextInAEL===l){var c=l.NextInAEL;c!==null&&(c.PrevInAEL=i);var f=i.PrevInAEL;f!==null&&(f.NextInAEL=l),l.PrevInAEL=f,l.NextInAEL=i,i.PrevInAEL=l,i.NextInAEL=c}else if(l.NextInAEL===i){var m=i.NextInAEL;m!==null&&(m.PrevInAEL=l);var C=l.PrevInAEL;C!==null&&(C.NextInAEL=i),i.PrevInAEL=C,i.NextInAEL=l,l.PrevInAEL=i,l.NextInAEL=m}else{var _=i.NextInAEL,L=i.PrevInAEL;i.NextInAEL=l.NextInAEL,i.NextInAEL!==null&&(i.NextInAEL.PrevInAEL=i),i.PrevInAEL=l.PrevInAEL,i.PrevInAEL!==null&&(i.PrevInAEL.NextInAEL=i),l.NextInAEL=_,l.NextInAEL!==null&&(l.NextInAEL.PrevInAEL=l),l.PrevInAEL=L,l.PrevInAEL!==null&&(l.PrevInAEL.NextInAEL=l)}i.PrevInAEL===null?this.m_ActiveEdges=i:l.PrevInAEL===null&&(this.m_ActiveEdges=l)}},t.ClipperBase.prototype.DeleteFromAEL=function(i){var l=i.PrevInAEL,c=i.NextInAEL;l===null&&c===null&&i!==this.m_ActiveEdges||(l!==null?l.NextInAEL=c:this.m_ActiveEdges=c,c!==null&&(c.PrevInAEL=l),i.NextInAEL=null,i.PrevInAEL=null)},t.Clipper=function(i){typeof i>"u"&&(i=0),this.m_PolyOuts=null,this.m_ClipType=t.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=t.PolyFillType.pftEvenOdd,this.m_SubjFillType=t.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,t.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=t.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&i)!==0,this.StrictlySimple=(2&i)!==0,this.PreserveCollinear=(4&i)!==0,t.use_xyz&&(this.ZFillFunction=null)},t.Clipper.ioReverseSolution=1,t.Clipper.ioStrictlySimple=2,t.Clipper.ioPreserveCollinear=4,t.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),t.ClipperBase.prototype.Clear.call(this))},t.Clipper.prototype.InsertMaxima=function(i){var l=new t.Maxima;if(l.X=i,this.m_Maxima===null)this.m_Maxima=l,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(i<this.m_Maxima.X)l.Next=this.m_Maxima,l.Prev=null,this.m_Maxima=l;else{for(var c=this.m_Maxima;c.Next!==null&&i>=c.Next.X;)c=c.Next;if(i===c.X)return;l.Next=c.Next,l.Prev=c,c.Next!==null&&(c.Next.Prev=l),c.Next=l}},t.Clipper.prototype.Execute=function(){var i=arguments,l=i.length,c=i[1]instanceof t.PolyTree;if(l===4&&!c){var f=i[0],m=i[1],C=i[2],_=i[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&t.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,t.Clear(m),this.m_SubjFillType=C,this.m_ClipFillType=_,this.m_ClipType=f,this.m_UsingPolyTree=!1;try{var L=this.ExecuteInternal();L&&this.BuildResult(m)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return L}else if(l===4&&c){var f=i[0],j=i[1],C=i[2],_=i[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=C,this.m_ClipFillType=_,this.m_ClipType=f,this.m_UsingPolyTree=!0;try{var L=this.ExecuteInternal();L&&this.BuildResult2(j)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return L}else if(l===2&&!c){var f=i[0],m=i[1];return this.Execute(f,m,t.PolyFillType.pftEvenOdd,t.PolyFillType.pftEvenOdd)}else if(l===2&&c){var f=i[0],j=i[1];return this.Execute(f,j,t.PolyFillType.pftEvenOdd,t.PolyFillType.pftEvenOdd)}},t.Clipper.prototype.FixHoleLinkage=function(i){if(!(i.FirstLeft===null||i.IsHole!==i.FirstLeft.IsHole&&i.FirstLeft.Pts!==null)){for(var l=i.FirstLeft;l!==null&&(l.IsHole===i.IsHole||l.Pts===null);)l=l.FirstLeft;i.FirstLeft=l}},t.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var i={},l={};if(!this.PopScanbeam(i))return!1;for(this.InsertLocalMinimaIntoAEL(i.v);this.PopScanbeam(l)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(l.v))return!1;this.ProcessEdgesAtTopOfScanbeam(l.v),i.v=l.v,this.InsertLocalMinimaIntoAEL(i.v)}var c,f,m;for(f=0,m=this.m_PolyOuts.length;f<m;f++)c=this.m_PolyOuts[f],!(c.Pts===null||c.IsOpen)&&(c.IsHole^this.ReverseSolution)==this.Area$1(c)>0&&this.ReversePolyPtLinks(c.Pts);for(this.JoinCommonEdges(),f=0,m=this.m_PolyOuts.length;f<m;f++)c=this.m_PolyOuts[f],c.Pts!==null&&(c.IsOpen?this.FixupOutPolyline(c):this.FixupOutPolygon(c));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},t.Clipper.prototype.DisposeAllPolyPts=function(){for(var i=0,l=this.m_PolyOuts.length;i<l;++i)this.DisposeOutRec(i);t.Clear(this.m_PolyOuts)},t.Clipper.prototype.AddJoin=function(i,l,c){var f=new t.Join;f.OutPt1=i,f.OutPt2=l,f.OffPt.X=c.X,f.OffPt.Y=c.Y,t.use_xyz&&(f.OffPt.Z=c.Z),this.m_Joins.push(f)},t.Clipper.prototype.AddGhostJoin=function(i,l){var c=new t.Join;c.OutPt1=i,c.OffPt.X=l.X,c.OffPt.Y=l.Y,t.use_xyz&&(c.OffPt.Z=l.Z),this.m_GhostJoins.push(c)},t.Clipper.prototype.SetZ=function(i,l,c){if(this.ZFillFunction!==null){if(i.Z!==0||this.ZFillFunction===null)return;t.IntPoint.op_Equality(i,l.Bot)?i.Z=l.Bot.Z:t.IntPoint.op_Equality(i,l.Top)?i.Z=l.Top.Z:t.IntPoint.op_Equality(i,c.Bot)?i.Z=c.Bot.Z:t.IntPoint.op_Equality(i,c.Top)?i.Z=c.Top.Z:this.ZFillFunction(l.Bot,l.Top,c.Bot,c.Top,i)}},t.Clipper.prototype.InsertLocalMinimaIntoAEL=function(i){for(var l={},c,f;this.PopLocalMinima(i,l);){c=l.v.LeftBound,f=l.v.RightBound;var m=null;if(c===null?(this.InsertEdgeIntoAEL(f,null),this.SetWindingCount(f),this.IsContributing(f)&&(m=this.AddOutPt(f,f.Bot))):f===null?(this.InsertEdgeIntoAEL(c,null),this.SetWindingCount(c),this.IsContributing(c)&&(m=this.AddOutPt(c,c.Bot)),this.InsertScanbeam(c.Top.Y)):(this.InsertEdgeIntoAEL(c,null),this.InsertEdgeIntoAEL(f,c),this.SetWindingCount(c),f.WindCnt=c.WindCnt,f.WindCnt2=c.WindCnt2,this.IsContributing(c)&&(m=this.AddLocalMinPoly(c,f,c.Bot)),this.InsertScanbeam(c.Top.Y)),f!==null&&(t.ClipperBase.IsHorizontal(f)?(f.NextInLML!==null&&this.InsertScanbeam(f.NextInLML.Top.Y),this.AddEdgeToSEL(f)):this.InsertScanbeam(f.Top.Y)),!(c===null||f===null)){if(m!==null&&t.ClipperBase.IsHorizontal(f)&&this.m_GhostJoins.length>0&&f.WindDelta!==0)for(var C=0,_=this.m_GhostJoins.length;C<_;C++){var L=this.m_GhostJoins[C];this.HorzSegmentsOverlap(L.OutPt1.Pt.X,L.OffPt.X,f.Bot.X,f.Top.X)&&this.AddJoin(L.OutPt1,m,L.OffPt)}if(c.OutIdx>=0&&c.PrevInAEL!==null&&c.PrevInAEL.Curr.X===c.Bot.X&&c.PrevInAEL.OutIdx>=0&&t.ClipperBase.SlopesEqual5(c.PrevInAEL.Curr,c.PrevInAEL.Top,c.Curr,c.Top,this.m_UseFullRange)&&c.WindDelta!==0&&c.PrevInAEL.WindDelta!==0){var j=this.AddOutPt(c.PrevInAEL,c.Bot);this.AddJoin(m,j,c.Top)}if(c.NextInAEL!==f){if(f.OutIdx>=0&&f.PrevInAEL.OutIdx>=0&&t.ClipperBase.SlopesEqual5(f.PrevInAEL.Curr,f.PrevInAEL.Top,f.Curr,f.Top,this.m_UseFullRange)&&f.WindDelta!==0&&f.PrevInAEL.WindDelta!==0){var j=this.AddOutPt(f.PrevInAEL,f.Bot);this.AddJoin(m,j,f.Top)}var V=c.NextInAEL;if(V!==null)for(;V!==f;)this.IntersectEdges(f,V,c.Curr),V=V.NextInAEL}}}},t.Clipper.prototype.InsertEdgeIntoAEL=function(i,l){if(this.m_ActiveEdges===null)i.PrevInAEL=null,i.NextInAEL=null,this.m_ActiveEdges=i;else if(l===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,i))i.PrevInAEL=null,i.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=i,this.m_ActiveEdges=i;else{for(l===null&&(l=this.m_ActiveEdges);l.NextInAEL!==null&&!this.E2InsertsBeforeE1(l.NextInAEL,i);)l=l.NextInAEL;i.NextInAEL=l.NextInAEL,l.NextInAEL!==null&&(l.NextInAEL.PrevInAEL=i),i.PrevInAEL=l,l.NextInAEL=i}},t.Clipper.prototype.E2InsertsBeforeE1=function(i,l){return l.Curr.X===i.Curr.X?l.Top.Y>i.Top.Y?l.Top.X<t.Clipper.TopX(i,l.Top.Y):i.Top.X>t.Clipper.TopX(l,i.Top.Y):l.Curr.X<i.Curr.X},t.Clipper.prototype.IsEvenOddFillType=function(i){return i.PolyTyp===t.PolyType.ptSubject?this.m_SubjFillType===t.PolyFillType.pftEvenOdd:this.m_ClipFillType===t.PolyFillType.pftEvenOdd},t.Clipper.prototype.IsEvenOddAltFillType=function(i){return i.PolyTyp===t.PolyType.ptSubject?this.m_ClipFillType===t.PolyFillType.pftEvenOdd:this.m_SubjFillType===t.PolyFillType.pftEvenOdd},t.Clipper.prototype.IsContributing=function(i){var l,c;switch(i.PolyTyp===t.PolyType.ptSubject?(l=this.m_SubjFillType,c=this.m_ClipFillType):(l=this.m_ClipFillType,c=this.m_SubjFillType),l){case t.PolyFillType.pftEvenOdd:if(i.WindDelta===0&&i.WindCnt!==1)return!1;break;case t.PolyFillType.pftNonZero:if(Math.abs(i.WindCnt)!==1)return!1;break;case t.PolyFillType.pftPositive:if(i.WindCnt!==1)return!1;break;default:if(i.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case t.ClipType.ctIntersection:switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return i.WindCnt2!==0;case t.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case t.ClipType.ctUnion:switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return i.WindCnt2===0;case t.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}case t.ClipType.ctDifference:if(i.PolyTyp===t.PolyType.ptSubject)switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return i.WindCnt2===0;case t.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return i.WindCnt2!==0;case t.PolyFillType.pftPositive:return i.WindCnt2>0;default:return i.WindCnt2<0}case t.ClipType.ctXor:if(i.WindDelta===0)switch(c){case t.PolyFillType.pftEvenOdd:case t.PolyFillType.pftNonZero:return i.WindCnt2===0;case t.PolyFillType.pftPositive:return i.WindCnt2<=0;default:return i.WindCnt2>=0}else return!0}return!0},t.Clipper.prototype.SetWindingCount=function(i){for(var l=i.PrevInAEL;l!==null&&(l.PolyTyp!==i.PolyTyp||l.WindDelta===0);)l=l.PrevInAEL;if(l===null){var c=i.PolyTyp===t.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;i.WindDelta===0?i.WindCnt=c===t.PolyFillType.pftNegative?-1:1:i.WindCnt=i.WindDelta,i.WindCnt2=0,l=this.m_ActiveEdges}else if(i.WindDelta===0&&this.m_ClipType!==t.ClipType.ctUnion)i.WindCnt=1,i.WindCnt2=l.WindCnt2,l=l.NextInAEL;else if(this.IsEvenOddFillType(i)){if(i.WindDelta===0){for(var f=!0,m=l.PrevInAEL;m!==null;)m.PolyTyp===l.PolyTyp&&m.WindDelta!==0&&(f=!f),m=m.PrevInAEL;i.WindCnt=f?0:1}else i.WindCnt=i.WindDelta;i.WindCnt2=l.WindCnt2,l=l.NextInAEL}else l.WindCnt*l.WindDelta<0?Math.abs(l.WindCnt)>1?l.WindDelta*i.WindDelta<0?i.WindCnt=l.WindCnt:i.WindCnt=l.WindCnt+i.WindDelta:i.WindCnt=i.WindDelta===0?1:i.WindDelta:i.WindDelta===0?i.WindCnt=l.WindCnt<0?l.WindCnt-1:l.WindCnt+1:l.WindDelta*i.WindDelta<0?i.WindCnt=l.WindCnt:i.WindCnt=l.WindCnt+i.WindDelta,i.WindCnt2=l.WindCnt2,l=l.NextInAEL;if(this.IsEvenOddAltFillType(i))for(;l!==i;)l.WindDelta!==0&&(i.WindCnt2=i.WindCnt2===0?1:0),l=l.NextInAEL;else for(;l!==i;)i.WindCnt2+=l.WindDelta,l=l.NextInAEL},t.Clipper.prototype.AddEdgeToSEL=function(i){this.m_SortedEdges===null?(this.m_SortedEdges=i,i.PrevInSEL=null,i.NextInSEL=null):(i.NextInSEL=this.m_SortedEdges,i.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=i,this.m_SortedEdges=i)},t.Clipper.prototype.PopEdgeFromSEL=function(i){if(i.v=this.m_SortedEdges,i.v===null)return!1;var l=i.v;return this.m_SortedEdges=i.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),l.NextInSEL=null,l.PrevInSEL=null,!0},t.Clipper.prototype.CopyAELToSEL=function(){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;i!==null;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i=i.NextInAEL},t.Clipper.prototype.SwapPositionsInSEL=function(i,l){if(!(i.NextInSEL===null&&i.PrevInSEL===null)&&!(l.NextInSEL===null&&l.PrevInSEL===null)){if(i.NextInSEL===l){var c=l.NextInSEL;c!==null&&(c.PrevInSEL=i);var f=i.PrevInSEL;f!==null&&(f.NextInSEL=l),l.PrevInSEL=f,l.NextInSEL=i,i.PrevInSEL=l,i.NextInSEL=c}else if(l.NextInSEL===i){var c=i.NextInSEL;c!==null&&(c.PrevInSEL=l);var f=l.PrevInSEL;f!==null&&(f.NextInSEL=i),i.PrevInSEL=f,i.NextInSEL=l,l.PrevInSEL=i,l.NextInSEL=c}else{var c=i.NextInSEL,f=i.PrevInSEL;i.NextInSEL=l.NextInSEL,i.NextInSEL!==null&&(i.NextInSEL.PrevInSEL=i),i.PrevInSEL=l.PrevInSEL,i.PrevInSEL!==null&&(i.PrevInSEL.NextInSEL=i),l.NextInSEL=c,l.NextInSEL!==null&&(l.NextInSEL.PrevInSEL=l),l.PrevInSEL=f,l.PrevInSEL!==null&&(l.PrevInSEL.NextInSEL=l)}i.PrevInSEL===null?this.m_SortedEdges=i:l.PrevInSEL===null&&(this.m_SortedEdges=l)}},t.Clipper.prototype.AddLocalMaxPoly=function(i,l,c){this.AddOutPt(i,c),l.WindDelta===0&&this.AddOutPt(l,c),i.OutIdx===l.OutIdx?(i.OutIdx=-1,l.OutIdx=-1):i.OutIdx<l.OutIdx?this.AppendPolygon(i,l):this.AppendPolygon(l,i)},t.Clipper.prototype.AddLocalMinPoly=function(i,l,c){var f,m,C;if(t.ClipperBase.IsHorizontal(l)||i.Dx>l.Dx?(f=this.AddOutPt(i,c),l.OutIdx=i.OutIdx,i.Side=t.EdgeSide.esLeft,l.Side=t.EdgeSide.esRight,m=i,m.PrevInAEL===l?C=l.PrevInAEL:C=m.PrevInAEL):(f=this.AddOutPt(l,c),i.OutIdx=l.OutIdx,i.Side=t.EdgeSide.esRight,l.Side=t.EdgeSide.esLeft,m=l,m.PrevInAEL===i?C=i.PrevInAEL:C=m.PrevInAEL),C!==null&&C.OutIdx>=0&&C.Top.Y<c.Y&&m.Top.Y<c.Y){var _=t.Clipper.TopX(C,c.Y),L=t.Clipper.TopX(m,c.Y);if(_===L&&m.WindDelta!==0&&C.WindDelta!==0&&t.ClipperBase.SlopesEqual5(new t.IntPoint2(_,c.Y),C.Top,new t.IntPoint2(L,c.Y),m.Top,this.m_UseFullRange)){var j=this.AddOutPt(C,c);this.AddJoin(f,j,m.Top)}}return f},t.Clipper.prototype.AddOutPt=function(i,l){if(i.OutIdx<0){var c=this.CreateOutRec();c.IsOpen=i.WindDelta===0;var f=new t.OutPt;return c.Pts=f,f.Idx=c.Idx,f.Pt.X=l.X,f.Pt.Y=l.Y,t.use_xyz&&(f.Pt.Z=l.Z),f.Next=f,f.Prev=f,c.IsOpen||this.SetHoleState(i,c),i.OutIdx=c.Idx,f}else{var c=this.m_PolyOuts[i.OutIdx],m=c.Pts,C=i.Side===t.EdgeSide.esLeft;if(C&&t.IntPoint.op_Equality(l,m.Pt))return m;if(!C&&t.IntPoint.op_Equality(l,m.Prev.Pt))return m.Prev;var f=new t.OutPt;return f.Idx=c.Idx,f.Pt.X=l.X,f.Pt.Y=l.Y,t.use_xyz&&(f.Pt.Z=l.Z),f.Next=m,f.Prev=m.Prev,f.Prev.Next=f,m.Prev=f,C&&(c.Pts=f),f}},t.Clipper.prototype.GetLastOutPt=function(i){var l=this.m_PolyOuts[i.OutIdx];return i.Side===t.EdgeSide.esLeft?l.Pts:l.Pts.Prev},t.Clipper.prototype.SwapPoints=function(i,l){var c=new t.IntPoint1(i.Value);i.Value.X=l.Value.X,i.Value.Y=l.Value.Y,t.use_xyz&&(i.Value.Z=l.Value.Z),l.Value.X=c.X,l.Value.Y=c.Y,t.use_xyz&&(l.Value.Z=c.Z)},t.Clipper.prototype.HorzSegmentsOverlap=function(i,l,c,f){var m;return i>l&&(m=i,i=l,l=m),c>f&&(m=c,c=f,f=m),i<f&&c<l},t.Clipper.prototype.SetHoleState=function(i,l){for(var c=i.PrevInAEL,f=null;c!==null;)c.OutIdx>=0&&c.WindDelta!==0&&(f===null?f=c:f.OutIdx===c.OutIdx&&(f=null)),c=c.PrevInAEL;f===null?(l.FirstLeft=null,l.IsHole=!1):(l.FirstLeft=this.m_PolyOuts[f.OutIdx],l.IsHole=!l.FirstLeft.IsHole)},t.Clipper.prototype.GetDx=function(i,l){return i.Y===l.Y?t.ClipperBase.horizontal:(l.X-i.X)/(l.Y-i.Y)},t.Clipper.prototype.FirstIsBottomPt=function(i,l){for(var c=i.Prev;t.IntPoint.op_Equality(c.Pt,i.Pt)&&c!==i;)c=c.Prev;var f=Math.abs(this.GetDx(i.Pt,c.Pt));for(c=i.Next;t.IntPoint.op_Equality(c.Pt,i.Pt)&&c!==i;)c=c.Next;var m=Math.abs(this.GetDx(i.Pt,c.Pt));for(c=l.Prev;t.IntPoint.op_Equality(c.Pt,l.Pt)&&c!==l;)c=c.Prev;var C=Math.abs(this.GetDx(l.Pt,c.Pt));for(c=l.Next;t.IntPoint.op_Equality(c.Pt,l.Pt)&&c!==l;)c=c.Next;var _=Math.abs(this.GetDx(l.Pt,c.Pt));return Math.max(f,m)===Math.max(C,_)&&Math.min(f,m)===Math.min(C,_)?this.Area(i)>0:f>=C&&f>=_||m>=C&&m>=_},t.Clipper.prototype.GetBottomPt=function(i){for(var l=null,c=i.Next;c!==i;)c.Pt.Y>i.Pt.Y?(i=c,l=null):c.Pt.Y===i.Pt.Y&&c.Pt.X<=i.Pt.X&&(c.Pt.X<i.Pt.X?(l=null,i=c):c.Next!==i&&c.Prev!==i&&(l=c)),c=c.Next;if(l!==null)for(;l!==c;)for(this.FirstIsBottomPt(c,l)||(i=l),l=l.Next;t.IntPoint.op_Inequality(l.Pt,i.Pt);)l=l.Next;return i},t.Clipper.prototype.GetLowermostRec=function(i,l){i.BottomPt===null&&(i.BottomPt=this.GetBottomPt(i.Pts)),l.BottomPt===null&&(l.BottomPt=this.GetBottomPt(l.Pts));var c=i.BottomPt,f=l.BottomPt;return c.Pt.Y>f.Pt.Y?i:c.Pt.Y<f.Pt.Y?l:c.Pt.X<f.Pt.X?i:c.Pt.X>f.Pt.X||c.Next===c?l:f.Next===f||this.FirstIsBottomPt(c,f)?i:l},t.Clipper.prototype.OutRec1RightOfOutRec2=function(i,l){do if(i=i.FirstLeft,i===l)return!0;while(i!==null);return!1},t.Clipper.prototype.GetOutRec=function(i){for(var l=this.m_PolyOuts[i];l!==this.m_PolyOuts[l.Idx];)l=this.m_PolyOuts[l.Idx];return l},t.Clipper.prototype.AppendPolygon=function(i,l){var c=this.m_PolyOuts[i.OutIdx],f=this.m_PolyOuts[l.OutIdx],m;this.OutRec1RightOfOutRec2(c,f)?m=f:this.OutRec1RightOfOutRec2(f,c)?m=c:m=this.GetLowermostRec(c,f);var C=c.Pts,_=C.Prev,L=f.Pts,j=L.Prev;i.Side===t.EdgeSide.esLeft?l.Side===t.EdgeSide.esLeft?(this.ReversePolyPtLinks(L),L.Next=C,C.Prev=L,_.Next=j,j.Prev=_,c.Pts=j):(j.Next=C,C.Prev=j,L.Prev=_,_.Next=L,c.Pts=L):l.Side===t.EdgeSide.esRight?(this.ReversePolyPtLinks(L),_.Next=j,j.Prev=_,L.Next=C,C.Prev=L):(_.Next=L,L.Prev=_,C.Prev=j,j.Next=C),c.BottomPt=null,m===f&&(f.FirstLeft!==c&&(c.FirstLeft=f.FirstLeft),c.IsHole=f.IsHole),f.Pts=null,f.BottomPt=null,f.FirstLeft=c;var V=i.OutIdx,se=l.OutIdx;i.OutIdx=-1,l.OutIdx=-1;for(var J=this.m_ActiveEdges;J!==null;){if(J.OutIdx===se){J.OutIdx=V,J.Side=i.Side;break}J=J.NextInAEL}f.Idx=c.Idx},t.Clipper.prototype.ReversePolyPtLinks=function(i){if(i!==null){var l,c;l=i;do c=l.Next,l.Next=l.Prev,l.Prev=c,l=c;while(l!==i)}},t.Clipper.SwapSides=function(i,l){var c=i.Side;i.Side=l.Side,l.Side=c},t.Clipper.SwapPolyIndexes=function(i,l){var c=i.OutIdx;i.OutIdx=l.OutIdx,l.OutIdx=c},t.Clipper.prototype.IntersectEdges=function(i,l,c){var f=i.OutIdx>=0,m=l.OutIdx>=0;if(t.use_xyz&&this.SetZ(c,i,l),t.use_lines&&(i.WindDelta===0||l.WindDelta===0)){if(i.WindDelta===0&&l.WindDelta===0)return;i.PolyTyp===l.PolyTyp&&i.WindDelta!==l.WindDelta&&this.m_ClipType===t.ClipType.ctUnion?i.WindDelta===0?m&&(this.AddOutPt(i,c),f&&(i.OutIdx=-1)):f&&(this.AddOutPt(l,c),m&&(l.OutIdx=-1)):i.PolyTyp!==l.PolyTyp&&(i.WindDelta===0&&Math.abs(l.WindCnt)===1&&(this.m_ClipType!==t.ClipType.ctUnion||l.WindCnt2===0)?(this.AddOutPt(i,c),f&&(i.OutIdx=-1)):l.WindDelta===0&&Math.abs(i.WindCnt)===1&&(this.m_ClipType!==t.ClipType.ctUnion||i.WindCnt2===0)&&(this.AddOutPt(l,c),m&&(l.OutIdx=-1)));return}if(i.PolyTyp===l.PolyTyp)if(this.IsEvenOddFillType(i)){var C=i.WindCnt;i.WindCnt=l.WindCnt,l.WindCnt=C}else i.WindCnt+l.WindDelta===0?i.WindCnt=-i.WindCnt:i.WindCnt+=l.WindDelta,l.WindCnt-i.WindDelta===0?l.WindCnt=-l.WindCnt:l.WindCnt-=i.WindDelta;else this.IsEvenOddFillType(l)?i.WindCnt2=i.WindCnt2===0?1:0:i.WindCnt2+=l.WindDelta,this.IsEvenOddFillType(i)?l.WindCnt2=l.WindCnt2===0?1:0:l.WindCnt2-=i.WindDelta;var _,L,j,V;i.PolyTyp===t.PolyType.ptSubject?(_=this.m_SubjFillType,j=this.m_ClipFillType):(_=this.m_ClipFillType,j=this.m_SubjFillType),l.PolyTyp===t.PolyType.ptSubject?(L=this.m_SubjFillType,V=this.m_ClipFillType):(L=this.m_ClipFillType,V=this.m_SubjFillType);var se,J;switch(_){case t.PolyFillType.pftPositive:se=i.WindCnt;break;case t.PolyFillType.pftNegative:se=-i.WindCnt;break;default:se=Math.abs(i.WindCnt);break}switch(L){case t.PolyFillType.pftPositive:J=l.WindCnt;break;case t.PolyFillType.pftNegative:J=-l.WindCnt;break;default:J=Math.abs(l.WindCnt);break}if(f&&m)se!==0&&se!==1||J!==0&&J!==1||i.PolyTyp!==l.PolyTyp&&this.m_ClipType!==t.ClipType.ctXor?this.AddLocalMaxPoly(i,l,c):(this.AddOutPt(i,c),this.AddOutPt(l,c),t.Clipper.SwapSides(i,l),t.Clipper.SwapPolyIndexes(i,l));else if(f)(J===0||J===1)&&(this.AddOutPt(i,c),t.Clipper.SwapSides(i,l),t.Clipper.SwapPolyIndexes(i,l));else if(m)(se===0||se===1)&&(this.AddOutPt(l,c),t.Clipper.SwapSides(i,l),t.Clipper.SwapPolyIndexes(i,l));else if((se===0||se===1)&&(J===0||J===1)){var de,Ce;switch(j){case t.PolyFillType.pftPositive:de=i.WindCnt2;break;case t.PolyFillType.pftNegative:de=-i.WindCnt2;break;default:de=Math.abs(i.WindCnt2);break}switch(V){case t.PolyFillType.pftPositive:Ce=l.WindCnt2;break;case t.PolyFillType.pftNegative:Ce=-l.WindCnt2;break;default:Ce=Math.abs(l.WindCnt2);break}if(i.PolyTyp!==l.PolyTyp)this.AddLocalMinPoly(i,l,c);else if(se===1&&J===1)switch(this.m_ClipType){case t.ClipType.ctIntersection:de>0&&Ce>0&&this.AddLocalMinPoly(i,l,c);break;case t.ClipType.ctUnion:de<=0&&Ce<=0&&this.AddLocalMinPoly(i,l,c);break;case t.ClipType.ctDifference:(i.PolyTyp===t.PolyType.ptClip&&de>0&&Ce>0||i.PolyTyp===t.PolyType.ptSubject&&de<=0&&Ce<=0)&&this.AddLocalMinPoly(i,l,c);break;case t.ClipType.ctXor:this.AddLocalMinPoly(i,l,c);break}else t.Clipper.SwapSides(i,l)}},t.Clipper.prototype.DeleteFromSEL=function(i){var l=i.PrevInSEL,c=i.NextInSEL;l===null&&c===null&&i!==this.m_SortedEdges||(l!==null?l.NextInSEL=c:this.m_SortedEdges=c,c!==null&&(c.PrevInSEL=l),i.NextInSEL=null,i.PrevInSEL=null)},t.Clipper.prototype.ProcessHorizontals=function(){for(var i={};this.PopEdgeFromSEL(i);)this.ProcessHorizontal(i.v)},t.Clipper.prototype.GetHorzDirection=function(i,l){i.Bot.X<i.Top.X?(l.Left=i.Bot.X,l.Right=i.Top.X,l.Dir=t.Direction.dLeftToRight):(l.Left=i.Top.X,l.Right=i.Bot.X,l.Dir=t.Direction.dRightToLeft)},t.Clipper.prototype.ProcessHorizontal=function(i){var l={Dir:null,Left:null,Right:null};this.GetHorzDirection(i,l);for(var c=l.Dir,f=l.Left,m=l.Right,C=i.WindDelta===0,_=i,L=null;_.NextInLML!==null&&t.ClipperBase.IsHorizontal(_.NextInLML);)_=_.NextInLML;_.NextInLML===null&&(L=this.GetMaximaPair(_));var j=this.m_Maxima;if(j!==null)if(c===t.Direction.dLeftToRight){for(;j!==null&&j.X<=i.Bot.X;)j=j.Next;j!==null&&j.X>=_.Top.X&&(j=null)}else{for(;j.Next!==null&&j.Next.X<i.Bot.X;)j=j.Next;j.X<=_.Top.X&&(j=null)}for(var V=null;;){for(var se=i===_,J=this.GetNextInAEL(i,c);J!==null;){if(j!==null)if(c===t.Direction.dLeftToRight)for(;j!==null&&j.X<J.Curr.X;)i.OutIdx>=0&&!C&&this.AddOutPt(i,new t.IntPoint2(j.X,i.Bot.Y)),j=j.Next;else for(;j!==null&&j.X>J.Curr.X;)i.OutIdx>=0&&!C&&this.AddOutPt(i,new t.IntPoint2(j.X,i.Bot.Y)),j=j.Prev;if(c===t.Direction.dLeftToRight&&J.Curr.X>m||c===t.Direction.dRightToLeft&&J.Curr.X<f||J.Curr.X===i.Top.X&&i.NextInLML!==null&&J.Dx<i.NextInLML.Dx)break;if(i.OutIdx>=0&&!C){t.use_xyz&&(c===t.Direction.dLeftToRight?this.SetZ(J.Curr,i,J):this.SetZ(J.Curr,J,i)),V=this.AddOutPt(i,J.Curr);for(var de=this.m_SortedEdges;de!==null;){if(de.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,de.Bot.X,de.Top.X)){var Ce=this.GetLastOutPt(de);this.AddJoin(Ce,V,de.Top)}de=de.NextInSEL}this.AddGhostJoin(V,i.Bot)}if(J===L&&se){i.OutIdx>=0&&this.AddLocalMaxPoly(i,L,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(L);return}if(c===t.Direction.dLeftToRight){var _e=new t.IntPoint2(J.Curr.X,i.Curr.Y);this.IntersectEdges(i,J,_e)}else{var _e=new t.IntPoint2(J.Curr.X,i.Curr.Y);this.IntersectEdges(J,i,_e)}var ke=this.GetNextInAEL(J,c);this.SwapPositionsInAEL(i,J),J=ke}if(i.NextInLML===null||!t.ClipperBase.IsHorizontal(i.NextInLML))break;i=this.UpdateEdgeIntoAEL(i),i.OutIdx>=0&&this.AddOutPt(i,i.Bot),l={Dir:c,Left:f,Right:m},this.GetHorzDirection(i,l),c=l.Dir,f=l.Left,m=l.Right}if(i.OutIdx>=0&&V===null){V=this.GetLastOutPt(i);for(var de=this.m_SortedEdges;de!==null;){if(de.OutIdx>=0&&this.HorzSegmentsOverlap(i.Bot.X,i.Top.X,de.Bot.X,de.Top.X)){var Ce=this.GetLastOutPt(de);this.AddJoin(Ce,V,de.Top)}de=de.NextInSEL}this.AddGhostJoin(V,i.Top)}if(i.NextInLML!==null)if(i.OutIdx>=0){if(V=this.AddOutPt(i,i.Top),i=this.UpdateEdgeIntoAEL(i),i.WindDelta===0)return;var je=i.PrevInAEL,ke=i.NextInAEL;if(je!==null&&je.Curr.X===i.Bot.X&&je.Curr.Y===i.Bot.Y&&je.WindDelta===0&&je.OutIdx>=0&&je.Curr.Y>je.Top.Y&&t.ClipperBase.SlopesEqual3(i,je,this.m_UseFullRange)){var Ce=this.AddOutPt(je,i.Bot);this.AddJoin(V,Ce,i.Top)}else if(ke!==null&&ke.Curr.X===i.Bot.X&&ke.Curr.Y===i.Bot.Y&&ke.WindDelta!==0&&ke.OutIdx>=0&&ke.Curr.Y>ke.Top.Y&&t.ClipperBase.SlopesEqual3(i,ke,this.m_UseFullRange)){var Ce=this.AddOutPt(ke,i.Bot);this.AddJoin(V,Ce,i.Top)}}else i=this.UpdateEdgeIntoAEL(i);else i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i)},t.Clipper.prototype.GetNextInAEL=function(i,l){return l===t.Direction.dLeftToRight?i.NextInAEL:i.PrevInAEL},t.Clipper.prototype.IsMinima=function(i){return i!==null&&i.Prev.NextInLML!==i&&i.Next.NextInLML!==i},t.Clipper.prototype.IsMaxima=function(i,l){return i!==null&&i.Top.Y===l&&i.NextInLML===null},t.Clipper.prototype.IsIntermediate=function(i,l){return i.Top.Y===l&&i.NextInLML!==null},t.Clipper.prototype.GetMaximaPair=function(i){return t.IntPoint.op_Equality(i.Next.Top,i.Top)&&i.Next.NextInLML===null?i.Next:t.IntPoint.op_Equality(i.Prev.Top,i.Top)&&i.Prev.NextInLML===null?i.Prev:null},t.Clipper.prototype.GetMaximaPairEx=function(i){var l=this.GetMaximaPair(i);return l===null||l.OutIdx===t.ClipperBase.Skip||l.NextInAEL===l.PrevInAEL&&!t.ClipperBase.IsHorizontal(l)?null:l},t.Clipper.prototype.ProcessIntersections=function(i){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(i),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,t.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},t.Clipper.prototype.BuildIntersectList=function(i){if(this.m_ActiveEdges!==null){var l=this.m_ActiveEdges;for(this.m_SortedEdges=l;l!==null;)l.PrevInSEL=l.PrevInAEL,l.NextInSEL=l.NextInAEL,l.Curr.X=t.Clipper.TopX(l,i),l=l.NextInAEL;for(var c=!0;c&&this.m_SortedEdges!==null;){for(c=!1,l=this.m_SortedEdges;l.NextInSEL!==null;){var f=l.NextInSEL,m=new t.IntPoint0;if(l.Curr.X>f.Curr.X){this.IntersectPoint(l,f,m),m.Y<i&&(m=new t.IntPoint2(t.Clipper.TopX(l,i),i));var C=new t.IntersectNode;C.Edge1=l,C.Edge2=f,C.Pt.X=m.X,C.Pt.Y=m.Y,t.use_xyz&&(C.Pt.Z=m.Z),this.m_IntersectList.push(C),this.SwapPositionsInSEL(l,f),c=!0}else l=f}if(l.PrevInSEL!==null)l.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},t.Clipper.prototype.EdgesAdjacent=function(i){return i.Edge1.NextInSEL===i.Edge2||i.Edge1.PrevInSEL===i.Edge2},t.Clipper.IntersectNodeSort=function(i,l){return l.Pt.Y-i.Pt.Y},t.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var i=this.m_IntersectList.length,l=0;l<i;l++){if(!this.EdgesAdjacent(this.m_IntersectList[l])){for(var c=l+1;c<i&&!this.EdgesAdjacent(this.m_IntersectList[c]);)c++;if(c===i)return!1;var f=this.m_IntersectList[l];this.m_IntersectList[l]=this.m_IntersectList[c],this.m_IntersectList[c]=f}this.SwapPositionsInSEL(this.m_IntersectList[l].Edge1,this.m_IntersectList[l].Edge2)}return!0},t.Clipper.prototype.ProcessIntersectList=function(){for(var i=0,l=this.m_IntersectList.length;i<l;i++){var c=this.m_IntersectList[i];this.IntersectEdges(c.Edge1,c.Edge2,c.Pt),this.SwapPositionsInAEL(c.Edge1,c.Edge2)}this.m_IntersectList.length=0};var Zy=function(i){return i<0?Math.ceil(i-.5):Math.round(i)},qy=function(i){return i<0?Math.ceil(i-.5):Math.floor(i+.5)},Ky=function(i){return i<0?-Math.round(Math.abs(i)):Math.round(i)},Qy=function(i){return i<0?(i-=.5,i<-2147483648?Math.ceil(i):i|0):(i+=.5,i>2147483647?Math.floor(i):i|0)};s.msie?t.Clipper.Round=Zy:s.chromium?t.Clipper.Round=Ky:s.safari?t.Clipper.Round=Qy:t.Clipper.Round=qy,t.Clipper.TopX=function(i,l){return l===i.Top.Y?i.Top.X:i.Bot.X+t.Clipper.Round(i.Dx*(l-i.Bot.Y))},t.Clipper.prototype.IntersectPoint=function(i,l,c){c.X=0,c.Y=0;var f,m;if(i.Dx===l.Dx){c.Y=i.Curr.Y,c.X=t.Clipper.TopX(i,c.Y);return}if(i.Delta.X===0)c.X=i.Bot.X,t.ClipperBase.IsHorizontal(l)?c.Y=l.Bot.Y:(m=l.Bot.Y-l.Bot.X/l.Dx,c.Y=t.Clipper.Round(c.X/l.Dx+m));else if(l.Delta.X===0)c.X=l.Bot.X,t.ClipperBase.IsHorizontal(i)?c.Y=i.Bot.Y:(f=i.Bot.Y-i.Bot.X/i.Dx,c.Y=t.Clipper.Round(c.X/i.Dx+f));else{f=i.Bot.X-i.Bot.Y*i.Dx,m=l.Bot.X-l.Bot.Y*l.Dx;var C=(m-f)/(i.Dx-l.Dx);c.Y=t.Clipper.Round(C),Math.abs(i.Dx)<Math.abs(l.Dx)?c.X=t.Clipper.Round(i.Dx*C+f):c.X=t.Clipper.Round(l.Dx*C+m)}if(c.Y<i.Top.Y||c.Y<l.Top.Y){if(i.Top.Y>l.Top.Y)return c.Y=i.Top.Y,c.X=t.Clipper.TopX(l,i.Top.Y),c.X<i.Top.X;c.Y=l.Top.Y,Math.abs(i.Dx)<Math.abs(l.Dx)?c.X=t.Clipper.TopX(i,c.Y):c.X=t.Clipper.TopX(l,c.Y)}c.Y>i.Curr.Y&&(c.Y=i.Curr.Y,Math.abs(i.Dx)>Math.abs(l.Dx)?c.X=t.Clipper.TopX(l,c.Y):c.X=t.Clipper.TopX(i,c.Y))},t.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(i){for(var l=this.m_ActiveEdges;l!==null;){var c=this.IsMaxima(l,i);if(c){var f=this.GetMaximaPairEx(l);c=f===null||!t.ClipperBase.IsHorizontal(f)}if(c){this.StrictlySimple&&this.InsertMaxima(l.Top.X);var m=l.PrevInAEL;this.DoMaxima(l),m===null?l=this.m_ActiveEdges:l=m.NextInAEL}else{if(this.IsIntermediate(l,i)&&t.ClipperBase.IsHorizontal(l.NextInLML)?(l=this.UpdateEdgeIntoAEL(l),l.OutIdx>=0&&this.AddOutPt(l,l.Bot),this.AddEdgeToSEL(l)):(l.Curr.X=t.Clipper.TopX(l,i),l.Curr.Y=i),t.use_xyz&&(l.Top.Y===i?l.Curr.Z=l.Top.Z:l.Bot.Y===i?l.Curr.Z=l.Bot.Z:l.Curr.Z=0),this.StrictlySimple){var m=l.PrevInAEL;if(l.OutIdx>=0&&l.WindDelta!==0&&m!==null&&m.OutIdx>=0&&m.Curr.X===l.Curr.X&&m.WindDelta!==0){var C=new t.IntPoint1(l.Curr);t.use_xyz&&this.SetZ(C,m,l);var _=this.AddOutPt(m,C),L=this.AddOutPt(l,C);this.AddJoin(_,L,C)}}l=l.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,l=this.m_ActiveEdges;l!==null;){if(this.IsIntermediate(l,i)){var _=null;l.OutIdx>=0&&(_=this.AddOutPt(l,l.Top)),l=this.UpdateEdgeIntoAEL(l);var m=l.PrevInAEL,j=l.NextInAEL;if(m!==null&&m.Curr.X===l.Bot.X&&m.Curr.Y===l.Bot.Y&&_!==null&&m.OutIdx>=0&&m.Curr.Y===m.Top.Y&&t.ClipperBase.SlopesEqual5(l.Curr,l.Top,m.Curr,m.Top,this.m_UseFullRange)&&l.WindDelta!==0&&m.WindDelta!==0){var L=this.AddOutPt(ePrev2,l.Bot);this.AddJoin(_,L,l.Top)}else if(j!==null&&j.Curr.X===l.Bot.X&&j.Curr.Y===l.Bot.Y&&_!==null&&j.OutIdx>=0&&j.Curr.Y===j.Top.Y&&t.ClipperBase.SlopesEqual5(l.Curr,l.Top,j.Curr,j.Top,this.m_UseFullRange)&&l.WindDelta!==0&&j.WindDelta!==0){var L=this.AddOutPt(j,l.Bot);this.AddJoin(_,L,l.Top)}}l=l.NextInAEL}},t.Clipper.prototype.DoMaxima=function(i){var l=this.GetMaximaPairEx(i);if(l===null){i.OutIdx>=0&&this.AddOutPt(i,i.Top),this.DeleteFromAEL(i);return}for(var c=i.NextInAEL;c!==null&&c!==l;)this.IntersectEdges(i,c,i.Top),this.SwapPositionsInAEL(i,c),c=i.NextInAEL;i.OutIdx===-1&&l.OutIdx===-1?(this.DeleteFromAEL(i),this.DeleteFromAEL(l)):i.OutIdx>=0&&l.OutIdx>=0?(i.OutIdx>=0&&this.AddLocalMaxPoly(i,l,i.Top),this.DeleteFromAEL(i),this.DeleteFromAEL(l)):t.use_lines&&i.WindDelta===0?(i.OutIdx>=0&&(this.AddOutPt(i,i.Top),i.OutIdx=t.ClipperBase.Unassigned),this.DeleteFromAEL(i),l.OutIdx>=0&&(this.AddOutPt(l,i.Top),l.OutIdx=t.ClipperBase.Unassigned),this.DeleteFromAEL(l)):t.Error("DoMaxima error")},t.Clipper.ReversePaths=function(i){for(var l=0,c=i.length;l<c;l++)i[l].reverse()},t.Clipper.Orientation=function(i){return t.Clipper.Area(i)>=0},t.Clipper.prototype.PointCount=function(i){if(i===null)return 0;var l=0,c=i;do l++,c=c.Next;while(c!==i);return l},t.Clipper.prototype.BuildResult=function(i){t.Clear(i);for(var l=0,c=this.m_PolyOuts.length;l<c;l++){var f=this.m_PolyOuts[l];if(f.Pts!==null){var m=f.Pts.Prev,C=this.PointCount(m);if(!(C<2)){for(var _=new Array(C),L=0;L<C;L++)_[L]=m.Pt,m=m.Prev;i.push(_)}}}},t.Clipper.prototype.BuildResult2=function(i){i.Clear();for(var l=0,c=this.m_PolyOuts.length;l<c;l++){var f=this.m_PolyOuts[l],m=this.PointCount(f.Pts);if(!(f.IsOpen&&m<2||!f.IsOpen&&m<3)){this.FixHoleLinkage(f);var C=new t.PolyNode;i.m_AllPolys.push(C),f.PolyNode=C,C.m_polygon.length=m;for(var _=f.Pts.Prev,L=0;L<m;L++)C.m_polygon[L]=_.Pt,_=_.Prev}}for(var l=0,c=this.m_PolyOuts.length;l<c;l++){var f=this.m_PolyOuts[l];f.PolyNode!==null&&(f.IsOpen?(f.PolyNode.IsOpen=!0,i.AddChild(f.PolyNode)):f.FirstLeft!==null&&f.FirstLeft.PolyNode!==null?f.FirstLeft.PolyNode.AddChild(f.PolyNode):i.AddChild(f.PolyNode))}},t.Clipper.prototype.FixupOutPolyline=function(i){for(var l=i.Pts,c=l.Prev;l!==c;)if(l=l.Next,t.IntPoint.op_Equality(l.Pt,l.Prev.Pt)){l===c&&(c=l.Prev);var f=l.Prev;f.Next=l.Next,l.Next.Prev=f,l=f}l===l.Prev&&(i.Pts=null)},t.Clipper.prototype.FixupOutPolygon=function(i){var l=null;i.BottomPt=null;for(var c=i.Pts,f=this.PreserveCollinear||this.StrictlySimple;;){if(c.Prev===c||c.Prev===c.Next){i.Pts=null;return}if(t.IntPoint.op_Equality(c.Pt,c.Next.Pt)||t.IntPoint.op_Equality(c.Pt,c.Prev.Pt)||t.ClipperBase.SlopesEqual4(c.Prev.Pt,c.Pt,c.Next.Pt,this.m_UseFullRange)&&(!f||!this.Pt2IsBetweenPt1AndPt3(c.Prev.Pt,c.Pt,c.Next.Pt)))l=null,c.Prev.Next=c.Next,c.Next.Prev=c.Prev,c=c.Prev;else{if(c===l)break;l===null&&(l=c),c=c.Next}}i.Pts=c},t.Clipper.prototype.DupOutPt=function(i,l){var c=new t.OutPt;return c.Pt.X=i.Pt.X,c.Pt.Y=i.Pt.Y,t.use_xyz&&(c.Pt.Z=i.Pt.Z),c.Idx=i.Idx,l?(c.Next=i.Next,c.Prev=i,i.Next.Prev=c,i.Next=c):(c.Prev=i.Prev,c.Next=i,i.Prev.Next=c,i.Prev=c),c},t.Clipper.prototype.GetOverlap=function(i,l,c,f,m){return i<l?c<f?(m.Left=Math.max(i,c),m.Right=Math.min(l,f)):(m.Left=Math.max(i,f),m.Right=Math.min(l,c)):c<f?(m.Left=Math.max(l,c),m.Right=Math.min(i,f)):(m.Left=Math.max(l,f),m.Right=Math.min(i,c)),m.Left<m.Right},t.Clipper.prototype.JoinHorz=function(i,l,c,f,m,C){var _=i.Pt.X>l.Pt.X?t.Direction.dRightToLeft:t.Direction.dLeftToRight,L=c.Pt.X>f.Pt.X?t.Direction.dRightToLeft:t.Direction.dLeftToRight;if(_===L)return!1;if(_===t.Direction.dLeftToRight){for(;i.Next.Pt.X<=m.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===m.Y;)i=i.Next;C&&i.Pt.X!==m.X&&(i=i.Next),l=this.DupOutPt(i,!C),t.IntPoint.op_Inequality(l.Pt,m)&&(i=l,i.Pt.X=m.X,i.Pt.Y=m.Y,t.use_xyz&&(i.Pt.Z=m.Z),l=this.DupOutPt(i,!C))}else{for(;i.Next.Pt.X>=m.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===m.Y;)i=i.Next;!C&&i.Pt.X!==m.X&&(i=i.Next),l=this.DupOutPt(i,C),t.IntPoint.op_Inequality(l.Pt,m)&&(i=l,i.Pt.X=m.X,i.Pt.Y=m.Y,t.use_xyz&&(i.Pt.Z=m.Z),l=this.DupOutPt(i,C))}if(L===t.Direction.dLeftToRight){for(;c.Next.Pt.X<=m.X&&c.Next.Pt.X>=c.Pt.X&&c.Next.Pt.Y===m.Y;)c=c.Next;C&&c.Pt.X!==m.X&&(c=c.Next),f=this.DupOutPt(c,!C),t.IntPoint.op_Inequality(f.Pt,m)&&(c=f,c.Pt.X=m.X,c.Pt.Y=m.Y,t.use_xyz&&(c.Pt.Z=m.Z),f=this.DupOutPt(c,!C))}else{for(;c.Next.Pt.X>=m.X&&c.Next.Pt.X<=c.Pt.X&&c.Next.Pt.Y===m.Y;)c=c.Next;!C&&c.Pt.X!==m.X&&(c=c.Next),f=this.DupOutPt(c,C),t.IntPoint.op_Inequality(f.Pt,m)&&(c=f,c.Pt.X=m.X,c.Pt.Y=m.Y,t.use_xyz&&(c.Pt.Z=m.Z),f=this.DupOutPt(c,C))}return _===t.Direction.dLeftToRight===C?(i.Prev=c,c.Next=i,l.Next=f,f.Prev=l):(i.Next=c,c.Prev=i,l.Prev=f,f.Next=l),!0},t.Clipper.prototype.JoinPoints=function(i,l,c){var f=i.OutPt1,m=new t.OutPt,C=i.OutPt2,_=new t.OutPt,L=i.OutPt1.Pt.Y===i.OffPt.Y;if(L&&t.IntPoint.op_Equality(i.OffPt,i.OutPt1.Pt)&&t.IntPoint.op_Equality(i.OffPt,i.OutPt2.Pt)){if(l!==c)return!1;for(m=i.OutPt1.Next;m!==f&&t.IntPoint.op_Equality(m.Pt,i.OffPt);)m=m.Next;var j=m.Pt.Y>i.OffPt.Y;for(_=i.OutPt2.Next;_!==C&&t.IntPoint.op_Equality(_.Pt,i.OffPt);)_=_.Next;var V=_.Pt.Y>i.OffPt.Y;return j===V?!1:j?(m=this.DupOutPt(f,!1),_=this.DupOutPt(C,!0),f.Prev=C,C.Next=f,m.Next=_,_.Prev=m,i.OutPt1=f,i.OutPt2=m,!0):(m=this.DupOutPt(f,!0),_=this.DupOutPt(C,!1),f.Next=C,C.Prev=f,m.Prev=_,_.Next=m,i.OutPt1=f,i.OutPt2=m,!0)}else if(L){for(m=f;f.Prev.Pt.Y===f.Pt.Y&&f.Prev!==m&&f.Prev!==C;)f=f.Prev;for(;m.Next.Pt.Y===m.Pt.Y&&m.Next!==f&&m.Next!==C;)m=m.Next;if(m.Next===f||m.Next===C)return!1;for(_=C;C.Prev.Pt.Y===C.Pt.Y&&C.Prev!==_&&C.Prev!==m;)C=C.Prev;for(;_.Next.Pt.Y===_.Pt.Y&&_.Next!==C&&_.Next!==f;)_=_.Next;if(_.Next===C||_.Next===f)return!1;var se={Left:null,Right:null};if(!this.GetOverlap(f.Pt.X,m.Pt.X,C.Pt.X,_.Pt.X,se))return!1;var J=se.Left,de=se.Right,Ce=new t.IntPoint0,_e;return f.Pt.X>=J&&f.Pt.X<=de?(Ce.X=f.Pt.X,Ce.Y=f.Pt.Y,t.use_xyz&&(Ce.Z=f.Pt.Z),_e=f.Pt.X>m.Pt.X):C.Pt.X>=J&&C.Pt.X<=de?(Ce.X=C.Pt.X,Ce.Y=C.Pt.Y,t.use_xyz&&(Ce.Z=C.Pt.Z),_e=C.Pt.X>_.Pt.X):m.Pt.X>=J&&m.Pt.X<=de?(Ce.X=m.Pt.X,Ce.Y=m.Pt.Y,t.use_xyz&&(Ce.Z=m.Pt.Z),_e=m.Pt.X>f.Pt.X):(Ce.X=_.Pt.X,Ce.Y=_.Pt.Y,t.use_xyz&&(Ce.Z=_.Pt.Z),_e=_.Pt.X>C.Pt.X),i.OutPt1=f,i.OutPt2=C,this.JoinHorz(f,m,C,_,Ce,_e)}else{for(m=f.Next;t.IntPoint.op_Equality(m.Pt,f.Pt)&&m!==f;)m=m.Next;var ke=m.Pt.Y>f.Pt.Y||!t.ClipperBase.SlopesEqual4(f.Pt,m.Pt,i.OffPt,this.m_UseFullRange);if(ke){for(m=f.Prev;t.IntPoint.op_Equality(m.Pt,f.Pt)&&m!==f;)m=m.Prev;if(m.Pt.Y>f.Pt.Y||!t.ClipperBase.SlopesEqual4(f.Pt,m.Pt,i.OffPt,this.m_UseFullRange))return!1}for(_=C.Next;t.IntPoint.op_Equality(_.Pt,C.Pt)&&_!==C;)_=_.Next;var je=_.Pt.Y>C.Pt.Y||!t.ClipperBase.SlopesEqual4(C.Pt,_.Pt,i.OffPt,this.m_UseFullRange);if(je){for(_=C.Prev;t.IntPoint.op_Equality(_.Pt,C.Pt)&&_!==C;)_=_.Prev;if(_.Pt.Y>C.Pt.Y||!t.ClipperBase.SlopesEqual4(C.Pt,_.Pt,i.OffPt,this.m_UseFullRange))return!1}return m===f||_===C||m===_||l===c&&ke===je?!1:ke?(m=this.DupOutPt(f,!1),_=this.DupOutPt(C,!0),f.Prev=C,C.Next=f,m.Next=_,_.Prev=m,i.OutPt1=f,i.OutPt2=m,!0):(m=this.DupOutPt(f,!0),_=this.DupOutPt(C,!1),f.Next=C,C.Prev=f,m.Prev=_,_.Next=m,i.OutPt1=f,i.OutPt2=m,!0)}},t.Clipper.GetBounds=function(i){for(var l=0,c=i.length;l<c&&i[l].length===0;)l++;if(l===c)return new t.IntRect(0,0,0,0);var f=new t.IntRect;for(f.left=i[l][0].X,f.right=f.left,f.top=i[l][0].Y,f.bottom=f.top;l<c;l++)for(var m=0,C=i[l].length;m<C;m++)i[l][m].X<f.left?f.left=i[l][m].X:i[l][m].X>f.right&&(f.right=i[l][m].X),i[l][m].Y<f.top?f.top=i[l][m].Y:i[l][m].Y>f.bottom&&(f.bottom=i[l][m].Y);return f},t.Clipper.prototype.GetBounds2=function(i){var l=i,c=new t.IntRect;for(c.left=i.Pt.X,c.right=i.Pt.X,c.top=i.Pt.Y,c.bottom=i.Pt.Y,i=i.Next;i!==l;)i.Pt.X<c.left&&(c.left=i.Pt.X),i.Pt.X>c.right&&(c.right=i.Pt.X),i.Pt.Y<c.top&&(c.top=i.Pt.Y),i.Pt.Y>c.bottom&&(c.bottom=i.Pt.Y),i=i.Next;return c},t.Clipper.PointInPolygon=function(i,l){var c=0,f=l.length;if(f<3)return 0;for(var m=l[0],C=1;C<=f;++C){var _=C===f?l[0]:l[C];if(_.Y===i.Y&&(_.X===i.X||m.Y===i.Y&&_.X>i.X==m.X<i.X))return-1;if(m.Y<i.Y!=_.Y<i.Y){if(m.X>=i.X)if(_.X>i.X)c=1-c;else{var L=(m.X-i.X)*(_.Y-i.Y)-(_.X-i.X)*(m.Y-i.Y);if(L===0)return-1;L>0==_.Y>m.Y&&(c=1-c)}else if(_.X>i.X){var L=(m.X-i.X)*(_.Y-i.Y)-(_.X-i.X)*(m.Y-i.Y);if(L===0)return-1;L>0==_.Y>m.Y&&(c=1-c)}}m=_}return c},t.Clipper.prototype.PointInPolygon=function(i,l){var c=0,f=l,m=i.X,C=i.Y,_=l.Pt.X,L=l.Pt.Y;do{l=l.Next;var j=l.Pt.X,V=l.Pt.Y;if(V===C&&(j===m||L===C&&j>m==_<m))return-1;if(L<C!=V<C){if(_>=m)if(j>m)c=1-c;else{var se=(_-m)*(V-C)-(j-m)*(L-C);if(se===0)return-1;se>0==V>L&&(c=1-c)}else if(j>m){var se=(_-m)*(V-C)-(j-m)*(L-C);if(se===0)return-1;se>0==V>L&&(c=1-c)}}_=j,L=V}while(f!==l);return c},t.Clipper.prototype.Poly2ContainsPoly1=function(i,l){var c=i;do{var f=this.PointInPolygon(c.Pt,l);if(f>=0)return f>0;c=c.Next}while(c!==i);return!0},t.Clipper.prototype.FixupFirstLefts1=function(i,l){for(var c,f,m=0,C=this.m_PolyOuts.length;m<C;m++)c=this.m_PolyOuts[m],f=t.Clipper.ParseFirstLeft(c.FirstLeft),c.Pts!==null&&f===i&&this.Poly2ContainsPoly1(c.Pts,l.Pts)&&(c.FirstLeft=l)},t.Clipper.prototype.FixupFirstLefts2=function(i,l){for(var c=l.FirstLeft,f,m,C=0,_=this.m_PolyOuts.length;C<_;C++)f=this.m_PolyOuts[C],!(f.Pts===null||f===l||f===i)&&(m=t.Clipper.ParseFirstLeft(f.FirstLeft),!(m!==c&&m!==i&&m!==l)&&(this.Poly2ContainsPoly1(f.Pts,i.Pts)?f.FirstLeft=i:this.Poly2ContainsPoly1(f.Pts,l.Pts)?f.FirstLeft=l:(f.FirstLeft===i||f.FirstLeft===l)&&(f.FirstLeft=c)))},t.Clipper.prototype.FixupFirstLefts3=function(i,l){for(var c,f,m=0,C=this.m_PolyOuts.length;m<C;m++)c=this.m_PolyOuts[m],f=t.Clipper.ParseFirstLeft(c.FirstLeft),c.Pts!==null&&f===i&&(c.FirstLeft=l)},t.Clipper.ParseFirstLeft=function(i){for(;i!==null&&i.Pts===null;)i=i.FirstLeft;return i},t.Clipper.prototype.JoinCommonEdges=function(){for(var i=0,l=this.m_Joins.length;i<l;i++){var c=this.m_Joins[i],f=this.GetOutRec(c.OutPt1.Idx),m=this.GetOutRec(c.OutPt2.Idx);if(!(f.Pts===null||m.Pts===null)&&!(f.IsOpen||m.IsOpen)){var C;f===m?C=f:this.OutRec1RightOfOutRec2(f,m)?C=m:this.OutRec1RightOfOutRec2(m,f)?C=f:C=this.GetLowermostRec(f,m),this.JoinPoints(c,f,m)&&(f===m?(f.Pts=c.OutPt1,f.BottomPt=null,m=this.CreateOutRec(),m.Pts=c.OutPt2,this.UpdateOutPtIdxs(m),this.Poly2ContainsPoly1(m.Pts,f.Pts)?(m.IsHole=!f.IsHole,m.FirstLeft=f,this.m_UsingPolyTree&&this.FixupFirstLefts2(m,f),(m.IsHole^this.ReverseSolution)==this.Area$1(m)>0&&this.ReversePolyPtLinks(m.Pts)):this.Poly2ContainsPoly1(f.Pts,m.Pts)?(m.IsHole=f.IsHole,f.IsHole=!m.IsHole,m.FirstLeft=f.FirstLeft,f.FirstLeft=m,this.m_UsingPolyTree&&this.FixupFirstLefts2(f,m),(f.IsHole^this.ReverseSolution)==this.Area$1(f)>0&&this.ReversePolyPtLinks(f.Pts)):(m.IsHole=f.IsHole,m.FirstLeft=f.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(f,m))):(m.Pts=null,m.BottomPt=null,m.Idx=f.Idx,f.IsHole=C.IsHole,C===m&&(f.FirstLeft=m.FirstLeft),m.FirstLeft=f,this.m_UsingPolyTree&&this.FixupFirstLefts3(m,f)))}}},t.Clipper.prototype.UpdateOutPtIdxs=function(i){var l=i.Pts;do l.Idx=i.Idx,l=l.Prev;while(l!==i.Pts)},t.Clipper.prototype.DoSimplePolygons=function(){for(var i=0;i<this.m_PolyOuts.length;){var l=this.m_PolyOuts[i++],c=l.Pts;if(!(c===null||l.IsOpen))do{for(var f=c.Next;f!==l.Pts;){if(t.IntPoint.op_Equality(c.Pt,f.Pt)&&f.Next!==c&&f.Prev!==c){var m=c.Prev,C=f.Prev;c.Prev=C,C.Next=c,f.Prev=m,m.Next=f,l.Pts=c;var _=this.CreateOutRec();_.Pts=f,this.UpdateOutPtIdxs(_),this.Poly2ContainsPoly1(_.Pts,l.Pts)?(_.IsHole=!l.IsHole,_.FirstLeft=l,this.m_UsingPolyTree&&this.FixupFirstLefts2(_,l)):this.Poly2ContainsPoly1(l.Pts,_.Pts)?(_.IsHole=l.IsHole,l.IsHole=!_.IsHole,_.FirstLeft=l.FirstLeft,l.FirstLeft=_,this.m_UsingPolyTree&&this.FixupFirstLefts2(l,_)):(_.IsHole=l.IsHole,_.FirstLeft=l.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(l,_)),f=c}f=f.Next}c=c.Next}while(c!==l.Pts)}},t.Clipper.Area=function(i){if(!Array.isArray(i))return 0;var l=i.length;if(l<3)return 0;for(var c=0,f=0,m=l-1;f<l;++f)c+=(i[m].X+i[f].X)*(i[m].Y-i[f].Y),m=f;return-c*.5},t.Clipper.prototype.Area=function(i){var l=i;if(i===null)return 0;var c=0;do c=c+(i.Prev.Pt.X+i.Pt.X)*(i.Prev.Pt.Y-i.Pt.Y),i=i.Next;while(i!==l);return c*.5},t.Clipper.prototype.Area$1=function(i){return this.Area(i.Pts)},t.Clipper.SimplifyPolygon=function(i,l){var c=new Array,f=new t.Clipper(0);return f.StrictlySimple=!0,f.AddPath(i,t.PolyType.ptSubject,!0),f.Execute(t.ClipType.ctUnion,c,l,l),c},t.Clipper.SimplifyPolygons=function(i,l){typeof l>"u"&&(l=t.PolyFillType.pftEvenOdd);var c=new Array,f=new t.Clipper(0);return f.StrictlySimple=!0,f.AddPaths(i,t.PolyType.ptSubject,!0),f.Execute(t.ClipType.ctUnion,c,l,l),c},t.Clipper.DistanceSqrd=function(i,l){var c=i.X-l.X,f=i.Y-l.Y;return c*c+f*f},t.Clipper.DistanceFromLineSqrd=function(i,l,c){var f=l.Y-c.Y,m=c.X-l.X,C=f*l.X+m*l.Y;return C=f*i.X+m*i.Y-C,C*C/(f*f+m*m)},t.Clipper.SlopesNearCollinear=function(i,l,c,f){return Math.abs(i.X-l.X)>Math.abs(i.Y-l.Y)?i.X>l.X==i.X<c.X?t.Clipper.DistanceFromLineSqrd(i,l,c)<f:l.X>i.X==l.X<c.X?t.Clipper.DistanceFromLineSqrd(l,i,c)<f:t.Clipper.DistanceFromLineSqrd(c,i,l)<f:i.Y>l.Y==i.Y<c.Y?t.Clipper.DistanceFromLineSqrd(i,l,c)<f:l.Y>i.Y==l.Y<c.Y?t.Clipper.DistanceFromLineSqrd(l,i,c)<f:t.Clipper.DistanceFromLineSqrd(c,i,l)<f},t.Clipper.PointsAreClose=function(i,l,c){var f=i.X-l.X,m=i.Y-l.Y;return f*f+m*m<=c},t.Clipper.ExcludeOp=function(i){var l=i.Prev;return l.Next=i.Next,i.Next.Prev=l,l.Idx=0,l},t.Clipper.CleanPolygon=function(i,l){typeof l>"u"&&(l=1.415);var c=i.length;if(c===0)return new Array;for(var f=new Array(c),m=0;m<c;++m)f[m]=new t.OutPt;for(var m=0;m<c;++m)f[m].Pt=i[m],f[m].Next=f[(m+1)%c],f[m].Next.Prev=f[m],f[m].Idx=0;for(var C=l*l,_=f[0];_.Idx===0&&_.Next!==_.Prev;)t.Clipper.PointsAreClose(_.Pt,_.Prev.Pt,C)?(_=t.Clipper.ExcludeOp(_),c--):t.Clipper.PointsAreClose(_.Prev.Pt,_.Next.Pt,C)?(t.Clipper.ExcludeOp(_.Next),_=t.Clipper.ExcludeOp(_),c-=2):t.Clipper.SlopesNearCollinear(_.Prev.Pt,_.Pt,_.Next.Pt,C)?(_=t.Clipper.ExcludeOp(_),c--):(_.Idx=1,_=_.Next);c<3&&(c=0);for(var L=new Array(c),m=0;m<c;++m)L[m]=new t.IntPoint1(_.Pt),_=_.Next;return f=null,L},t.Clipper.CleanPolygons=function(i,l){for(var c=new Array(i.length),f=0,m=i.length;f<m;f++)c[f]=t.Clipper.CleanPolygon(i[f],l);return c},t.Clipper.Minkowski=function(i,l,c,f){var m=f?1:0,C=i.length,_=l.length,L=new Array;if(c)for(var j=0;j<_;j++){for(var V=new Array(C),se=0,J=i.length,de=i[se];se<J;se++,de=i[se])V[se]=new t.IntPoint2(l[j].X+de.X,l[j].Y+de.Y);L.push(V)}else for(var j=0;j<_;j++){for(var V=new Array(C),se=0,J=i.length,de=i[se];se<J;se++,de=i[se])V[se]=new t.IntPoint2(l[j].X-de.X,l[j].Y-de.Y);L.push(V)}for(var Ce=new Array,j=0;j<_-1+m;j++)for(var se=0;se<C;se++){var _e=new Array;_e.push(L[j%_][se%C]),_e.push(L[(j+1)%_][se%C]),_e.push(L[(j+1)%_][(se+1)%C]),_e.push(L[j%_][(se+1)%C]),t.Clipper.Orientation(_e)||_e.reverse(),Ce.push(_e)}return Ce},t.Clipper.MinkowskiSum=function(i,l,c){if(l[0]instanceof Array){for(var m=l,_=new t.Paths,C=new t.Clipper,L=0;L<m.length;++L){var j=t.Clipper.Minkowski(i,m[L],!0,c);if(C.AddPaths(j,t.PolyType.ptSubject,!0),c){var f=t.Clipper.TranslatePath(m[L],i[0]);C.AddPath(f,t.PolyType.ptClip,!0)}}return C.Execute(t.ClipType.ctUnion,_,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),_}else{var f=l,m=t.Clipper.Minkowski(i,f,!0,c),C=new t.Clipper;return C.AddPaths(m,t.PolyType.ptSubject,!0),C.Execute(t.ClipType.ctUnion,m,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),m}},t.Clipper.TranslatePath=function(i,l){for(var c=new t.Path,f=0;f<i.length;f++)c.push(new t.IntPoint2(i[f].X+l.X,i[f].Y+l.Y));return c},t.Clipper.MinkowskiDiff=function(i,l){var c=t.Clipper.Minkowski(i,l,!1,!0),f=new t.Clipper;return f.AddPaths(c,t.PolyType.ptSubject,!0),f.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNonZero,t.PolyFillType.pftNonZero),c},t.Clipper.PolyTreeToPaths=function(i){var l=new Array;return t.Clipper.AddPolyNodeToPaths(i,t.Clipper.NodeType.ntAny,l),l},t.Clipper.AddPolyNodeToPaths=function(i,l,c){var f=!0;switch(l){case t.Clipper.NodeType.ntOpen:return;case t.Clipper.NodeType.ntClosed:f=!i.IsOpen;break}i.m_polygon.length>0&&f&&c.push(i.m_polygon);for(var m=0,C=i.Childs(),_=C.length,L=C[m];m<_;m++,L=C[m])t.Clipper.AddPolyNodeToPaths(L,l,c)},t.Clipper.OpenPathsFromPolyTree=function(i){for(var l=new t.Paths,c=0,f=i.ChildCount();c<f;c++)i.Childs()[c].IsOpen&&l.push(i.Childs()[c].m_polygon);return l},t.Clipper.ClosedPathsFromPolyTree=function(i){var l=new t.Paths;return t.Clipper.AddPolyNodeToPaths(i,t.Clipper.NodeType.ntClosed,l),l},Md(t.Clipper,t.ClipperBase),t.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},t.ClipperOffset=function(i,l){typeof i>"u"&&(i=2),typeof l>"u"&&(l=t.ClipperOffset.def_arc_tolerance),this.m_destPolys=new t.Paths,this.m_srcPoly=new t.Path,this.m_destPoly=new t.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new t.IntPoint0,this.m_polyNodes=new t.PolyNode,this.MiterLimit=i,this.ArcTolerance=l,this.m_lowest.X=-1},t.ClipperOffset.two_pi=6.28318530717959,t.ClipperOffset.def_arc_tolerance=.25,t.ClipperOffset.prototype.Clear=function(){t.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},t.ClipperOffset.Round=t.Clipper.Round,t.ClipperOffset.prototype.AddPath=function(i,l,c){var f=i.length-1;if(!(f<0)){var m=new t.PolyNode;if(m.m_jointype=l,m.m_endtype=c,c===t.EndType.etClosedLine||c===t.EndType.etClosedPolygon)for(;f>0&&t.IntPoint.op_Equality(i[0],i[f]);)f--;m.m_polygon.push(i[0]);for(var C=0,_=0,L=1;L<=f;L++)t.IntPoint.op_Inequality(m.m_polygon[C],i[L])&&(C++,m.m_polygon.push(i[L]),(i[L].Y>m.m_polygon[_].Y||i[L].Y===m.m_polygon[_].Y&&i[L].X<m.m_polygon[_].X)&&(_=C));if(!(c===t.EndType.etClosedPolygon&&C<2)&&(this.m_polyNodes.AddChild(m),c===t.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new t.IntPoint2(this.m_polyNodes.ChildCount()-1,_);else{var j=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(m.m_polygon[_].Y>j.Y||m.m_polygon[_].Y===j.Y&&m.m_polygon[_].X<j.X)&&(this.m_lowest=new t.IntPoint2(this.m_polyNodes.ChildCount()-1,_))}}},t.ClipperOffset.prototype.AddPaths=function(i,l,c){for(var f=0,m=i.length;f<m;f++)this.AddPath(i[f],l,c)},t.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!t.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var i=0;i<this.m_polyNodes.ChildCount();i++){var l=this.m_polyNodes.Childs()[i];(l.m_endtype===t.EndType.etClosedPolygon||l.m_endtype===t.EndType.etClosedLine&&t.Clipper.Orientation(l.m_polygon))&&l.m_polygon.reverse()}else for(var i=0;i<this.m_polyNodes.ChildCount();i++){var l=this.m_polyNodes.Childs()[i];l.m_endtype===t.EndType.etClosedLine&&!t.Clipper.Orientation(l.m_polygon)&&l.m_polygon.reverse()}},t.ClipperOffset.GetUnitNormal=function(i,l){var c=l.X-i.X,f=l.Y-i.Y;if(c===0&&f===0)return new t.DoublePoint2(0,0);var m=1/Math.sqrt(c*c+f*f);return c*=m,f*=m,new t.DoublePoint2(f,-c)},t.ClipperOffset.prototype.DoOffset=function(i){if(this.m_destPolys=new Array,this.m_delta=i,t.ClipperBase.near_zero(i)){for(var l=0;l<this.m_polyNodes.ChildCount();l++){var c=this.m_polyNodes.Childs()[l];c.m_endtype===t.EndType.etClosedPolygon&&this.m_destPolys.push(c.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var f;this.ArcTolerance<=0?f=t.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(i)*t.ClipperOffset.def_arc_tolerance?f=Math.abs(i)*t.ClipperOffset.def_arc_tolerance:f=this.ArcTolerance;var m=3.14159265358979/Math.acos(1-f/Math.abs(i));this.m_sin=Math.sin(t.ClipperOffset.two_pi/m),this.m_cos=Math.cos(t.ClipperOffset.two_pi/m),this.m_StepsPerRad=m/t.ClipperOffset.two_pi,i<0&&(this.m_sin=-this.m_sin);for(var l=0;l<this.m_polyNodes.ChildCount();l++){var c=this.m_polyNodes.Childs()[l];this.m_srcPoly=c.m_polygon;var C=this.m_srcPoly.length;if(!(C===0||i<=0&&(C<3||c.m_endtype!==t.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,C===1){if(c.m_jointype===t.JoinType.jtRound)for(var _=1,L=0,j=1;j<=m;j++){this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+_*i),t.ClipperOffset.Round(this.m_srcPoly[0].Y+L*i)));var V=_;_=_*this.m_cos-this.m_sin*L,L=V*this.m_sin+L*this.m_cos}else for(var _=-1,L=-1,j=0;j<4;++j)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+_*i),t.ClipperOffset.Round(this.m_srcPoly[0].Y+L*i))),_<0?_=1:L<0?L=1:_=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var j=0;j<C-1;j++)this.m_normals.push(t.ClipperOffset.GetUnitNormal(this.m_srcPoly[j],this.m_srcPoly[j+1]));if(c.m_endtype===t.EndType.etClosedLine||c.m_endtype===t.EndType.etClosedPolygon?this.m_normals.push(t.ClipperOffset.GetUnitNormal(this.m_srcPoly[C-1],this.m_srcPoly[0])):this.m_normals.push(new t.DoublePoint1(this.m_normals[C-2])),c.m_endtype===t.EndType.etClosedPolygon){for(var se=C-1,j=0;j<C;j++)se=this.OffsetPoint(j,se,c.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(c.m_endtype===t.EndType.etClosedLine){for(var se=C-1,j=0;j<C;j++)se=this.OffsetPoint(j,se,c.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var J=this.m_normals[C-1],j=C-1;j>0;j--)this.m_normals[j]=new t.DoublePoint2(-this.m_normals[j-1].X,-this.m_normals[j-1].Y);this.m_normals[0]=new t.DoublePoint2(-J.X,-J.Y),se=0;for(var j=C-1;j>=0;j--)se=this.OffsetPoint(j,se,c.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var se=0,j=1;j<C-1;++j)se=this.OffsetPoint(j,se,c.m_jointype);var de;if(c.m_endtype===t.EndType.etOpenButt){var j=C-1;de=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[j].X*i),t.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[j].Y*i)),this.m_destPoly.push(de),de=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[j].X-this.m_normals[j].X*i),t.ClipperOffset.Round(this.m_srcPoly[j].Y-this.m_normals[j].Y*i)),this.m_destPoly.push(de)}else{var j=C-1;se=C-2,this.m_sinA=0,this.m_normals[j]=new t.DoublePoint2(-this.m_normals[j].X,-this.m_normals[j].Y),c.m_endtype===t.EndType.etOpenSquare?this.DoSquare(j,se):this.DoRound(j,se)}for(var j=C-1;j>0;j--)this.m_normals[j]=new t.DoublePoint2(-this.m_normals[j-1].X,-this.m_normals[j-1].Y);this.m_normals[0]=new t.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),se=C-1;for(var j=se-1;j>0;--j)se=this.OffsetPoint(j,se,c.m_jointype);c.m_endtype===t.EndType.etOpenButt?(de=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*i),t.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*i)),this.m_destPoly.push(de),de=new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*i),t.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*i)),this.m_destPoly.push(de)):(se=1,this.m_sinA=0,c.m_endtype===t.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},t.ClipperOffset.prototype.Execute=function(){var i=arguments,l=i[0]instanceof t.PolyTree;if(l){var c=i[0],f=i[1];c.Clear(),this.FixOrientations(),this.DoOffset(f);var m=new t.Clipper(0);if(m.AddPaths(this.m_destPolys,t.PolyType.ptSubject,!0),f>0)m.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftPositive,t.PolyFillType.pftPositive);else{var C=t.Clipper.GetBounds(this.m_destPolys),_=new t.Path;if(_.push(new t.IntPoint2(C.left-10,C.bottom+10)),_.push(new t.IntPoint2(C.right+10,C.bottom+10)),_.push(new t.IntPoint2(C.right+10,C.top-10)),_.push(new t.IntPoint2(C.left-10,C.top-10)),m.AddPath(_,t.PolyType.ptSubject,!0),m.ReverseSolution=!0,m.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNegative,t.PolyFillType.pftNegative),c.ChildCount()===1&&c.Childs()[0].ChildCount()>0){var L=c.Childs()[0];c.Childs()[0]=L.Childs()[0],c.Childs()[0].m_Parent=c;for(var j=1;j<L.ChildCount();j++)c.AddChild(L.Childs()[j])}else c.Clear()}}else{var c=i[0],f=i[1];t.Clear(c),this.FixOrientations(),this.DoOffset(f);var m=new t.Clipper(0);if(m.AddPaths(this.m_destPolys,t.PolyType.ptSubject,!0),f>0)m.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftPositive,t.PolyFillType.pftPositive);else{var C=t.Clipper.GetBounds(this.m_destPolys),_=new t.Path;_.push(new t.IntPoint2(C.left-10,C.bottom+10)),_.push(new t.IntPoint2(C.right+10,C.bottom+10)),_.push(new t.IntPoint2(C.right+10,C.top-10)),_.push(new t.IntPoint2(C.left-10,C.top-10)),m.AddPath(_,t.PolyType.ptSubject,!0),m.ReverseSolution=!0,m.Execute(t.ClipType.ctUnion,c,t.PolyFillType.pftNegative,t.PolyFillType.pftNegative),c.length>0&&c.splice(0,1)}}},t.ClipperOffset.prototype.OffsetPoint=function(i,l,c){if(this.m_sinA=this.m_normals[l].X*this.m_normals[i].Y-this.m_normals[i].X*this.m_normals[l].Y,Math.abs(this.m_sinA*this.m_delta)<1){var f=this.m_normals[l].X*this.m_normals[i].X+this.m_normals[i].Y*this.m_normals[l].Y;if(f>0)return this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_normals[l].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_normals[l].Y*this.m_delta))),l}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_normals[l].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_normals[l].Y*this.m_delta))),this.m_destPoly.push(new t.IntPoint1(this.m_srcPoly[i])),this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta)));else switch(c){case t.JoinType.jtMiter:{var m=1+(this.m_normals[i].X*this.m_normals[l].X+this.m_normals[i].Y*this.m_normals[l].Y);m>=this.m_miterLim?this.DoMiter(i,l,m):this.DoSquare(i,l);break}case t.JoinType.jtSquare:this.DoSquare(i,l);break;case t.JoinType.jtRound:this.DoRound(i,l);break}return l=i,l},t.ClipperOffset.prototype.DoSquare=function(i,l){var c=Math.tan(Math.atan2(this.m_sinA,this.m_normals[l].X*this.m_normals[i].X+this.m_normals[l].Y*this.m_normals[i].Y)/4);this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[l].X-this.m_normals[l].Y*c)),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[l].Y+this.m_normals[l].X*c)))),this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_delta*(this.m_normals[i].X+this.m_normals[i].Y*c)),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_delta*(this.m_normals[i].Y-this.m_normals[i].X*c))))},t.ClipperOffset.prototype.DoMiter=function(i,l,c){var f=this.m_delta/c;this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+(this.m_normals[l].X+this.m_normals[i].X)*f),t.ClipperOffset.Round(this.m_srcPoly[i].Y+(this.m_normals[l].Y+this.m_normals[i].Y)*f)))},t.ClipperOffset.prototype.DoRound=function(i,l){for(var c=Math.atan2(this.m_sinA,this.m_normals[l].X*this.m_normals[i].X+this.m_normals[l].Y*this.m_normals[i].Y),f=Math.max(t.Cast_Int32(t.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(c))),1),m=this.m_normals[l].X,C=this.m_normals[l].Y,_,L=0;L<f;++L)this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+m*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[i].Y+C*this.m_delta))),_=m,m=m*this.m_cos-this.m_sin*C,C=_*this.m_sin+C*this.m_cos;this.m_destPoly.push(new t.IntPoint2(t.ClipperOffset.Round(this.m_srcPoly[i].X+this.m_normals[i].X*this.m_delta),t.ClipperOffset.Round(this.m_srcPoly[i].Y+this.m_normals[i].Y*this.m_delta)))},t.Error=function(i){try{throw new Error(i)}catch(l){alert(l.message)}},t.JS={},t.JS.AreaOfPolygon=function(i,l){return l||(l=1),t.Clipper.Area(i)/(l*l)},t.JS.AreaOfPolygons=function(i,l){l||(l=1);for(var c=0,f=0;f<i.length;f++)c+=t.Clipper.Area(i[f]);return c/(l*l)},t.JS.BoundsOfPath=function(i,l){return t.JS.BoundsOfPaths([i],l)},t.JS.BoundsOfPaths=function(i,l){l||(l=1);var c=t.Clipper.GetBounds(i);return c.left/=l,c.bottom/=l,c.right/=l,c.top/=l,c},t.JS.Clean=function(f,l){if(!(f instanceof Array))return[];var c=f[0]instanceof Array,f=t.JS.Clone(f);if(typeof l!="number"||l===null)return t.Error("Delta is not a number in Clean()."),f;if(f.length===0||f.length===1&&f[0].length===0||l<0)return f;c||(f=[f]);for(var m=f.length,C,_,L,j,V,se,J,de=[],Ce=0;Ce<m;Ce++)if(_=f[Ce],C=_.length,C!==0){if(C<3){L=_,de.push(L);continue}for(L=_,j=l*l,V=_[0],se=1,J=1;J<C;J++)(_[J].X-V.X)*(_[J].X-V.X)+(_[J].Y-V.Y)*(_[J].Y-V.Y)<=j||(L[se]=_[J],V=_[J],se++);V=_[se-1],(_[0].X-V.X)*(_[0].X-V.X)+(_[0].Y-V.Y)*(_[0].Y-V.Y)<=j&&se--,se<C&&L.splice(se,C-se),L.length&&de.push(L)}return!c&&de.length?de=de[0]:!c&&de.length===0?de=[]:c&&de.length===0&&(de=[[]]),de},t.JS.Clone=function(i){if(!(i instanceof Array))return[];if(i.length===0)return[];if(i.length===1&&i[0].length===0)return[[]];var l=i[0]instanceof Array;l||(i=[i]);var c=i.length,f,m,C,_,L=new Array(c);for(m=0;m<c;m++){for(f=i[m].length,_=new Array(f),C=0;C<f;C++)_[C]={X:i[m][C].X,Y:i[m][C].Y};L[m]=_}return l||(L=L[0]),L},t.JS.Lighten=function(i,l){if(!(i instanceof Array))return[];if(typeof l!="number"||l===null)return t.Error("Tolerance is not a number in Lighten()."),t.JS.Clone(i);if(i.length===0||i.length===1&&i[0].length===0||l<0)return t.JS.Clone(i);var c=i[0]instanceof Array;c||(i=[i]);var f,m,C,_,L,j,V,se,J,de,Ce,_e,ke,je,yt,en,Xr,Jy=i.length,ex=l*l,Br=[];for(f=0;f<Jy;f++)if(C=i[f],j=C.length,j!==0){for(_=0;_<1e6;_++){for(L=[],j=C.length,C[j-1].X!==C[0].X||C[j-1].Y!==C[0].Y?(_e=1,C.push({X:C[0].X,Y:C[0].Y}),j=C.length):_e=0,Ce=[],m=0;m<j-2;m++)V=C[m],J=C[m+1],se=C[m+2],en=V.X,Xr=V.Y,ke=se.X-en,je=se.Y-Xr,(ke!==0||je!==0)&&(yt=((J.X-en)*ke+(J.Y-Xr)*je)/(ke*ke+je*je),yt>1?(en=se.X,Xr=se.Y):yt>0&&(en+=ke*yt,Xr+=je*yt)),ke=J.X-en,je=J.Y-Xr,de=ke*ke+je*je,de<=ex&&(Ce[m+1]=1,m++);for(L.push({X:C[0].X,Y:C[0].Y}),m=1;m<j-1;m++)Ce[m]||L.push({X:C[m].X,Y:C[m].Y});if(L.push({X:C[j-1].X,Y:C[j-1].Y}),_e&&C.pop(),Ce.length)C=L;else break}j=L.length,L[j-1].X===L[0].X&&L[j-1].Y===L[0].Y&&L.pop(),L.length>2&&Br.push(L)}return c||(Br=Br[0]),typeof Br>"u"&&(Br=[]),Br},t.JS.PerimeterOfPath=function(i,l,c){if(typeof i>"u")return 0;var f=Math.sqrt,m=0,C,_,L=0,j=0,V=0,se=0,J=i.length;if(J<2)return 0;for(l&&(i[J]=i[0],J++);--J;)C=i[J],L=C.X,j=C.Y,_=i[J-1],V=_.X,se=_.Y,m+=f((L-V)*(L-V)+(j-se)*(j-se));return l&&i.pop(),m/c},t.JS.PerimeterOfPaths=function(i,l,c){c||(c=1);for(var f=0,m=0;m<i.length;m++)f+=t.JS.PerimeterOfPath(i[m],l,c);return f},t.JS.ScaleDownPath=function(i,l){var c,f;for(l||(l=1),c=i.length;c--;)f=i[c],f.X=f.X/l,f.Y=f.Y/l},t.JS.ScaleDownPaths=function(i,l){var c,f,m;for(l||(l=1),c=i.length;c--;)for(f=i[c].length;f--;)m=i[c][f],m.X=m.X/l,m.Y=m.Y/l},t.JS.ScaleUpPath=function(i,l){var c,f,m=Math.round;for(l||(l=1),c=i.length;c--;)f=i[c],f.X=m(f.X*l),f.Y=m(f.Y*l)},t.JS.ScaleUpPaths=function(i,l){var c,f,m,C=Math.round;for(l||(l=1),c=i.length;c--;)for(f=i[c].length;f--;)m=i[c][f],m.X=C(m.X*l),m.Y=C(m.Y*l)},t.ExPolygons=function(){return[]},t.ExPolygon=function(){this.outer=null,this.holes=null},t.JS.AddOuterPolyNodeToExPolygons=function(i,l){var c=new t.ExPolygon;c.outer=i.Contour();var f=i.Childs(),m=f.length;c.holes=new Array(m);var C,_,L,j,V,se;for(L=0;L<m;L++)for(C=f[L],c.holes[L]=C.Contour(),j=0,V=C.Childs(),se=V.length;j<se;j++)_=V[j],t.JS.AddOuterPolyNodeToExPolygons(_,l);l.push(c)},t.JS.ExPolygonsToPaths=function(i){var l,c,f,m,C=new t.Paths;for(l=0,f=i.length;l<f;l++)for(C.push(i[l].outer),c=0,m=i[l].holes.length;c<m;c++)C.push(i[l].holes[c]);return C},t.JS.PolyTreeToExPolygons=function(i){var l=new t.ExPolygons,c,f,m,C;for(f=0,m=i.Childs(),C=m.length;f<C;f++)c=m[f],t.JS.AddOuterPolyNodeToExPolygons(c,l);return l}})()})(Hy);var kb=Hy.exports;const ws=gu(kb),Ho=100;function Nb(e,t,n=!1){var E,R;if(e.length===0)return n?{path:"",translateX:0,translateY:0,bounds:{minX:0,maxX:0,minY:0,maxY:0}}:"";if(e.length===1){const{x:Y,y:B,width:$,height:Z}=e[0],Q=$/2+t,ne=Z/2+t,ee=16,b=[];for(let G=0;G<=ee;G++){const O=G/ee*2*Math.PI;b.push([Y+Q*Math.cos(O),B+ne*Math.sin(O)])}const z=Yp().curve($p.alpha(.5))(b)||"";if(n){const G=((E=z.match(/-?[\d.]+/g))==null?void 0:E.map(parseFloat))||[],O=G.filter((H,F)=>F%2===0),M=G.filter((H,F)=>F%2===1);return{path:z,translateX:0,translateY:0,bounds:{minX:Math.min(...O),maxX:Math.max(...O),minY:Math.min(...M),maxY:Math.max(...M)}}}return z}const r=[];for(const Y of e){const B=Y.width/2,$=Y.height/2,Z=Y.x-B,Q=Y.x+B,ne=Y.y-$,ee=Y.y+$;r.push([Z,ne]),r.push([Q,ne]),r.push([Q,ee]),r.push([Z,ee])}const o=xb(r);if(!o||o.length<3)return n?{path:"",translateX:0,translateY:0,bounds:{minX:0,maxX:0,minY:0,maxY:0}}:"";const s=o.map(([Y,B])=>({X:Math.round(Y*Ho),Y:Math.round(B*Ho)})),a=1.85,u=new ws.ClipperOffset(2,.25);u.AddPath(s,ws.JoinType.jtRound,ws.EndType.etClosedPolygon);const d=new ws.Paths;if(u.Execute(d,t*a*Ho),d.length===0)return n?{path:"",translateX:0,translateY:0,bounds:{minX:0,maxX:0,minY:0,maxY:0}}:"";const p=d[0].map(Y=>[Y.X/Ho,Y.Y/Ho]),h=[...p,p[0]],w=Yp().curve($p.alpha(.5))(h)||"",P=((R=w.match(/-?[\d.]+/g))==null?void 0:R.map(parseFloat))||[];if(P.length===0)return n?{path:"",translateX:0,translateY:0,bounds:{minX:0,maxX:0,minY:0,maxY:0}}:w;const N=P.filter((Y,B)=>B%2===0),S=P.filter((Y,B)=>B%2===1),T=Math.min(...N),y=Math.min(...S),v=Math.max(...N),I=Math.max(...S),k=Eb(w,-T,-y);return n?{path:k,translateX:-T,translateY:-y,bounds:{minX:T,maxX:v,minY:y,maxY:I}}:w}function Eb(e,t,n){let r=!0;return e.replace(/-?[\d.]+/g,o=>{const s=parseFloat(o),a=r?s+t:s+n;return r=!r,a.toString()})}function Tb(e){const t=Math.min(...e.map(s=>s.x)),n=Math.max(...e.map(s=>s.x+s.width)),r=Math.min(...e.map(s=>s.y)),o=Math.max(...e.map(s=>s.y+s.height));return{minX:t,maxX:n,minY:r,maxY:o}}function Ab(e,t){return e.map(n=>({x:n.x-t.minX,y:n.y-t.minY,width:n.width,height:n.height}))}function Lb(e,t,n){const r=t.bounds.maxX-t.bounds.minX,o=t.bounds.maxY-t.bounds.minY,s=n.minX+t.bounds.minX,a=n.minY+t.bounds.minY;return{containerX:s,containerY:a,containerWidth:r,containerHeight:o,blobPath:t.path}}const xu={tiny:{width:120,height:70},small:{width:140,height:80},medium:{width:170,height:100},large:{width:200,height:120},huge:{width:240,height:140}};function Up(e,t){const n=e.width??0,r=e.height??0,o=e.position.x+n/2,s=e.position.y+r/2,a=t.position.x+(t.width??0)/2,u=t.position.y+(t.height??0)/2,d=(a-o)/(2*n)-(u-s)/(2*r),p=(a-o)/(2*n)+(u-s)/(2*r),h=1/(Math.abs(d)+Math.abs(p)),g=h*d,w=h*p,P=n*(g+w)+o,N=r*(-g+w)+s;return{x:P,y:N}}function Hp(e,t){const n=e.position.x,r=e.position.y,o=e.width??0,s=e.height??0,a=Math.abs(t.x-n),u=Math.abs(t.x-(n+o)),d=Math.abs(t.y-r),p=Math.abs(t.y-(r+s)),h=Math.min(a,u,d,p);return h===a?fe.Left:h===u?fe.Right:h===d?fe.Top:fe.Bottom}function jb(e,t){const n=Up(e,t),r=Up(t,e),o=Hp(e,n),s=Hp(t,r),a=e.position.x+(e.width??0)/2,u=e.position.y+(e.height??0)/2,d=t.position.x+(t.width??0)/2,p=t.position.y+(t.height??0)/2,h=o===fe.Left?e.position.x:o===fe.Right?e.position.x+(e.width??0):a,g=o===fe.Top?e.position.y:o===fe.Bottom?e.position.y+(e.height??0):u,w=s===fe.Left?t.position.x:s===fe.Right?t.position.x+(t.width??0):d,P=s===fe.Top?t.position.y:s===fe.Bottom?t.position.y+(t.height??0):p;return{sx:h,sy:g,tx:w,ty:P,sourcePos:o,targetPos:s}}function Mb({data:e}){var b;const t=e.context,n=e.isSelected,r=e.isMemberOfSelectedGroup,o=e.opacity,[s,a]=U.useState(!1),[u,d]=U.useState(!1),[p,h]=U.useState(null),g=q(A=>A.assignRepoToContext),w=q(A=>A.activeProjectId),P=q(A=>w?A.projects[w]:void 0),N=q(A=>A.activeViewMode),S=q(A=>A.temporal.activeKeyframeId),T=q(A=>A.updateKeyframe),y=xu[((b=t.codeSize)==null?void 0:b.bucket)||"medium"],v=A=>{var G;A.preventDefault(),A.stopPropagation(),N==="strategic"&&((G=P==null?void 0:P.temporal)!=null&&G.enabled)&&S&&h({x:A.clientX,y:A.clientY})};U.useEffect(()=>{const A=()=>h(null);if(p)return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[p]);const I=()=>{if(!S||!(P!=null&&P.temporal))return;const A=P.temporal.keyframes.find(O=>O.id===S);if(!A)return;const G=A.activeContextIds.includes(t.id)?A.activeContextIds.filter(O=>O!==t.id):[...A.activeContextIds,t.id];T(S,{activeContextIds:G}),h(null)},k=A=>{A.preventDefault(),A.stopPropagation(),A.dataTransfer.types.includes("application/contextflow-repo")&&d(!0)},E=A=>{A.preventDefault(),A.stopPropagation(),d(!1)},R=A=>{A.preventDefault(),A.stopPropagation(),d(!1);const z=A.dataTransfer.getData("application/contextflow-repo");z&&g(z,t.id)},Y=t.strategicClassification==="core"?"#f8e7a1":t.strategicClassification==="supporting"?"#dbeafe":"#f3f4f6",B=t.boundaryIntegrity==="strong"?"3px":(t.boundaryIntegrity==="moderate","2px"),$=t.boundaryIntegrity==="weak"?"dashed":"solid",Z=n||r,Q=u||Z?"#3b82f6":"#cbd5e1",ne="0 0 0 2px white, 0 0 0 3px #cbd5e1",ee=u?"0 0 0 3px #3b82f6, 0 8px 16px -4px rgba(59, 130, 246, 0.3)":Z?"0 0 0 3px #3b82f6, 0 4px 12px -2px rgba(59, 130, 246, 0.25)":s?t.isExternal?`${ne}, 0 4px 8px -1px rgba(0, 0, 0, 0.12)`:"0 2px 8px -1px rgba(0, 0, 0, 0.15), 0 4px 12px -2px rgba(0, 0, 0, 0.08)":t.isExternal?`${ne}, 0 2px 6px 0 rgba(0, 0, 0, 0.06)`:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)";return x.jsxs(x.Fragment,{children:[x.jsx(dn,{type:"target",position:fe.Left,style:{opacity:0}}),x.jsx(dn,{type:"source",position:fe.Right,style:{opacity:0}}),x.jsx(dn,{type:"target",position:fe.Top,style:{opacity:0},id:"top"}),x.jsxs("div",{style:{width:y.width,height:y.height,backgroundColor:Y,borderWidth:B,borderStyle:t.isExternal?"dashed":$,borderColor:Q,borderRadius:"8px",padding:"8px",boxShadow:ee,display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",opacity:o??1,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onDragOver:k,onDragLeave:E,onDrop:R,onContextMenu:v,children:[t.isLegacy&&x.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:"16px"},title:"Legacy",children:""}),t.isExternal&&x.jsx("div",{style:{position:"absolute",top:"6px",left:"6px",fontSize:"9px",backgroundColor:"#f1f5f9",color:"#64748b",padding:"3px 7px",borderRadius:"6px",fontWeight:600,letterSpacing:"0.03em",textTransform:"uppercase"},children:"External"}),x.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#0f172a",marginTop:t.isExternal||t.isLegacy?"20px":"0",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis"},children:t.name}),t.purpose&&x.jsx("div",{style:{fontSize:"10.5px",color:"#64748b",marginTop:"6px",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.purpose})]}),p&&S&&(P==null?void 0:P.temporal)&&x.jsx("div",{className:"fixed bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded-md shadow-lg py-1 z-50",style:{left:p.x,top:p.y},onClick:A=>A.stopPropagation(),children:x.jsx("button",{onClick:I,className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-neutral-700",children:(()=>{const A=P.temporal.keyframes.find(G=>G.id===S);return(A==null?void 0:A.activeContextIds.includes(t.id))?"Hide in this keyframe":"Show in this keyframe"})()})})]})}function Db({stages:e}){const{x:t,y:n,zoom:r}=Yi(),o=q(B=>B.updateFlowStage),s=q(B=>B.deleteFlowStage),[a,u]=U.useState(null),[d,p]=U.useState(""),[h,g]=U.useState(null),[w,P]=U.useState(0),[N,S]=U.useState(null),[T,y]=U.useState({x:0,y:0}),v=U.useRef(null);U.useEffect(()=>{a!==null&&v.current&&v.current.focus()},[a]);const I=(B,$)=>{u(B),p($)},k=B=>{if(d.trim()&&d!==e[B].label)try{o(B,{label:d.trim()})}catch($){alert($.message)}u(null)},E=(B,$)=>{a===null&&(g($),P(B.clientX),B.preventDefault())},R=(B,$)=>{B.preventDefault(),B.stopPropagation(),S($),y({x:B.clientX,y:B.clientY})},Y=B=>{if(e.length<=1){alert("Cannot delete the last stage");return}window.confirm(`Delete stage "${e[B].label}"? This can be undone with Cmd/Ctrl+Z.`)&&s(B),S(null)};return U.useEffect(()=>{if(N===null)return;const B=()=>S(null);return document.addEventListener("click",B),()=>document.removeEventListener("click",B)},[N]),U.useEffect(()=>{if(h===null)return;const B=Z=>{const Q=(Z.clientX-w)/r,ne=e[h].position,ee=Math.max(0,Math.min(100,ne+Q/2e3*100));try{o(h,{position:Math.round(ee*10)/10})}catch{}P(Z.clientX)},$=()=>{g(null)};return document.addEventListener("mousemove",B),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",$)}},[h,w,e,o,r]),x.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:[e.map((B,$)=>{const Z=B.position/100*2e3,Q=40,ne=Z*r+t,ee=Q*r+n,b=a===$,A=h===$;return x.jsx("div",{className:`text-slate-700 dark:text-slate-200 ${A?"cursor-grabbing":"cursor-grab"}`,style:{position:"absolute",left:ne,top:ee,transform:"translate(-50%, -50%)",whiteSpace:"nowrap",fontSize:`${22.5*r}px`,fontWeight:600,letterSpacing:"-0.01em",pointerEvents:"auto",userSelect:"none"},onMouseDown:z=>E(z,$),onClick:()=>!A&&I($,B.label),onContextMenu:z=>R(z,$),children:b?x.jsx("input",{ref:v,type:"text",value:d,onChange:z=>p(z.target.value),onBlur:()=>k($),onKeyDown:z=>{z.key==="Enter"?k($):z.key==="Escape"&&u(null)},className:"bg-transparent text-slate-700 dark:text-slate-200 border-2 border-blue-500 dark:border-blue-400 rounded px-2 py-1 outline-none selection:bg-blue-200 selection:text-slate-900 dark:selection:bg-blue-600 dark:selection:text-white",style:{fontSize:`${22.5*r}px`,fontWeight:600,letterSpacing:"-0.01em"},onClick:z=>z.stopPropagation(),onMouseDown:z=>z.stopPropagation()}):B.label},B.label)}),N!==null&&x.jsx("div",{style:{position:"fixed",left:T.x,top:T.y,zIndex:1e3,pointerEvents:"auto"},className:"bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded-lg shadow-xl py-1 min-w-[160px]",children:x.jsx("button",{onClick:()=>Y(N),className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Delete Stage"})})]})}function Ob(){const{x:e,y:t,zoom:n}=Yi(),r=[{label:"Genesis",position:12.5,width:25},{label:"Custom-Built",position:37.5,width:25},{label:"Product",position:62.5,width:25},{label:"Commodity",position:87.5,width:25}],o=[25,50,75];return x.jsxs(x.Fragment,{children:[x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:3},children:o.map(s=>{const u=s/100*2e3*n+e;return x.jsx("div",{style:{position:"absolute",left:u,top:0,width:"1px",height:`${1e3*n}px`,background:"repeating-linear-gradient(to bottom, rgba(148, 163, 184, 0.3) 0px, rgba(148, 163, 184, 0.3) 5px, transparent 5px, transparent 10px)",marginTop:`${t}px`}},`divider-${s}`)})}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:r.map(s=>{const a=s.position/100*2e3,u=960,d=a*n+e,p=u*n+t;return x.jsx("div",{className:"text-slate-700 dark:text-slate-200",style:{position:"absolute",left:d,top:p,transform:"translate(-50%, -50%)",whiteSpace:"nowrap",fontSize:`${22.5*n}px`,fontWeight:600,letterSpacing:"-0.01em"},children:s.label},s.label)})})]})}function Rb({data:e}){const t=e.group,n=e.isSelected,[r,o]=U.useState(!1),s=q(T=>T.groupOpacity),a=e.blobPath,u=e.blobBounds,d=document.documentElement.classList.contains("dark"),p=t.color||"#3b82f6",h=T=>{if(T.startsWith("rgba(")||T.startsWith("rgb(")){const k=T.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(k)return[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])]}const y=parseInt(T.slice(1,3),16),v=parseInt(T.slice(3,5),16),I=parseInt(T.slice(5,7),16);return[y,v,I]},[g,w,P]=h(p),N=`rgba(${g}, ${w}, ${P}, ${s})`,S=`rgb(${g}, ${w}, ${P})`;return x.jsxs("div",{className:"nodrag nopan",style:{width:"100%",height:"100%",position:"relative",cursor:"pointer",outline:"none"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[x.jsx("svg",{width:u.width,height:u.height,style:{position:"absolute",top:0,left:0,overflow:"visible"},children:x.jsx("path",{d:a,fill:N,stroke:S,strokeWidth:n?2:1,strokeDasharray:n?"none":"5,5",style:{filter:d?"none":`drop-shadow(0 2px 10px rgba(${g}, ${w}, ${P}, 0.3))`,transition:"all 0.2s"}})}),x.jsx("div",{style:{position:"absolute",top:"8px",left:"12px",fontSize:"12px",fontWeight:600,color:d?"#e2e8f0":"#1e293b",backgroundColor:"transparent",padding:"4px 10px",borderRadius:"6px",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"all 0.15s",transform:r?"scale(1.05)":"scale(1)",pointerEvents:"none"},children:t.label})]})}function Xb({data:e}){const t=e.actor,n=e.isSelected,[r,o]=U.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsx(dn,{type:"source",position:fe.Bottom,style:{opacity:0}}),x.jsxs("div",{style:{width:140,height:60,backgroundColor:n||r?"#eff6ff":"#f8fafc",border:n?"2px solid #3b82f6":"2px solid #cbd5e1",borderRadius:"12px",padding:"10px",boxShadow:n?"0 0 0 3px #3b82f6, 0 4px 12px -2px rgba(59, 130, 246, 0.25)":r?"0 4px 12px -2px rgba(0, 0, 0, 0.15)":"0 2px 6px 0 rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"row",alignItems:"center",gap:"8px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[x.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#dbeafe",borderRadius:"50%",flexShrink:0},children:x.jsx(Oy,{size:18,color:"#3b82f6",strokeWidth:2.5})}),x.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#0f172a",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:t.name})]})]})}function Bb({data:e}){const t=e.userNeed,n=e.isSelected,[r,o]=U.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsx(dn,{type:"target",position:fe.Top,style:{opacity:0}}),x.jsx(dn,{type:"source",position:fe.Bottom,style:{opacity:0}}),x.jsxs("div",{style:{width:140,height:60,backgroundColor:n||r?"#f0fdf4":"#f8fafc",border:n?"2px solid #10b981":"2px solid #cbd5e1",borderRadius:"12px",padding:"10px",boxShadow:n?"0 0 0 3px rgba(16, 185, 129, 0.3), 0 4px 12px -2px rgba(16, 185, 129, 0.25)":r?"0 4px 12px -2px rgba(0, 0, 0, 0.15)":"0 2px 6px 0 rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"row",alignItems:"center",gap:"8px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[x.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",backgroundColor:"#d1fae5",borderRadius:"50%",flexShrink:0},children:x.jsx(Dy,{size:18,color:"#10b981",strokeWidth:2.5})}),x.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#0f172a",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:t.name})]})]})}function zb({id:e,source:t,target:n,sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:u,targetPosition:d,data:p}){const[h,g]=U.useState(!1),w=q(Y=>Y.selectedActorId),P=p==null?void 0:p.connection,N=t===w,{getNode:S}=jn(),T=S(t),y=S(n);let v=r,I=o,k=s,E=a;T&&y&&T.width&&T.height&&y.width&&y.height&&(v=T.position.x+T.width/2,I=T.position.y+T.height,k=y.position.x+y.width/2,E=y.position.y,fe.Bottom,fe.Top);const[R]=Yl({sourceX:v,sourceY:I,targetX:k,targetY:E});return x.jsxs(x.Fragment,{children:[x.jsx("path",{id:e,className:"react-flow__edge-path",d:R,style:{stroke:N?"#3b82f6":h?"#60a5fa":"#94a3b8",strokeWidth:N?2.5:h?2:1.5,strokeDasharray:"5,5",fill:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},markerEnd:"url(#actor-arrow)"}),x.jsx("path",{d:R,style:{stroke:"transparent",strokeWidth:20,fill:"none",cursor:"pointer"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:x.jsxs("title",{children:["Actor connection",P!=null&&P.notes?`: ${P.notes}`:""]})})]})}function Yb({id:e,source:t,target:n,sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:u,targetPosition:d,data:p}){const[h,g]=U.useState(!1),w=q(B=>B.selectedActorId),P=q(B=>B.selectedUserNeedId),N=p==null?void 0:p.connection,S=t===w||n===P,{getNode:T}=jn(),y=T(t),v=T(n);let I=r,k=o,E=s,R=a;y&&v&&y.width&&y.height&&v.width&&v.height&&(I=y.position.x+y.width/2,k=y.position.y+y.height,E=v.position.x+v.width/2,R=v.position.y,fe.Bottom,fe.Top);const[Y]=Yl({sourceX:I,sourceY:k,targetX:E,targetY:R});return x.jsxs(x.Fragment,{children:[x.jsx("path",{id:e,className:"react-flow__edge-path",d:Y,style:{stroke:S?"#3b82f6":h?"#60a5fa":"#94a3b8",strokeWidth:S?2.5:h?2:1.5,strokeDasharray:"5,5",fill:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},markerEnd:"url(#actor-arrow)"}),x.jsx("path",{d:Y,style:{stroke:"transparent",strokeWidth:20,fill:"none",cursor:"pointer"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:x.jsxs("title",{children:["Actor-Need connection",N!=null&&N.notes?`: ${N.notes}`:""]})})]})}function Fb({id:e,source:t,target:n,sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:u,targetPosition:d,data:p}){const[h,g]=U.useState(!1),w=q(B=>B.selectedUserNeedId),P=q(B=>B.selectedContextId),N=p==null?void 0:p.connection,S=t===w||n===P,{getNode:T}=jn(),y=T(t),v=T(n);let I=r,k=o,E=s,R=a;y&&v&&y.width&&y.height&&v.width&&v.height&&(I=y.position.x+y.width/2,k=y.position.y+y.height,E=v.position.x+v.width/2,R=v.position.y,fe.Bottom,fe.Top);const[Y]=Yl({sourceX:I,sourceY:k,targetX:E,targetY:R});return x.jsxs(x.Fragment,{children:[x.jsx("path",{id:e,className:"react-flow__edge-path",d:Y,style:{stroke:S?"#10b981":h?"#34d399":"#94a3b8",strokeWidth:S?2.5:h?2:1.5,strokeDasharray:"5,5",fill:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},markerEnd:"url(#need-arrow)"}),x.jsx("path",{d:Y,style:{stroke:"transparent",strokeWidth:20,fill:"none",cursor:"pointer"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:x.jsxs("title",{children:["Need-Context connection",N!=null&&N.notes?`: ${N.notes}`:""]})})]})}function $b(){const{x:e,y:t,zoom:n}=Yi(),r=2e3,o=1e3,s=0*n+e,a=0*n+t,u=r*n,d=o*n;return x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible",zIndex:1},children:x.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible"},children:x.jsx("rect",{x:s,y:a,width:u,height:d,rx:12*n,ry:12*n,fill:"none",stroke:"currentColor",strokeWidth:2,className:"text-slate-300 dark:text-neutral-700",opacity:.4})})})}function Wp(){const{x:e,y:t,zoom:n}=Yi(),r=[{text:"User-Facing / Value Delivery",yPos:325},{text:"Enabling / Platform",yPos:1e3}];return x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:r.map(o=>{const a=-30*n+e,u=o.yPos*n+t;return x.jsx("div",{className:"text-slate-700 dark:text-slate-200",style:{position:"absolute",left:a,top:u,transform:"translate(0, -50%) rotate(-90deg)",transformOrigin:"left center",whiteSpace:"nowrap",fontSize:`${16.5*n}px`,fontWeight:600,letterSpacing:"0.08em",textTransform:"uppercase",opacity:.9},children:o.text},o.text)})})}function Ub(){const{x:e,y:t,zoom:n}=Yi(),r=[{name:"GENERIC",xStart:0,xEnd:33,yStart:0,yEnd:100,color:"rgba(153, 153, 153, 0.30)",textColor:"#fff",labelX:16.5,labelY:50},{name:"SUPPORTING",xStart:33,xEnd:100,yStart:0,yEnd:50,color:"rgba(162, 132, 193, 0.35)",textColor:"#fff",labelX:66.5,labelY:25},{name:"SUPPORTING",xStart:33,xEnd:67,yStart:50,yEnd:100,color:"rgba(162, 132, 193, 0.35)",textColor:"#fff",labelX:50,labelY:75},{name:"CORE",xStart:67,xEnd:100,yStart:50,yEnd:100,color:"rgba(93, 186, 164, 0.35)",textColor:"#fff",labelX:83.5,labelY:75}],o=[{type:"vertical",position:33,label:""},{type:"vertical",position:67,label:""}],s=[{text:"Low",xPos:100,yPos:980},{text:"Business Differentiation",xPos:1e3,yPos:980},{text:"High",xPos:1900,yPos:980}],a=[{text:"High",xPos:50,yPos:100},{text:"Model Complexity",xPos:50,yPos:500},{text:"Low",xPos:50,yPos:900}];return x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:0},children:[r.map((u,d)=>{const p=(u.xEnd-u.xStart)/100*2e3,h=(u.yEnd-u.yStart)/100*1e3,g=u.xStart/100*2e3,w=(1-u.yEnd/100)*1e3,P=g*n+e,N=w*n+t,S=p*n,T=h*n,y=u.labelX/100*2e3,v=(1-u.labelY/100)*1e3,I=y*n+e,k=v*n+t;return x.jsxs(U.Fragment,{children:[x.jsx("div",{style:{position:"absolute",left:P,top:N,width:S,height:T,backgroundColor:u.color,border:"1px solid rgba(255, 255, 255, 0.15)"}}),x.jsx("div",{style:{position:"absolute",left:I,top:k,transform:"translate(-50%, -50%)",color:u.textColor,fontSize:`${48*n}px`,fontWeight:700,letterSpacing:"0.1em",textTransform:"uppercase",opacity:.85,pointerEvents:"none",textShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:u.name})]},`region-${d}`)}),o.map((u,d)=>{if(u.type==="horizontal"){const h=(1-u.position/100)*1e3*n+t;return x.jsx("div",{style:{position:"absolute",left:0,top:h,width:`${2e3*n}px`,height:"1px",background:"repeating-linear-gradient(to right, rgba(255, 255, 255, 0.3) 0px, rgba(255, 255, 255, 0.3) 5px, transparent 5px, transparent 10px)",marginLeft:`${e}px`}},`grid-h-${d}`)}else{const h=u.position/100*2e3*n+e;return x.jsx("div",{style:{position:"absolute",left:h,top:0,width:"1px",height:`${1e3*n}px`,background:"repeating-linear-gradient(to bottom, rgba(255, 255, 255, 0.3) 0px, rgba(255, 255, 255, 0.3) 5px, transparent 5px, transparent 10px)",marginTop:`${t}px`}},`grid-v-${d}`)}})]}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:s.map(u=>{const d=u.xPos*n+e,p=u.yPos*n+t;return x.jsx("div",{className:"text-slate-700 dark:text-slate-200",style:{position:"absolute",left:d,top:p,transform:"translate(-50%, -50%)",whiteSpace:"nowrap",fontSize:`${18*n}px`,fontWeight:600,letterSpacing:"0.05em",textTransform:"uppercase",opacity:.8},children:u.text},u.text)})}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:a.map(u=>{const d=u.xPos*n+e,p=u.yPos*n+t;return x.jsx("div",{className:"text-slate-700 dark:text-slate-200",style:{position:"absolute",left:d,top:p,transform:"translate(0, -50%) rotate(-90deg)",transformOrigin:"left center",whiteSpace:"nowrap",fontSize:`${18*n}px`,fontWeight:600,letterSpacing:"0.05em",textTransform:"uppercase",opacity:.8},children:u.text},u.text)})})]})}function Hb({id:e,source:t,target:n,sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:u,targetPosition:d,data:p}){const[h,g]=U.useState(!1),w=q(b=>b.selectedRelationshipId),P=p==null?void 0:p.relationship,N=(P==null?void 0:P.pattern)||"",S=e===w,{getNode:T}=jn(),y=T(t),v=T(n);let I=r,k=o,E=s,R=a,Y=u,B=d;if(y&&v&&y.width&&y.height&&v.width&&v.height){const b=jb(y,v);I=b.sx,k=b.sy,E=b.tx,R=b.ty,Y=b.sourcePos,B=b.targetPos}const[$,Z,Q]=bd({sourceX:I,sourceY:k,sourcePosition:Y,targetX:E,targetY:R,targetPosition:B}),ne=N==="shared-kernel"||N==="partnership",ee=S?"arrow-selected":h?"arrow-hover":"arrow-default";return x.jsxs(x.Fragment,{children:[x.jsx("path",{id:e,className:"react-flow__edge-path",d:$,style:{stroke:S?"#3b82f6":h?"#475569":"#cbd5e1",strokeWidth:S||h?2.5:1.5,fill:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},markerEnd:ne?void 0:`url(#${ee})`}),x.jsx("path",{d:$,style:{stroke:"transparent",strokeWidth:20,fill:"none",cursor:"pointer",pointerEvents:"all"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onClick:b=>{b.stopPropagation(),q.setState({selectedRelationshipId:e,selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedActorId:null})},children:x.jsx("title",{children:N})}),(h||S)&&x.jsxs("g",{children:[x.jsx("rect",{x:Z-50,y:Q-14,width:100,height:28,fill:"#0f172a",rx:"6",opacity:"0.92"}),x.jsx("text",{x:Z,y:Q+5,textAnchor:"middle",fill:"white",fontSize:"11.5",fontWeight:"500",letterSpacing:"0.01em",children:N})]})]})}const Wb={context:Mb,group:Rb,actor:Xb,userNeed:Bb},Vb={relationship:Hb,actorConnection:zb,actorNeedConnection:Yb,needContextConnection:Fb};function Gb(){const{fitView:e}=jn(),t=W.useCallback(()=>{e({padding:.15,duration:200,minZoom:.1,maxZoom:.8})},[e]);return x.jsx(Y_,{position:"bottom-right",onFitView:t})}function Zb(){const e=q(b=>b.activeProjectId),t=q(b=>e?b.projects[e]:void 0),n=q(b=>b.selectedContextId),r=q(b=>b.selectedContextIds),o=q(b=>b.selectedGroupId),s=q(b=>b.selectedActorId),a=q(b=>b.selectedRelationshipId),u=q(b=>b.activeViewMode),d=q(b=>b.showGroups),p=q(b=>b.showRelationships),h=q(b=>b.updateContextPosition),g=q(b=>b.updateMultipleContextPositions),w=q(b=>b.updateActorPosition),P=q(b=>b.updateUserNeedPosition);q(b=>b.setSelectedActor),q(b=>b.assignRepoToContext);const N=q(b=>b.temporal.currentDate),S=q(b=>b.temporal.activeKeyframeId),T=q(b=>b.updateKeyframeContextPosition),{fitView:y}=jn();W.useEffect(()=>{iw(()=>{y({padding:.15,duration:200,minZoom:.1,maxZoom:.8})})},[y]);const v=W.useMemo(()=>{var le,ue;if(!t)return[];const b=o?t.groups.find(oe=>oe.id===o):null,A=s?((le=t.actorConnections)==null?void 0:le.filter(oe=>oe.actorId===s))||[]:[],z=new Set(A.map(oe=>oe.contextId)),G=a?t.relationships.find(oe=>oe.id===a):null,O=new Set(G?[G.fromContextId,G.toContextId]:[]),M=t.contexts.map(oe=>{var X,pe,ae,xe;const ye=xu[((X=oe.codeSize)==null?void 0:X.bucket)||"medium"];let Pe,we;if(u==="distillation")Pe=oe.positions.distillation.x/100*2e3,we=(1-oe.positions.distillation.y/100)*1e3;else{let he,te;const Te=u==="strategic"&&((pe=t.temporal)==null?void 0:pe.enabled)&&N,me=((ae=t.temporal)==null?void 0:ae.keyframes)||[];if(Te&&me.length>0){const Ae={x:oe.positions.strategic.x,y:oe.positions.shared.y},qe=Yy(oe.id,N,me,Ae);he=qe.x,te=qe.y}else he=u==="flow"?oe.positions.flow.x:oe.positions.strategic.x,te=oe.positions.shared.y;Pe=he/100*2e3,we=te/100*1e3}const re=(b==null?void 0:b.contextIds.includes(oe.id))||z.has(oe.id)||O.has(oe.id)||!1;let ve=1;if(u==="strategic"&&((xe=t.temporal)!=null&&xe.enabled)&&N){const he=t.temporal.keyframes||[];he.length>0&&(ve=pb(oe.id,N,he))}return{id:oe.id,type:"context",position:{x:Pe,y:we},data:{context:oe,isSelected:oe.id===n||r.includes(oe.id),isMemberOfSelectedGroup:re,opacity:ve},style:{width:ye.width,height:ye.height,zIndex:10},width:ye.width,height:ye.height,draggable:!0,selectable:!0,connectable:!1}}),H=u!=="distillation"&&((ue=t.groups)==null?void 0:ue.map(oe=>{const ye=t.contexts.filter(he=>oe.contextIds.includes(he.id));if(ye.length===0)return null;let Pe,we;u==="distillation"?(Pe=[],we=[]):(Pe=ye.map(he=>(u==="flow"?he.positions.flow.x:he.positions.strategic.x)*20),we=ye.map(he=>he.positions.shared.y*10));const re=60,ve=ye.map((he,te)=>{var me;const Te=xu[((me=he.codeSize)==null?void 0:me.bucket)||"medium"];return{x:Pe[te],y:we[te],width:Te.width,height:Te.height}}),X=Tb(ve),pe=Ab(ve,X),ae=Nb(pe,re,!0),xe=Lb(ve,ae,X);return{id:`group-${oe.id}`,type:"group",position:{x:xe.containerX,y:xe.containerY},data:{group:oe,isSelected:oe.id===o,blobPath:xe.blobPath,blobBounds:{width:xe.containerWidth,height:xe.containerHeight}},style:{width:xe.containerWidth,height:xe.containerHeight,zIndex:0,background:"transparent",border:"none",borderRadius:0,padding:0},className:"group-node",width:xe.containerWidth,height:xe.containerHeight,draggable:!1,selectable:!0,connectable:!1}}).filter(Boolean))||[],F=o?[...H.filter(oe=>oe.id!==`group-${o}`),...H.filter(oe=>oe.id===`group-${o}`)]:H,D=d?F:[],ie=u==="strategic"&&t.actors?t.actors.map(oe=>{const ye=oe.position/100*2e3;return{id:oe.id,type:"actor",position:{x:ye,y:50},data:{actor:oe,isSelected:oe.id===s},style:{width:140,height:60,zIndex:15},width:140,height:60,draggable:!0,selectable:!0,connectable:!1}}):[],K=u==="strategic"&&t.userNeeds?t.userNeeds.filter(oe=>oe.visibility!==!1).map(oe=>{const ye=oe.position/100*2e3;return{id:oe.id,type:"userNeed",position:{x:ye,y:200},data:{userNeed:oe,isSelected:oe.id===q.getState().selectedUserNeedId},style:{width:140,height:60,zIndex:14},width:140,height:60,draggable:!0,selectable:!0,connectable:!1}}):[];return[...D,...M,...K,...ie]},[t,n,r,o,s,a,u,d,N]),[I,k,E]=M_(v);W.useEffect(()=>{k(b=>v.map(A=>{const z=b.find(G=>G.id===A.id);return z?{...z,...A}:A}))},[v,k,r,o]);const R=W.useMemo(()=>{if(!t)return[];const b=u!=="distillation"&&p?t.relationships.map(O=>({id:O.id,source:O.fromContextId,target:O.toContextId,type:"relationship",data:{relationship:O},animated:!1,zIndex:5})):[],A=u==="strategic"&&t.actorConnections?t.actorConnections.map(O=>({id:O.id,source:O.actorId,target:O.contextId,type:"actorConnection",data:{connection:O},animated:!1,zIndex:12})):[],z=u==="strategic"&&t.actorNeedConnections?t.actorNeedConnections.map(O=>({id:O.id,source:O.actorId,target:O.userNeedId,type:"actorNeedConnection",data:{connection:O},animated:!1,zIndex:12})):[],G=u==="strategic"&&t.needContextConnections?t.needContextConnections.map(O=>({id:O.id,source:O.userNeedId,target:O.contextId,type:"needContextConnection",data:{connection:O},animated:!1,zIndex:11})):[];return[...b,...A,...z,...G]},[t,u,p,s,a]),Y=W.useCallback((b,A)=>{A.type==="relationship"&&q.setState({selectedRelationshipId:A.id,selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null})},[]),B=W.useCallback((b,A)=>{if(A.type==="group"){const z=A.id.replace("group-","");q.setState({selectedGroupId:z,selectedContextId:null,selectedContextIds:[],selectedActorId:null,selectedUserNeedId:null,selectedRelationshipId:null});return}if(A.type==="actor"){q.getState().setSelectedActor(A.id);return}if(A.type==="userNeed"){q.getState().setSelectedUserNeed(A.id);return}b.shiftKey||b.metaKey||b.ctrlKey?q.getState().toggleContextSelection(A.id):q.setState({selectedContextId:A.id,selectedContextIds:[],selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null,selectedRelationshipId:null})},[]),$=W.useCallback(()=>{q.setState({selectedContextId:null,selectedContextIds:[],selectedGroupId:null,selectedActorId:null,selectedUserNeedId:null,selectedRelationshipId:null})},[]),Z=W.useCallback(b=>{const{source:A,target:z}=b,G=I.find(M=>M.id===A),O=I.find(M=>M.id===z);if(!(!G||!O)){if(G.type==="actor"&&O.type==="userNeed"){q.getState().createActorNeedConnection(A,z);return}if(G.type==="userNeed"&&O.type==="context"){q.getState().createNeedContextConnection(A,z);return}console.log("Invalid connection:",G.type,"",O.type)}},[I]),Q=W.useCallback(b=>{const z=I.filter(F=>F.selected&&F.type==="context").map(F=>F.id),G=[...new Set([...r,...z])],O=b.filter(F=>F.type==="position");if(O.length>1&&O.length===G.length){if(E(b),O.filter(D=>D.dragging===!1).length>0&&t){const D={};G.forEach(ie=>{const K=t.contexts.find(ye=>ye.id===ie),le=I.find(ye=>ye.id===ie);if(!K||!le)return;const ue=le.position.x/2e3*100,oe=le.position.y/1e3*100;u==="distillation"?D[ie]={flow:{x:K.positions.flow.x},strategic:{x:K.positions.strategic.x},distillation:{x:ue,y:100-oe},shared:{y:K.positions.shared.y}}:u==="flow"?D[ie]={flow:{x:ue},strategic:{x:K.positions.strategic.x},distillation:{x:K.positions.distillation.x,y:K.positions.distillation.y},shared:{y:oe}}:D[ie]={flow:{x:K.positions.flow.x},strategic:{x:ue},distillation:{x:K.positions.distillation.x,y:K.positions.distillation.y},shared:{y:oe}}}),g(D)}return}const H=b.find(F=>F.type==="position"&&F.position&&G.includes(F.id)&&G.length>1);if(H){const F=I.find(le=>le.id===H.id);if(!F){E(b);return}const D=H.position.x-F.position.x,ie=H.position.y-F.position.y,K=G.filter(le=>le!==H.id).map(le=>{const ue=I.find(oe=>oe.id===le);return ue?{type:"position",id:le,dragging:!0,position:{x:ue.position.x+D,y:ue.position.y+ie}}:null}).filter(Boolean);E([...b,...K])}else E(b)},[I,r,E]),ne=W.useCallback((b,A)=>{var F,D,ie;if(!t)return;if(A.type==="actor"){if(!((F=t.actors)==null?void 0:F.find(ue=>ue.id===A.id)))return;const le=Math.max(0,Math.min(100,A.position.x/2e3*100));w(A.id,le);return}if(A.type==="userNeed"){if(!((D=t.userNeeds)==null?void 0:D.find(ue=>ue.id===A.id)))return;const le=Math.max(0,Math.min(100,A.position.x/2e3*100));P(A.id,le);return}const z=u==="strategic"&&((ie=t.temporal)==null?void 0:ie.enabled)&&S,O=I.filter(K=>K.selected&&K.type==="context").map(K=>K.id),M=[...new Set([...r,...O])];if(M.includes(A.id)&&M.length>1)if(z)M.forEach(K=>{const le=I.find(ye=>ye.id===K);if(!le)return;const ue=le.position.x/2e3*100,oe=le.position.y/1e3*100;T(S,K,ue,oe)});else{const K={};M.forEach(le=>{const ue=t.contexts.find(we=>we.id===le),oe=I.find(we=>we.id===le);if(!ue||!oe)return;const ye=oe.position.x/2e3*100,Pe=oe.position.y/1e3*100;u==="distillation"?K[le]={flow:{x:ue.positions.flow.x},strategic:{x:ue.positions.strategic.x},distillation:{x:ye,y:100-Pe},shared:{y:ue.positions.shared.y}}:u==="flow"?K[le]={flow:{x:ye},strategic:{x:ue.positions.strategic.x},distillation:{x:ue.positions.distillation.x,y:ue.positions.distillation.y},shared:{y:Pe}}:K[le]={flow:{x:ue.positions.flow.x},strategic:{x:ye},distillation:{x:ue.positions.distillation.x,y:ue.positions.distillation.y},shared:{y:Pe}}}),g(K)}else{const K=t.contexts.find(oe=>oe.id===A.id);if(!K)return;const le=A.position.x/2e3*100,ue=A.position.y/1e3*100;z?T(S,A.id,le,ue):u==="distillation"?h(A.id,{flow:{x:K.positions.flow.x},strategic:{x:K.positions.strategic.x},distillation:{x:le,y:100-ue},shared:{y:K.positions.shared.y}}):u==="flow"?h(A.id,{flow:{x:le},strategic:{x:K.positions.strategic.x},distillation:{x:K.positions.distillation.x,y:K.positions.distillation.y},shared:{y:ue}}):h(A.id,{flow:{x:K.positions.flow.x},strategic:{x:le},distillation:{x:K.positions.distillation.x,y:K.positions.distillation.y},shared:{y:ue}})}},[u,h,g,w,P,T,t,r,I,S]);U.useEffect(()=>{const b=A=>{A.key==="Escape"&&q.setState({selectedContextId:null}),(A.metaKey||A.ctrlKey)&&A.key==="z"&&!A.shiftKey&&(A.preventDefault(),q.getState().undo()),(A.metaKey||A.ctrlKey)&&A.key==="z"&&A.shiftKey&&(A.preventDefault(),q.getState().redo())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]);const ee=(t==null?void 0:t.viewConfig.flowStages)||[];return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx(hb,{}),x.jsxs(Ay,{nodes:I,edges:R,onNodesChange:Q,onConnect:Z,nodeTypes:Wb,edgeTypes:Vb,onNodeClick:B,onEdgeClick:Y,onPaneClick:$,onNodeDragStop:ne,elementsSelectable:!0,fitView:!0,fitViewOptions:{padding:.15,minZoom:.1,maxZoom:.8},minZoom:.1,maxZoom:2,proOptions:{hideAttribution:!0},children:[x.jsx(V_,{gap:24,size:.4,color:"#e5e7eb"}),x.jsx($b,{}),x.jsx(Gb,{}),u==="distillation"?x.jsx(Ub,{}):u==="flow"?x.jsxs(x.Fragment,{children:[x.jsx(Db,{stages:ee}),x.jsx(Wp,{})]}):x.jsxs(x.Fragment,{children:[x.jsx(Ob,{}),x.jsx(Wp,{})]}),x.jsx("svg",{style:{position:"absolute",top:0,left:0},children:x.jsxs("defs",{children:[x.jsx("marker",{id:"arrow-default",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto",children:x.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#cbd5e1"})}),x.jsx("marker",{id:"arrow-hover",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto",children:x.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#475569"})}),x.jsx("marker",{id:"arrow-selected",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto",children:x.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#3b82f6"})}),x.jsx("marker",{id:"actor-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto",children:x.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),x.jsx("marker",{id:"need-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto",children:x.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})})]})})]})]})}function qb(){return x.jsx(Ld,{children:x.jsx(Zb,{})})}const Vp=[{value:"customer-supplier",label:"Customer-Supplier",description:"Downstream depends on upstream"},{value:"conformist",label:"Conformist",description:"Downstream conforms to upstream model"},{value:"anti-corruption-layer",label:"Anti-Corruption Layer",description:"Downstream uses translation layer"},{value:"open-host-service",label:"Open Host Service",description:"Upstream provides public API"},{value:"published-language",label:"Published Language",description:"Shared, well-documented format"},{value:"shared-kernel",label:"Shared Kernel",description:"Shared code/model (symmetric)"},{value:"partnership",label:"Partnership",description:"Mutual dependency (symmetric)"},{value:"separate-ways",label:"Separate Ways",description:"No integration"}];function Kb({fromContext:e,availableContexts:t,onConfirm:n,onCancel:r}){var g;const[o,s]=U.useState(""),[a,u]=U.useState("customer-supplier"),[d,p]=U.useState(""),h=w=>{w.preventDefault(),o&&n(o,a,d.trim()||void 0)};return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:x.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl w-[480px] max-w-[90vw] border border-slate-200 dark:border-neutral-700",children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-neutral-700",children:[x.jsx("h2",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"Add Relationship"}),x.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:x.jsx(ln,{size:16})})]}),x.jsxs("form",{onSubmit:h,className:"p-4 space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"From"}),x.jsx("div",{className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-slate-50 dark:bg-neutral-900 text-slate-700 dark:text-slate-300",children:e.name})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"To (Target Context)"}),x.jsxs("select",{value:o,onChange:w=>s(w.target.value),className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",required:!0,children:[x.jsx("option",{value:"",children:"Select target context..."}),t.map(w=>x.jsx("option",{value:w.id,children:w.name},w.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"DDD Pattern"}),x.jsx("select",{value:a,onChange:w=>u(w.target.value),className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",children:Vp.map(w=>x.jsx("option",{value:w.value,children:w.label},w.value))}),x.jsx("div",{className:"mt-1.5 text-xs text-slate-600 dark:text-slate-400",children:(g=Vp.find(w=>w.value===a))==null?void 0:g.description})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Notes (optional)"}),x.jsx("textarea",{value:d,onChange:w=>p(w.target.value),placeholder:"Additional details about this relationship...",rows:3,className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400 resize-none"})]}),x.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[x.jsx("button",{type:"button",onClick:r,className:"px-3 py-1.5 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:!o,className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-neutral-600 text-white rounded transition-colors disabled:cursor-not-allowed",children:"Add Relationship"})]})]})]})})}const Gp=[{value:"customer-supplier",label:"Customer-Supplier",description:"Downstream depends on upstream"},{value:"conformist",label:"Conformist",description:"Downstream conforms to upstream model"},{value:"anti-corruption-layer",label:"Anti-Corruption Layer",description:"Downstream uses translation layer"},{value:"open-host-service",label:"Open Host Service",description:"Upstream provides public API"},{value:"published-language",label:"Published Language",description:"Shared, well-documented format"},{value:"shared-kernel",label:"Shared Kernel",description:"Shared code/model (symmetric)"},{value:"partnership",label:"Partnership",description:"Mutual dependency (symmetric)"},{value:"separate-ways",label:"Separate Ways",description:"No integration"}],Cs="w-full font-semibold text-sm text-slate-900 dark:text-slate-100 leading-tight bg-transparent border border-transparent hover:border-slate-300 dark:hover:border-neutral-600 focus:border-blue-500 dark:focus:border-blue-400 rounded px-2 py-0.5 -ml-2 outline-none",Qb="w-full text-xs px-3 py-1.5 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",hr="w-full text-xs text-slate-700 dark:text-slate-300 leading-normal bg-slate-50 dark:bg-neutral-900 border border-slate-200 dark:border-neutral-700 hover:border-slate-300 dark:hover:border-neutral-600 focus:border-blue-500 dark:focus:border-blue-400 rounded px-2 py-1 outline-none resize-none";function Jb(){var ye,Pe,we,re,ve;const e=q(X=>X.activeProjectId),t=q(X=>e?X.projects[e]:void 0),n=q(X=>X.selectedContextId),r=q(X=>X.selectedGroupId),o=q(X=>X.selectedActorId),s=q(X=>X.selectedUserNeedId),a=q(X=>X.selectedRelationshipId),u=q(X=>X.activeViewMode),d=q(X=>X.updateContext),p=q(X=>X.deleteContext),h=q(X=>X.updateGroup),g=q(X=>X.deleteGroup),w=q(X=>X.removeContextFromGroup),P=q(X=>X.addContextToGroup),N=q(X=>X.addContextsToGroup),S=q(X=>X.unassignRepo),T=q(X=>X.addRelationship),y=q(X=>X.deleteRelationship),v=q(X=>X.updateRelationship),I=q(X=>X.updateActor),k=q(X=>X.setViewMode),E=q(X=>X.deleteActor);q(X=>X.createActorConnection);const R=q(X=>X.deleteActorConnection),Y=q(X=>X.updateUserNeed),B=q(X=>X.deleteUserNeed);q(X=>X.createActorNeedConnection);const $=q(X=>X.deleteActorNeedConnection);q(X=>X.createNeedContextConnection);const Z=q(X=>X.deleteNeedContextConnection),Q=q(X=>X.temporal.currentDate),ne=q(X=>X.temporal.activeKeyframeId),[ee,b]=U.useState(null),[A,z]=U.useState(null),[G,O]=U.useState(!1),[M,H]=U.useState(()=>{const X=localStorage.getItem("contextflow.useCodeCohesionAPI");return X===null?!0:X==="true"});if(!t)return null;if(r){const X=t.groups.find(te=>te.id===r);if(!X)return x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:"Group not found."});const pe=()=>{window.confirm(`Delete group "${X.label}"? Member contexts will not be deleted. This can be undone with Cmd/Ctrl+Z.`)&&g(X.id)},ae=t.contexts.filter(te=>X.contextIds.includes(te.id)),xe=t.contexts.filter(te=>!X.contextIds.includes(te.id)),he=()=>{xe.length>0&&N(X.id,xe.map(te=>te.id))};return x.jsxs("div",{className:"space-y-5",children:[x.jsx("div",{children:x.jsx("input",{type:"text",value:X.label,onChange:te=>h(X.id,{label:te.target.value}),className:Cs})}),x.jsx(lt,{label:"Notes",children:x.jsx("textarea",{value:X.notes||"",onChange:te=>h(X.id,{notes:te.target.value}),placeholder:"Describe this group...",rows:2,className:hr})}),x.jsx(lt,{label:`Member Contexts (${ae.length})`,children:x.jsx("div",{className:"space-y-1",children:ae.map(te=>x.jsxs("div",{className:"flex items-center gap-2 group",children:[x.jsx("button",{onClick:()=>q.setState({selectedContextId:te.id,selectedGroupId:null}),className:"flex-1 text-left px-2 py-1.5 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-700 dark:text-slate-300 text-xs",children:te.name}),x.jsx("button",{onClick:()=>w(X.id,te.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",title:"Remove from group",children:x.jsx(ln,{size:12})})]},te.id))})}),xe.length>0&&x.jsx(lt,{label:`Add Contexts (${xe.length} available)`,children:x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"space-y-1",children:xe.map(te=>x.jsxs("button",{onClick:()=>P(X.id,te.id),className:"w-full flex items-center gap-2 px-2 py-1.5 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20 text-slate-700 dark:text-slate-300 hover:text-blue-700 dark:hover:text-blue-300 text-xs transition-colors text-left",children:[x.jsx(tc,{size:12,className:"flex-shrink-0"}),te.name]},te.id))}),x.jsxs("button",{onClick:he,className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors border border-blue-200 dark:border-blue-800",children:[x.jsx(tc,{size:12}),"Add All Available"]})]})}),x.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-neutral-700",children:x.jsxs("button",{onClick:pe,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:[x.jsx(vn,{size:14}),"Delete Group"]})})]})}if(o){const X=(ye=t.actors)==null?void 0:ye.find(te=>te.id===o);if(!X)return x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:"Actor not found."});const ae=(t.actorNeedConnections||[]).filter(te=>te.actorId===X.id).map(te=>{var me;const Te=(me=t.userNeeds)==null?void 0:me.find(Ae=>Ae.id===te.userNeedId);return{connection:te,userNeed:Te}}).filter(te=>te.userNeed),xe=te=>{I(X.id,te)},he=()=>{window.confirm(`Delete actor "${X.name}"? This will also delete all connections to user needs. This can be undone with Cmd/Ctrl+Z.`)&&E(X.id)};return x.jsxs("div",{className:"space-y-5",children:[x.jsx("div",{children:x.jsx("input",{type:"text",value:X.name,onChange:te=>xe({name:te.target.value}),className:Cs})}),x.jsx(lt,{label:"Description",children:x.jsx("textarea",{value:X.description||"",onChange:te=>xe({description:te.target.value}),placeholder:"Describe this actor/user type...",rows:2,className:hr})}),x.jsx(lt,{label:`Connected User Needs (${ae.length})`,children:x.jsx("div",{className:"space-y-1",children:ae.length===0?x.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs italic",children:"No connections yet"}):ae.map(({connection:te,userNeed:Te})=>x.jsxs("div",{className:"flex items-center gap-2 group",children:[x.jsx("button",{onClick:()=>q.setState({selectedUserNeedId:Te.id,selectedActorId:null}),className:"flex-1 text-left px-2 py-1.5 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-700 dark:text-slate-300 text-xs",children:Te.name}),x.jsx("button",{onClick:()=>$(te.id),className:"opacity-0 group-hover:opacity-100 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 p-1 rounded",title:"Remove connection",children:x.jsx(ln,{size:14})})]},te.id))})}),x.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-neutral-700",children:x.jsxs("button",{onClick:he,className:"flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1.5 rounded text-xs font-medium",children:[x.jsx(vn,{size:14}),"Delete Actor"]})})]})}if(s){const X=(Pe=t.userNeeds)==null?void 0:Pe.find(me=>me.id===s);if(!X)return x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:"User Need not found."});const ae=(t.actorNeedConnections||[]).filter(me=>me.userNeedId===X.id).map(me=>{var qe;const Ae=(qe=t.actors)==null?void 0:qe.find(Lt=>Lt.id===me.actorId);return{connection:me,actor:Ae}}).filter(me=>me.actor),he=(t.needContextConnections||[]).filter(me=>me.userNeedId===X.id).map(me=>{const Ae=t.contexts.find(qe=>qe.id===me.contextId);return{connection:me,context:Ae}}).filter(me=>me.context),te=me=>{Y(X.id,me)},Te=()=>{confirm(`Delete user need "${X.name}"?`)&&B(X.id)};return x.jsxs("div",{className:"space-y-4",children:[x.jsx(lt,{label:"User Need",children:x.jsx("input",{type:"text",value:X.name,onChange:me=>te({name:me.target.value}),className:Cs})}),x.jsx(lt,{label:"Description",children:x.jsx("textarea",{value:X.description||"",onChange:me=>te({description:me.target.value}),placeholder:"Describe this user need...",rows:2,className:hr})}),x.jsx(lt,{label:`Actors (${ae.length})`,children:x.jsx("div",{className:"space-y-1",children:ae.length===0?x.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs italic",children:"No actors connected"}):ae.map(({connection:me,actor:Ae})=>x.jsxs("div",{className:"flex items-center gap-2 group",children:[x.jsx("button",{onClick:()=>q.setState({selectedActorId:Ae.id,selectedUserNeedId:null}),className:"flex-1 text-left px-2 py-1.5 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-700 dark:text-slate-300 text-xs",children:Ae.name}),x.jsx("button",{onClick:()=>$(me.id),className:"opacity-0 group-hover:opacity-100 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 p-1 rounded",title:"Remove connection",children:x.jsx(ln,{size:14})})]},me.id))})}),x.jsx(lt,{label:`Contexts (${he.length})`,children:x.jsx("div",{className:"space-y-1",children:he.length===0?x.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs italic",children:"No contexts connected"}):he.map(({connection:me,context:Ae})=>x.jsxs("div",{className:"flex items-center gap-2 group",children:[x.jsx("button",{onClick:()=>q.setState({selectedContextId:Ae.id,selectedUserNeedId:null}),className:"flex-1 text-left px-2 py-1.5 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-700 dark:text-slate-300 text-xs",children:Ae.name}),x.jsx("button",{onClick:()=>Z(me.id),className:"opacity-0 group-hover:opacity-100 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 p-1 rounded",title:"Remove connection",children:x.jsx(ln,{size:14})})]},me.id))})}),x.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-neutral-700",children:x.jsxs("button",{onClick:Te,className:"flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1.5 rounded text-xs font-medium",children:[x.jsx(vn,{size:14}),"Delete User Need"]})})]})}if(a){const X=t.relationships.find(me=>me.id===a);if(!X)return x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:"Relationship not found."});const pe=t.contexts.find(me=>me.id===X.fromContextId),ae=t.contexts.find(me=>me.id===X.toContextId),xe=()=>{window.confirm(`Delete relationship from "${pe==null?void 0:pe.name}" to "${ae==null?void 0:ae.name}"? This can be undone with Cmd/Ctrl+Z.`)&&y(X.id)},he=me=>{v(X.id,{pattern:me})},te=me=>{const Ae=me.target.value.trim();Ae!==X.communicationMode&&v(X.id,{communicationMode:Ae||void 0})},Te=me=>{const Ae=me.target.value.trim();Ae!==X.description&&v(X.id,{description:Ae||void 0})};return x.jsxs("div",{className:"space-y-5",children:[x.jsx("div",{className:"font-semibold text-base text-slate-900 dark:text-slate-100 leading-tight",children:"Relationship"}),x.jsx(lt,{label:"Direction",children:x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx("button",{onClick:()=>q.setState({selectedContextId:pe==null?void 0:pe.id,selectedRelationshipId:null}),className:"text-blue-600 dark:text-blue-400 hover:underline",children:(pe==null?void 0:pe.name)||"Unknown"}),x.jsx(ec,{size:14,className:"text-slate-400"}),x.jsx("button",{onClick:()=>q.setState({selectedContextId:ae==null?void 0:ae.id,selectedRelationshipId:null}),className:"text-blue-600 dark:text-blue-400 hover:underline",children:(ae==null?void 0:ae.name)||"Unknown"})]})}),x.jsxs(lt,{label:"DDD Pattern",children:[x.jsx("select",{value:X.pattern,onChange:me=>he(me.target.value),className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",children:Gp.map(me=>x.jsx("option",{value:me.value,children:me.label},me.value))}),x.jsx("div",{className:"mt-1.5 text-xs text-slate-600 dark:text-slate-400",children:(we=Gp.find(me=>me.value===X.pattern))==null?void 0:we.description})]}),x.jsx(lt,{label:"Communication Mode",children:x.jsx("input",{type:"text",defaultValue:X.communicationMode||"",onBlur:te,placeholder:"e.g., REST API, gRPC, Event Bus...",className:Qb})}),x.jsx(lt,{label:"Description",children:x.jsx("textarea",{defaultValue:X.description||"",onBlur:Te,placeholder:"Additional details about this relationship...",rows:3,className:hr})}),x.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-neutral-700",children:x.jsxs("button",{onClick:xe,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:[x.jsx(vn,{size:14}),"Delete Relationship"]})})]})}if(!n)return null;const F=t.contexts.find(X=>X.id===n);if(!F)return x.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:"Context not found."});const D=t.repos.filter(X=>X.contextId===F.id),ie=new Set(D.flatMap(X=>X.teamIds)),K=t.teams.filter(X=>ie.has(X.id)),le=t.groups.filter(X=>X.contextIds.includes(F.id)),ue=X=>{d(F.id,X)},oe=()=>{window.confirm(`Delete "${F.name}"? This can be undone with Cmd/Ctrl+Z.`)&&p(F.id)};return x.jsxs("div",{className:"space-y-5",children:[x.jsx("div",{children:x.jsx("input",{type:"text",value:F.name,onChange:X=>ue({name:X.target.value}),className:Cs})}),(()=>{const pe=(t.actorConnections||[]).filter(ae=>ae.contextId===F.id).map(ae=>{var he;const xe=(he=t.actors)==null?void 0:he.find(te=>te.id===ae.actorId);return{connection:ae,actor:xe}}).filter(ae=>ae.actor);return pe.length>0?x.jsx("div",{className:"space-y-1",children:pe.map(({connection:ae,actor:xe})=>x.jsxs("div",{className:"flex items-center gap-2 group/actor",children:[x.jsxs("button",{onClick:()=>q.setState({selectedActorId:xe.id,selectedContextId:null}),className:"flex-1 text-left px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-xs flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[x.jsx(Ry,{size:12,className:"text-blue-500 flex-shrink-0"}),xe.name]}),x.jsx("button",{onClick:()=>R(ae.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors opacity-0 group-hover/actor:opacity-100",title:"Remove actor connection",children:x.jsx(vn,{size:11})})]},ae.id))}):null})(),x.jsx("textarea",{value:F.purpose||"",onChange:X=>ue({purpose:X.target.value}),placeholder:"What does this context do for the business?",rows:2,className:hr}),K.length>0&&x.jsx("div",{className:"space-y-1",children:K.map(X=>x.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[X.name,X.topologyType&&x.jsxs("span",{className:"text-slate-500 dark:text-slate-500 ml-1",children:["(",X.topologyType,")"]})]},X.id))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:()=>ue({isLegacy:!F.isLegacy}),className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md transition-colors ${F.isLegacy?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:F.isLegacy?" Legacy":"Legacy"}),x.jsx("button",{onClick:()=>ue({isExternal:!F.isExternal}),className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md transition-colors ${F.isExternal?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:F.isExternal?" External":"External"})]}),le.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2",children:le.map(X=>x.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded border transition-all group/chip",style:{backgroundColor:X.color?`${X.color}15`:"#3b82f615",borderColor:X.color||"#3b82f6"},children:[x.jsx("button",{onClick:()=>q.setState({selectedGroupId:X.id,selectedContextId:null}),className:"text-xs font-medium hover:underline",style:{color:X.color||"#3b82f6"},children:X.label}),x.jsx("button",{onClick:()=>w(X.id,F.id),className:"opacity-0 group-hover/chip:opacity-100 transition-opacity hover:bg-white/50 dark:hover:bg-black/20 rounded p-0.5",title:"Remove from group",children:x.jsx(ln,{size:10})})]},X.id))}),x.jsxs("div",{className:"flex items-center justify-between gap-2",children:[x.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md ${F.strategicClassification==="core"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300":F.strategicClassification==="supporting"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[F.strategicClassification==="core"&&" Core",F.strategicClassification==="supporting"&&" Supporting",F.strategicClassification==="generic"&&" Generic",!F.strategicClassification&&"Not classified"]}),x.jsx("button",{onClick:()=>k("distillation"),className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-neutral-700 transition-colors",children:"Update"})]}),x.jsxs("div",{className:"flex items-center justify-between gap-2",children:[x.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md bg-violet-100 dark:bg-violet-900/30 text-violet-800 dark:text-violet-300",children:[F.evolutionStage==="genesis"&&" Genesis",F.evolutionStage==="custom-built"&&" Custom-Built",F.evolutionStage==="product/rental"&&" Product",F.evolutionStage==="commodity/utility"&&" Commodity"]}),x.jsx("button",{onClick:()=>k("strategic"),className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-neutral-700 transition-colors",children:"Update"})]}),u==="strategic"&&((re=t.temporal)==null?void 0:re.enabled)&&Q&&x.jsx(lt,{label:x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(J_,{size:14})," Position at ",Q]}),children:x.jsx("div",{className:"space-y-2",children:(()=>{const X=t.temporal.keyframes||[],pe=ne?X.find(te=>te.id===ne):null,ae={x:F.positions.strategic.x,y:F.positions.shared.y},xe=Yy(F.id,Q,X,ae),he=ai(xe.x);return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-0.5",children:[x.jsxs("div",{children:["Evolution: ",xe.x.toFixed(1),"% (",he.replace("-"," "),")"]}),x.jsxs("div",{children:["Value Chain: ",xe.y.toFixed(1),"%"]})]}),pe?x.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[" Viewing keyframe: ",pe.label||pe.date]}):x.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400",children:" Interpolated between keyframes"})]})})()})}),D.length>0&&x.jsx("div",{className:"space-y-2",children:D.map(X=>x.jsx(ek,{repo:X,project:t,useAPI:M,expandedTeamId:ee,expandedRepoId:A,onToggleTeam:b,onToggleRepo:z,onUnassign:S},X.id))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 w-16",children:"Code"}),x.jsxs("select",{value:((ve=F.codeSize)==null?void 0:ve.bucket)||"",onChange:X=>ue({codeSize:{...F.codeSize,bucket:X.target.value}}),className:"w-32 text-xs px-2.5 py-1.5 rounded-md border border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",children:[x.jsx("option",{value:"",children:"Not set"}),x.jsx("option",{value:"tiny",children:"Tiny"}),x.jsx("option",{value:"small",children:"Small"}),x.jsx("option",{value:"medium",children:"Medium"}),x.jsx("option",{value:"large",children:"Large"}),x.jsx("option",{value:"huge",children:"Huge"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 w-16",children:"Boundary"}),x.jsxs("select",{value:F.boundaryIntegrity||"",onChange:X=>ue({boundaryIntegrity:X.target.value}),className:"w-32 text-xs px-2.5 py-1.5 rounded-md border border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400",children:[x.jsx("option",{value:"",children:"Not set"}),x.jsx("option",{value:"strong",children:"Strong"}),x.jsx("option",{value:"moderate",children:"Moderate"}),x.jsx("option",{value:"weak",children:"Weak"})]})]}),x.jsx("textarea",{value:F.boundaryNotes||"",onChange:X=>ue({boundaryNotes:X.target.value}),placeholder:"Why is the boundary strong or weak?",rows:2,className:hr})]}),x.jsx(lt,{label:"Notes",children:x.jsx("textarea",{value:F.notes||"",onChange:X=>ue({notes:X.target.value}),placeholder:"Assumptions, politics, bottlenecks, risks...",rows:3,className:hr})}),(()=>{const X=t.relationships.filter(ae=>ae.fromContextId===F.id),pe=t.relationships.filter(ae=>ae.toContextId===F.id);return X.length>0||pe.length>0,x.jsxs(lt,{label:"Relationships",children:[X.length>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"text-[10px] font-semibold text-slate-500 dark:text-slate-400 mb-1.5 uppercase",children:"Outgoing"}),x.jsx("div",{className:"space-y-2",children:X.map(ae=>{const xe=t.contexts.find(he=>he.id===ae.toContextId);return x.jsxs("div",{className:"flex items-start justify-between gap-2 group/rel",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[x.jsx(ec,{size:12,className:"text-slate-400 flex-shrink-0"}),x.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:(xe==null?void 0:xe.name)||"Unknown"})]}),x.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 ml-5 mt-0.5",children:ae.pattern}),ae.description&&x.jsx("div",{className:"text-[10px] text-slate-600 dark:text-slate-400 ml-5 mt-1",children:ae.description})]}),x.jsx("button",{onClick:()=>y(ae.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors opacity-0 group-hover/rel:opacity-100",title:"Delete relationship",children:x.jsx(vn,{size:11})})]},ae.id)})})]}),pe.length>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"text-[10px] font-semibold text-slate-500 dark:text-slate-400 mb-1.5 uppercase",children:"Incoming"}),x.jsx("div",{className:"space-y-2",children:pe.map(ae=>{const xe=t.contexts.find(he=>he.id===ae.fromContextId);return x.jsxs("div",{className:"flex items-start justify-between gap-2 group/rel",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[x.jsx(ec,{size:12,className:"text-slate-400 flex-shrink-0 rotate-180"}),x.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:(xe==null?void 0:xe.name)||"Unknown"})]}),x.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 ml-5 mt-0.5",children:ae.pattern}),ae.description&&x.jsx("div",{className:"text-[10px] text-slate-600 dark:text-slate-400 ml-5 mt-1",children:ae.description})]}),x.jsx("button",{onClick:()=>y(ae.id),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors opacity-0 group-hover/rel:opacity-100",title:"Delete relationship",children:x.jsx(vn,{size:11})})]},ae.id)})})]}),x.jsxs("button",{onClick:()=>O(!0),className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-xs bg-slate-100 dark:bg-neutral-700 hover:bg-slate-200 dark:hover:bg-neutral-600 text-slate-700 dark:text-slate-300 rounded transition-colors",children:[x.jsx(tc,{size:12}),"Add Relationship"]})]})})(),G&&x.jsx(Kb,{fromContext:F,availableContexts:t.contexts.filter(X=>X.id!==F.id),onConfirm:(X,pe,ae)=>{T(F.id,X,pe,ae),O(!1)},onCancel:()=>O(!1)}),x.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-neutral-700",children:x.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:[x.jsx(vn,{size:14}),"Delete Context"]})})]})}function ek({repo:e,project:t,useAPI:n,expandedTeamId:r,expandedRepoId:o,onToggleTeam:s,onToggleRepo:a,onUnassign:u}){const d=t.teams.filter(E=>e.teamIds.includes(E.id)),p=e.contributors.map(E=>t.people.find(R=>R.id===E.personId)).filter(E=>!!E),h=o===e.id,{contributors:g,loading:w,error:P}=tk(e.name,n),{stats:N,loading:S,error:T}=nk(e.name,n),y=n?g||[]:p.map(E=>E.displayName),v=n?"Top 5, last 90 days":"Static",I=()=>{if(!(N!=null&&N.filesByExtension))return null;const E=Object.entries(N.filesByExtension);if(E.length===0)return null;const R=E.sort(($,Z)=>Z[1]-$[1]),[Y,B]=R[0];return{ext:Y.replace(".","").toUpperCase(),count:B}},k=E=>E.toLocaleString();return x.jsxs("div",{children:[x.jsxs("div",{className:"flex flex-wrap gap-1 items-center group",children:[x.jsxs("button",{onClick:()=>a(h?null:e.id),className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded text-[10px] font-medium hover:bg-blue-200 dark:hover:bg-blue-900/60 transition-colors flex items-center gap-1",children:[x.jsx(nb,{size:10}),e.name,h?" ":" "]}),x.jsx("button",{onClick:()=>u(e.id),className:"p-0.5 rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",title:"Unassign repo",children:x.jsx(ln,{size:10})})]}),h&&x.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-600 rounded p-2.5 mt-1.5",children:[e.remoteUrl&&x.jsxs("a",{href:e.remoteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-slate-700 dark:text-blue-400 text-[11px] flex items-center gap-1 hover:underline mb-3",children:[x.jsx("span",{className:"truncate",children:e.remoteUrl}),x.jsx(hu,{size:10,className:"flex-shrink-0"})]}),n&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"text-[10px] font-semibold text-slate-600 dark:text-slate-400 mb-1.5",children:"Repository Stats"}),S&&x.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Loading stats..."}),T&&x.jsx("div",{className:"text-[10px] text-red-600 dark:text-red-400",children:"Error loading stats"}),N&&!S&&!T&&x.jsxs("div",{className:"text-[10px] text-slate-600 dark:text-slate-400 space-y-0.5",children:[x.jsxs("div",{children:[" ",k(N.totalFiles)," files"]}),x.jsxs("div",{children:[" ",k(N.totalLoc)," lines of code"]}),I()&&x.jsxs("div",{children:[" Primary: ",I().ext," (",k(I().count)," files)"]})]})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-[10px] font-semibold text-slate-600 dark:text-slate-400 mb-1.5",children:["Contributors (",v,")"]}),w&&x.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Loading contributors..."}),P&&x.jsx("div",{className:"text-[10px] text-red-600 dark:text-red-400",children:"Error loading contributors"}),!w&&!P&&y.length>0&&x.jsx("div",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:y.join(", ")})]}),r&&d.some(E=>E.id===r)&&x.jsx("div",{className:"bg-slate-50 dark:bg-neutral-700 border border-slate-200 dark:border-neutral-600 rounded p-2 mt-2",children:(()=>{const E=d.find(R=>R.id===r);return E?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-1 text-[11px]",children:E.name}),E.topologyType&&x.jsxs("div",{className:"text-[10px] text-slate-600 dark:text-slate-400 mb-1",children:["Type: ",E.topologyType]}),E.jiraBoard&&x.jsxs("a",{href:E.jiraBoard,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 text-[10px] flex items-center gap-1 hover:underline",children:[x.jsx("span",{className:"truncate",children:"Jira Board"}),x.jsx(hu,{size:9,className:"flex-shrink-0"})]})]}):null})()})]})]})}function tk(e,t){const[n,r]=U.useState(null),[o,s]=U.useState(!1),[a,u]=U.useState(null);return U.useEffect(()=>{if(!t||!e){r(null),u(null);return}s(!0),u(null);const{apiBaseUrl:d,contributors:{limit:p,days:h}}=pd.integrations.codecohesion;fetch(`${d}/repos/${e}/contributors?limit=${p}&days=${h}`).then(g=>{if(!g.ok)throw new Error(`API error: ${g.status}`);return g.json()}).then(g=>{const w=Array.isArray(g.contributors)?g.contributors.map(P=>P.name||P.login||P.email||"Unknown"):[];r(w),s(!1)}).catch(g=>{console.error("Failed to fetch contributors:",g),u(g.message),s(!1)})},[e,t]),{contributors:n,loading:o,error:a}}function nk(e,t){const[n,r]=U.useState(null),[o,s]=U.useState(!1),[a,u]=U.useState(null);return U.useEffect(()=>{if(!t||!e){r(null),u(null);return}s(!0),u(null),fetch(`${pd.integrations.codecohesion.apiBaseUrl}/repos/${e}/stats`).then(d=>{if(!d.ok)throw new Error(`API error: ${d.status}`);return d.json()}).then(d=>{r(d.stats),s(!1)}).catch(d=>{console.error("Failed to fetch repo stats:",d),u(d.message),s(!1)})},[e,t]),{stats:n,loading:o,error:a}}function lt({label:e,children:t}){return x.jsxs("div",{children:[x.jsx("div",{className:"text-[11px] font-semibold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wider",children:e}),x.jsx("div",{className:"text-[13px]",children:t})]})}function rk(){const e=localStorage.getItem("contextflow.theme");return e==="light"||e==="dark"?e:(typeof window<"u"&&window.matchMedia("(prefers-color-scheme: light)").matches,"light")}function ok(){const[e,t]=W.useState(rk);return W.useEffect(()=>{const r=document.documentElement;r.classList.remove("light","dark"),r.classList.add(e),localStorage.setItem("contextflow.theme",e)},[e]),{theme:e,toggleTheme:()=>{t(r=>r==="light"?"dark":"light")}}}function ik(){var F;const e=W.useRef(null),t=q(D=>D.activeProjectId),n=q(D=>t?D.projects[t]:void 0),r=q(D=>D.projects),o=q(D=>D.activeViewMode),s=q(D=>D.setViewMode),a=q(D=>D.setActiveProject),u=q(D=>D.undoStack.length>0),d=q(D=>D.redoStack.length>0),p=q(D=>D.undo),h=q(D=>D.redo),g=q(D=>D.fitToMap),w=q(D=>D.addContext),P=q(D=>D.addActor),N=q(D=>D.addUserNeed),S=q(D=>D.addFlowStage);q(D=>D.exportProject);const T=q(D=>D.importProject),y=q(D=>D.showGroups),v=q(D=>D.showRelationships),I=q(D=>D.toggleShowGroups),k=q(D=>D.toggleShowRelationships),E=q(D=>D.groupOpacity),R=q(D=>D.setGroupOpacity),Y=q(D=>D.toggleTemporalMode),B=((F=n==null?void 0:n.temporal)==null?void 0:F.enabled)||!1,{theme:$,toggleTheme:Z}=ok(),[Q,ne]=W.useState(!1),[ee,b]=W.useState(()=>localStorage.getItem("contextflow.useCodeCohesionAPI")==="true");W.useEffect(()=>{function D(ie){e.current&&!e.current.contains(ie.target)&&ne(!1)}if(Q)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[Q]);const A=()=>{if(!n)return;const D=JSON.stringify(n,null,2),ie=new Blob([D],{type:"application/json"}),K=URL.createObjectURL(ie),le=document.createElement("a");le.href=K,le.download=`${n.name.replace(/\s+/g,"-").toLowerCase()}.project.json`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(K)},z=()=>{const D=document.createElement("input");D.type="file",D.accept=".json",D.onchange=ie=>{var ue;const K=(ue=ie.target.files)==null?void 0:ue[0];if(!K)return;const le=new FileReader;le.onload=oe=>{var ye;try{const Pe=JSON.parse((ye=oe.target)==null?void 0:ye.result);T(Pe)}catch{alert("Failed to import project: Invalid JSON file")}},le.readAsText(K)},D.click()},G=()=>{const D=prompt("Context name:");D&&w(D)},O=()=>{const D=prompt("Actor name:");D&&P(D)},M=()=>{const D=prompt("User need name:");D&&N(D)},H=()=>{const D=prompt("Stage label:");if(!D)return;const ie=prompt("Position (0-100):","50");if(!ie)return;const K=parseFloat(ie);if(isNaN(K)||K<0||K>100){alert("Position must be a number between 0 and 100");return}try{S(D.trim(),K)}catch(le){alert(le instanceof Error?le.message:"Failed to add stage")}};return x.jsxs("header",{className:"flex items-center gap-4 px-5 py-3 border-b border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-800",children:[x.jsx("div",{className:"font-semibold text-base text-slate-800 dark:text-slate-100",children:"ContextFlow"}),n&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-slate-400 dark:text-slate-500",children:""}),x.jsx("select",{value:t||"",onChange:D=>a(D.target.value),className:"text-sm text-slate-600 dark:text-slate-300 font-medium bg-transparent border border-transparent hover:border-slate-300 dark:hover:border-neutral-600 focus:border-blue-500 dark:focus:border-blue-400 rounded px-2 py-1 outline-none cursor-pointer",children:Object.values(r).sort((D,ie)=>{const K={"empty-project":0,"elan-warranty":1,"acme-ecommerce":2,cbioportal:3};return(K[D.id]??999)-(K[ie.id]??999)}).map(D=>x.jsx("option",{value:D.id,children:D.name},D.id))})]}),x.jsxs("div",{className:"ml-8 flex items-center bg-slate-100 dark:bg-neutral-900 rounded-lg p-1",children:[x.jsx("button",{onClick:()=>s("flow"),className:`px-3 py-1.5 text-xs font-medium rounded transition-colors ${o==="flow"?"bg-white dark:bg-neutral-700 text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:"Value Stream"}),x.jsx("button",{onClick:()=>s("distillation"),className:`px-3 py-1.5 text-xs font-medium rounded transition-colors ${o==="distillation"?"bg-white dark:bg-neutral-700 text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:"Distillation"}),x.jsx("button",{onClick:()=>s("strategic"),className:`px-3 py-1.5 text-xs font-medium rounded transition-colors ${o==="strategic"?"bg-white dark:bg-neutral-700 text-slate-900 dark:text-slate-100 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:"Strategic"})]}),x.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[o==="strategic"&&x.jsxs(x.Fragment,{children:[x.jsx(nn,{onClick:O,icon:x.jsx(Oy,{size:16}),label:"Add Actor",tooltip:"Add new actor"}),x.jsx(nn,{onClick:M,icon:x.jsx(Dy,{size:16}),label:"Add User Need",tooltip:"Add new user need"})]}),x.jsx(nn,{onClick:G,icon:x.jsx(K_,{size:16}),label:"Add Context",tooltip:"Add new bounded context"}),o==="flow"&&x.jsx(nn,{onClick:H,icon:x.jsx(rb,{size:16}),label:"Add Stage",tooltip:"Add new flow stage"}),o==="strategic"&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-px h-5 bg-slate-200 dark:bg-neutral-700"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Temporal"}),x.jsx("button",{onClick:Y,className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800",style:{backgroundColor:B?"#3b82f6":"#cbd5e1"},title:"Enable temporal mode",children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:B?"translateX(18px)":"translateX(2px)"}})})]})]}),x.jsx("div",{className:"w-px h-5 bg-slate-200 dark:bg-neutral-700"}),x.jsx(nn,{onClick:p,icon:x.jsx(ub,{size:16}),disabled:!u,tooltip:"Undo (Z)"}),x.jsx(nn,{onClick:h,icon:x.jsx(lb,{size:16}),disabled:!d,tooltip:"Redo (Z)"}),x.jsx("div",{className:"w-px h-5 bg-slate-200 dark:bg-neutral-700"}),x.jsx(nn,{onClick:g,icon:x.jsx(fb,{size:16}),label:"Fit to Map",tooltip:"Fit all contexts to view"}),x.jsx("div",{className:"w-px h-5 bg-slate-200 dark:bg-neutral-700"}),x.jsx(nn,{onClick:A,icon:x.jsx(tb,{size:16}),tooltip:"Export project JSON"}),x.jsx(nn,{onClick:z,icon:x.jsx(db,{size:16}),tooltip:"Import project JSON"}),x.jsx("div",{className:"w-px h-5 bg-slate-200 dark:bg-neutral-700"}),x.jsxs("div",{className:"relative",ref:e,children:[x.jsx(nn,{onClick:()=>ne(!Q),icon:x.jsx(ab,{size:16}),tooltip:"Settings"}),Q&&x.jsx("div",{className:"absolute right-0 top-full mt-2 w-72 bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded-lg shadow-lg p-4 z-50",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Appearance"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[$==="light"?x.jsx(cb,{size:14,className:"text-slate-600 dark:text-slate-400"}):x.jsx(ob,{size:14,className:"text-slate-600 dark:text-slate-400"}),x.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:$==="light"?"Light Mode":"Dark Mode"})]}),x.jsx("button",{onClick:Z,className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800",style:{backgroundColor:$==="dark"?"#3b82f6":"#cbd5e1"},children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:$==="dark"?"translateX(18px)":"translateX(2px)"}})})]})]}),x.jsx("div",{className:"border-t border-slate-200 dark:border-neutral-700"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"View Filters"}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Show Groups"}),x.jsx("button",{onClick:I,className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800",style:{backgroundColor:y?"#3b82f6":"#cbd5e1"},children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:y?"translateX(18px)":"translateX(2px)"}})})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Show Relationships"}),x.jsx("button",{onClick:k,className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800",style:{backgroundColor:v?"#3b82f6":"#cbd5e1"},children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:v?"translateX(18px)":"translateX(2px)"}})})]}),x.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-500 mt-1",children:"Available in Flow & Strategic views"})]})]}),x.jsx("div",{className:"border-t border-slate-200 dark:border-neutral-700"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Integrations"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Use CodeCohesion API"}),x.jsx("button",{onClick:()=>{const D=!ee;b(D),localStorage.setItem("contextflow.useCodeCohesionAPI",String(D))},className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-neutral-800",style:{backgroundColor:ee?"#3b82f6":"#cbd5e1"},children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:ee?"translateX(18px)":"translateX(2px)"}})})]}),x.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-500 mt-1",children:"Enable live repository stats and contributors"})]}),x.jsx("div",{className:"border-t border-slate-200 dark:border-neutral-700"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Display"}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:["Group Opacity: ",Math.round(E*100),"%"]}),x.jsx("input",{type:"range",min:"0",max:"100",value:E*100,onChange:D=>R(parseInt(D.target.value)/100),className:"w-full h-2 bg-slate-200 dark:bg-neutral-700 rounded-lg appearance-none cursor-pointer",style:{accentColor:$==="light"?"#3b82f6":"#60a5fa"}})]})]})]})})]})]})]})}function nn({onClick:e,icon:t,label:n,disabled:r,tooltip:o}){return x.jsxs("button",{onClick:e,disabled:r,title:o,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded text-xs font-medium transition-colors ${r?"text-slate-300 dark:text-neutral-600 cursor-not-allowed":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-neutral-700 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[t,n&&x.jsx("span",{children:n})]})}function sk({repos:e,teams:t,onRepoAssign:n}){const r=s=>t.filter(a=>s.teamIds.includes(a.id)),o=(s,a)=>{s.dataTransfer.setData("application/contextflow-repo",a),s.dataTransfer.effectAllowed="move"};return x.jsx("div",{className:"space-y-2",children:e.map(s=>{const a=r(s);return x.jsxs("div",{draggable:!0,onDragStart:u=>o(u,s.id),className:"bg-slate-50 dark:bg-neutral-900 border border-slate-200 dark:border-neutral-700 rounded p-2.5 cursor-move hover:border-blue-400 dark:hover:border-blue-500 hover:bg-white dark:hover:bg-neutral-800 transition-colors",children:[x.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 mb-1",children:s.name}),s.remoteUrl&&x.jsxs("a",{href:s.remoteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 text-[11px] flex items-center gap-1 hover:underline mb-2",onClick:u=>u.stopPropagation(),children:[x.jsx("span",{className:"truncate",children:s.remoteUrl}),x.jsx(hu,{size:10,className:"flex-shrink-0"})]}),a.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.map(u=>x.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded text-[10px] font-medium",title:u.topologyType?`${u.name} (${u.topologyType})`:u.name,children:u.name},u.id))})]},s.id)})})}const lk=[{name:"Blue",hex:"#3b82f6"},{name:"Purple",hex:"#a855f7"},{name:"Pink",hex:"#ec4899"},{name:"Red",hex:"#ef4444"},{name:"Orange",hex:"#f97316"},{name:"Amber",hex:"#f59e0b"},{name:"Green",hex:"#10b981"},{name:"Teal",hex:"#14b8a6"},{name:"Cyan",hex:"#06b6d4"},{name:"Indigo",hex:"#6366f1"}];function ak({contextCount:e,onConfirm:t,onCancel:n}){const[r,o]=U.useState(""),[s,a]=U.useState("#3b82f6"),[u,d]=U.useState(""),p=h=>{h.preventDefault(),r.trim()&&t(r.trim(),s,u.trim()||void 0)};return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:x.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl w-[400px] max-w-[90vw] border border-slate-200 dark:border-neutral-700",children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-neutral-700",children:[x.jsx("h2",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"Create Group"}),x.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:x.jsx(ln,{size:16})})]}),x.jsxs("form",{onSubmit:p,className:"p-4 space-y-4",children:[x.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Creating group with ",e," selected context",e!==1?"s":""]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Group Label"}),x.jsx("input",{type:"text",value:r,onChange:h=>o(h.target.value),placeholder:"e.g., Customer-Facing Services",autoFocus:!0,className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Color"}),x.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:lk.map(h=>x.jsx("button",{type:"button",onClick:()=>a(h.hex),className:`w-full aspect-square rounded-md border-2 transition-all hover:scale-110 ${s===h.hex?"border-slate-900 dark:border-slate-100 ring-2 ring-offset-2 ring-slate-400":"border-slate-300 dark:border-neutral-600"}`,style:{backgroundColor:h.hex},title:h.name},h.hex))}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"color",value:s,onChange:h=>a(h.target.value),className:"w-12 h-10 rounded border border-slate-200 dark:border-neutral-600 cursor-pointer"}),x.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),placeholder:"#3b82f6",className:"flex-1 text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Notes (optional)"}),x.jsx("textarea",{value:u,onChange:h=>d(h.target.value),placeholder:"Additional context about this group...",rows:3,className:"w-full text-sm px-3 py-2 rounded-md border border-slate-200 dark:border-neutral-600 bg-white dark:bg-neutral-900 text-slate-900 dark:text-slate-100 outline-none focus:border-blue-500 dark:focus:border-blue-400 resize-none"})]}),x.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[x.jsx("button",{type:"button",onClick:n,className:"px-3 py-1.5 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),x.jsx("button",{type:"submit",disabled:!r.trim(),className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-neutral-600 text-white rounded transition-colors disabled:cursor-not-allowed",children:"Create Group"})]})]})]})})}function ck(){const e=q(k=>k.activeProjectId),t=q(k=>e?k.projects[e]:void 0),n=q(k=>k.selectedContextId),r=q(k=>k.selectedGroupId),o=q(k=>k.selectedActorId),s=q(k=>k.selectedUserNeedId),a=q(k=>k.selectedRelationshipId),u=q(k=>k.selectedContextIds),d=q(k=>k.clearContextSelection),p=q(k=>k.createGroup),[h,g]=U.useState(!1),w=U.useMemo(()=>{var k;return((k=t==null?void 0:t.repos)==null?void 0:k.filter(E=>!E.contextId))||[]},[t==null?void 0:t.repos]),[P,N]=U.useState(()=>localStorage.getItem("contextflow.repoSidebar.collapsed")==="true"),S=w.length>0,T=S&&!P,y=!!n||!!r||!!o||!!s||!!a,v=T&&y?"grid-cols-[240px_1fr_320px]":T?"grid-cols-[240px_1fr]":y?"grid-cols-[1fr_320px]":"grid-cols-[1fr]",I=()=>{N(k=>{const E=!k;return localStorage.setItem("contextflow.repoSidebar.collapsed",String(E)),E})};return x.jsxs("div",{className:"w-screen h-screen flex flex-col bg-slate-50 text-slate-900 dark:bg-neutral-900 dark:text-neutral-100",children:[x.jsx(ik,{}),u.length>0&&x.jsxs("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded-lg shadow-xl px-4 py-3 flex items-center gap-4",children:[x.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[u.length," context",u.length!==1?"s":""," selected"]}),x.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded transition-colors",children:[x.jsx(Ry,{size:14}),"Create Group"]}),x.jsx("button",{onClick:d,className:"p-1 rounded hover:bg-slate-100 dark:hover:bg-neutral-700 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",title:"Clear selection",children:x.jsx(ln,{size:16})})]}),h&&x.jsx(ak,{contextCount:u.length,onConfirm:(k,E,R)=>{p(k,E,R),g(!1)},onCancel:()=>g(!1)}),x.jsxs("main",{className:`flex-1 grid ${v} overflow-hidden`,children:[T&&x.jsxs("aside",{className:"border-r border-slate-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 flex flex-col",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 pb-2",children:[x.jsxs("div",{className:"text-[11px] font-semibold text-slate-500 dark:text-neutral-400 uppercase tracking-wider",children:["Unassigned Repos (",w.length,")"]}),x.jsx("button",{onClick:I,className:"p-1 hover:bg-slate-100 dark:hover:bg-neutral-700 rounded text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",title:"Hide sidebar",children:x.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:x.jsx("path",{d:"M9 3L3 9M3 3l6 6"})})})]}),x.jsx("div",{className:"flex-1 px-4 pb-4 text-xs overflow-y-auto",children:x.jsx(sk,{repos:w,teams:(t==null?void 0:t.teams)||[],onRepoAssign:(k,E)=>{}})})]}),x.jsxs("section",{className:"relative bg-slate-100 dark:bg-neutral-800",children:[S&&P&&x.jsx("button",{onClick:I,className:"absolute left-2 top-2 z-10 bg-white dark:bg-neutral-800 border border-slate-200 dark:border-neutral-700 rounded px-2 py-1.5 text-xs text-slate-500 dark:text-neutral-400 hover:bg-slate-50 dark:hover:bg-neutral-700 hover:text-slate-700 dark:hover:text-slate-300 shadow-sm",title:"Show unassigned repos",children:x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:x.jsx("path",{d:"M4 9l3-3-3-3"})}),x.jsxs("span",{className:"font-medium",children:["Repos (",w.length,")"]})]})}),x.jsx(qb,{})]}),(n||r||o||s||a)&&x.jsx("aside",{className:"border-l border-slate-200 dark:border-neutral-700 p-4 text-xs overflow-y-auto bg-white dark:bg-neutral-800",children:x.jsx(Jb,{})})]})]})}oc.createRoot(document.getElementById("root")).render(x.jsx(U.StrictMode,{children:x.jsx(ck,{})}));
